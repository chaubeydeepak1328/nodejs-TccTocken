/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,r={221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(9026);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,s),!0;case 6:return h.fn.call(h.context,t,n,i,s,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,n);break;case 4:h[u].fn.call(h[u].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,u=8*s-i-1,h=(1<<u)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*c-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*g}},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var u="",h=0,l=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(l=l>-1?l:0,e.charCodeAt(f+1)){case 100:case 102:if(h>=c)break;if(null==r[h])break;l<f&&(u+=e.slice(l,f)),u+=Number(r[h]),l=f+2,f++;break;case 105:if(h>=c)break;if(null==r[h])break;l<f&&(u+=e.slice(l,f)),u+=Math.floor(Number(r[h])),l=f+2,f++;break;case 79:case 111:case 106:if(h>=c)break;if(void 0===r[h])break;l<f&&(u+=e.slice(l,f));var p=typeof r[h];if("string"===p){u+="'"+r[h]+"'",l=f+2,f++;break}if("function"===p){u+=r[h].name||"<anonymous>",l=f+2,f++;break}u+=i(r[h]),l=f+2,f++;break;case 115:if(h>=c)break;l<f&&(u+=e.slice(l,f)),u+=String(r[h]),l=f+2,f++;break;case 37:l<f&&(u+=e.slice(l,f)),u+="%",l=f+2,f++,h--}++h}++f}return-1===l?e:(l<d&&(u+=e.slice(l)),u)}},1089:(e,t)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=function(){return!r()&&!n()}},1591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5215).__exportStar(r(3093),t)},2063:(e,t,r)=>{"use strict";t.g=void 0;const n=r(8196);t.g=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},2566:(e,t)=>{var r;r=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),r=function(e){var t=0,r=0,n=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)i[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=i[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!=typeof Int32Array?i.subarray(256*n,256*n+256):i.slice(256*n,256*n+256);return s}(t),n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],c=r[5],u=r[6],h=r[7],l=r[8],d=r[9],f=r[10],p=r[11],g=r[12],m=r[13],y=r[14];e.table=t,e.bstr=function(e,r){for(var n=~r,i=0,s=e.length;i<s;)n=n>>>8^t[255&(n^e.charCodeAt(i++))];return~n},e.buf=function(e,r){for(var v=~r,b=e.length-15,w=0;w<b;)v=y[e[w++]^255&v]^m[e[w++]^v>>8&255]^g[e[w++]^v>>16&255]^p[e[w++]^v>>>24]^f[e[w++]]^d[e[w++]]^l[e[w++]]^h[e[w++]]^u[e[w++]]^c[e[w++]]^a[e[w++]]^o[e[w++]]^s[e[w++]]^i[e[w++]]^n[e[w++]]^t[e[w++]];for(b+=15;w<b;)v=v>>>8^t[255&(v^e[w++])];return~v},e.str=function(e,r){for(var n=~r,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?n=n>>>8^t[255&(n^o)]:o<2048?n=(n=n>>>8^t[255&(n^(192|o>>6&31))])>>>8^t[255&(n^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^t[255&(n^(240|o>>8&7))])>>>8^t[255&(n^(128|o>>2&63))])>>>8^t[255&(n^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(n^(128|63&a))]):n=(n=(n=n>>>8^t[255&(n^(224|o>>12&15))])>>>8^t[255&(n^(128|o>>6&63))])>>>8^t[255&(n^(128|63&o))];return~n}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(t):r({})},2791:function(e,t,r){!function(e){"use strict";if(!e.setImmediate){var t,r,n,i,s,o=1,a={},c=!1,u=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?t=function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&d(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),t=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){d(e.data)},t=function(e){n.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,t=function(e){var t=u.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):t=function(e){setTimeout(d,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var i={callback:e,args:r};return a[o]=i,t(o),o++},h.clearImmediate=l}function l(e){delete a[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=a[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{l(e),c=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},4874:(e,t,r)=>{"use strict";const n=r(793);e.exports=o;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:f,wrapResponseSerializer:f,wrapErrorSerializer:f,req:d,res:d,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let d=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const f=e.level||"info",g=Object.create(r);g.log||(g.log=p),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:l(e)};return g.levels=o.levels,g.level=f,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=p,g.serializers=n,g._serialize=s,g._stdErrSerialize=d,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),l=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],l,a,this._stdErrSerialize)}function d(e){this._childLevel=1+(0|e._childLevel),this.error=u(e,r,"error"),this.fatal=u(e,r,"fatal"),this.warn=u(e,r,"warn"),this.info=u(e,r,"info"),this.debug=u(e,r,"debug"),this.trace=u(e,r,"trace"),a&&(this.serializers=a,this._serialize=l),t&&(this._logEvent=h([].concat(e._logEvent.bindings,r)))}return d.prototype=this,new d(this)},t&&(g._logEvent=h()),g}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?p:a[r]?a[r]:i[r]||i[s]||p,function(e,t,r){var s;(e.transmit||t[r]!==p)&&(t[r]=(s=t[r],function(){const a=e.timestamp(),u=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var d=0;d<u.length;d++)u[d]=arguments[d];if(e.serialize&&!e.asObject&&c(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(l,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const u={};i&&(u.time=i),u.level=o.levels.values[t];let h=1+(0|e._childLevel);if(h<1&&(h=1),null!==a&&"object"==typeof a){for(;h--&&"object"==typeof s[0];)Object.assign(u,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(u.msg=a),u}(this,r,u,a)):s.apply(l,u),e.transmit){const n=e.transmit.level||t.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,u=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=h(u)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function u(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function h(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function l(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:m}function d(){return{}}function f(e){return e}function p(){}function g(){return!1}function m(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},4945:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||h(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=g(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=d(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},s&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,s=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function A(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function I(e,t){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var e=new I(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var x=[301,302,303,307,308];I.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new I(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,r){return new Promise((function(i,s){var a=new E(e,r);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new I(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(l(e)),u.setRequestHeader(e,d(r.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",h)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}_.polyfill=!0,n.fetch||(n.fetch=_,n.Headers=p,n.Request=E,n.Response=I),t.Headers=p,t.Request=E,t.Response=I,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},5215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>E,__await:()=>v,__awaiter:()=>h,__classPrivateFieldGet:()=>_,__classPrivateFieldSet:()=>S,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>f,__extends:()=>i,__generator:()=>l,__importDefault:()=>x,__importStar:()=>I,__makeTemplateObject:()=>A,__metadata:()=>u,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function l(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof v?Promise.resolve(r.value.v).then(c,u):h(s[0][2],r)}catch(e){h(s[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(7173),t),n.__exportStar(r(1089),t)},5924:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>d,Fc:()=>u,Id:()=>l,O8:()=>o,qv:()=>c,po:()=>p,Ow:()=>a,ZJ:()=>h,DH:()=>s,ld:()=>f});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9999);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function u(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function h(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,i.DO)(e),e}function l(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.DO)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class d{clone(){return this._cloneInto()}}function f(e){const t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},6289:(e,t)=>{"use strict";function r(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function n(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return a(function(e){let t="";for(let r=0;r<e.length;r++)t+=o[e[r]];return t}(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const r=h(e),n=h(t+55+r.length/2);return Uint8Array.from(c(n+r))}function s(e){let t,i,o,a,c;const u=[],h=e[0];if(h<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(h<=183){if(t=h-127,o=128===h?Uint8Array.from([]):r(e,1,t),2===t&&o[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:o,remainder:e.slice(t)}}if(h<=191){if(i=h-182,e.length-1<i)throw new Error("invalid RLP: not enough bytes for string length");if(t=n(r(e,1,i)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return o=r(e,i,t+i),{data:o,remainder:e.slice(t+i)}}if(h<=247){for(t=h-191,a=r(e,1,t);a.length;)c=s(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(t)}}{if(i=h-246,t=n(r(e,1,i)),t<56)throw new Error("invalid RLP: encoded list too short");const o=i+t;if(o>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=r(e,i,o);a.length;)c=s(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(o)}}}t.Tj=void 0;const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function c(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=a(e.slice(n,n+2))}return t}function u(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function h(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function l(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function d(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return l(e)?c((r="string"!=typeof(n=e)?n:l(n)?n.slice(2):n).length%2?`0${r}`:r):(t=e,(new TextEncoder).encode(t));var t,r,n;if("number"==typeof e||"bigint"==typeof e)return e?c(h(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.Tj={encode:function e(t){if(Array.isArray(t)){const r=[];let n=0;for(let i=0;i<t.length;i++){const s=e(t[i]);r.push(s),n+=s.length}return u(i(n,192),...r)}const r=d(t);return 1===r.length&&r[0]<128?r:u(i(r.length,128),r)},decode:function(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=s(d(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}}},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,s,o,u;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,u=h,console&&console.warn&&console.warn(u)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,h=p(c,u);for(r=0;r<u;++r)n(h[r],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7173:(e,t,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],c=s[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,c)),h=0,l=c>0?o-4:o;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,u=n-i;a<u;a+=o)s.push(c(e,a,a+o>u?u:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8196:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},8287:(e,t,r)=>{"use strict";const n=r(7526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=c,t.IS=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return h(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return k(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Z(n))return o;e[r+o]=n}return o}function E(e,t,r,n){return W(V(t,e.length-r),e,r,n)}function A(e,t,r,n){return W(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function I(e,t,r,n){return W(K(t),e,r,n)}function x(e,t,r,n){return W(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return l(e)},c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Q(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),u=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==h[e]){s=u[e],o=h[e];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return A(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function k(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function C(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function B(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){H(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function M(e,t,r,n,i){H(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function L(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,s){return t=+t,r>>>=0,s||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,s){return t=+t,r>>>=0,s||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Y((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Y((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Y((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Y((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=c.isBuffer(e)?e:c.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const U={};function F(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function H(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||$(t,e.length-(r+1))}(n,i,s)}function z(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Y(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9606),t),n.__exportStar(r(9883),t),n.__exportStar(r(2010),t),n.__exportStar(r(9026),t)},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9244),t),n.__exportStar(r(1861),t)},9094:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||h(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=g(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=d(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},s&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,s=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function A(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function I(e,t){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var e=new I(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var x=[301,302,303,307,308];I.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new I(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,r){return new Promise((function(i,s){var a=new E(e,r);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new I(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(l(e)),u.setRequestHeader(e,d(r.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",h)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}_.polyfill=!0,n.fetch||(n.fetch=_,n.Headers=p,n.Request=E,n.Response=I),t.Headers=p,t.Request=E,t.Response=I,t.fetch=_}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(2985),t),n.__exportStar(r(221),t)},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},9999:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>i,Fe:()=>n,Ht:()=>a,sd:()=>s})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e].call(s.exports,s,s.exports,i),s.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="wallconn:",i.l=(r,n,s,o)=>{if(e[r])e[r].push(n);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var l=u[h];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+s){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[n];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=s);var o=i.p+i.u(t),a=new Error;i.l(o,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[o,a,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);c&&c(i)}for(t&&t(r);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkwallconn=self.webpackChunkwallconn||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{identity:()=>gi});var t={};i.r(t),i.d(t,{base2:()=>mi});var r={};i.r(r),i.d(r,{base8:()=>yi});var n={};i.r(n),i.d(n,{base10:()=>vi});var s={};i.r(s),i.d(s,{base16:()=>bi,base16upper:()=>wi});var o={};i.r(o),i.d(o,{base32:()=>Ei,base32hex:()=>_i,base32hexpad:()=>Pi,base32hexpadupper:()=>Oi,base32hexupper:()=>Si,base32pad:()=>Ii,base32padupper:()=>xi,base32upper:()=>Ai,base32z:()=>ki});var a={};i.r(a),i.d(a,{base36:()=>Ti,base36upper:()=>Ci});var c={};i.r(c),i.d(c,{base58btc:()=>Bi,base58flickr:()=>Ri});var u={};i.r(u),i.d(u,{base64:()=>Ni,base64pad:()=>Mi,base64url:()=>Li,base64urlpad:()=>ji});var h={};i.r(h),i.d(h,{base256emoji:()=>qi});var l={};i.r(l),i.d(l,{sha256:()=>us,sha512:()=>hs});var d={};i.r(d),i.d(d,{identity:()=>ds});var f={};i.r(f),i.d(f,{code:()=>ps,decode:()=>ms,encode:()=>gs,name:()=>fs});var p={};i.r(p),i.d(p,{code:()=>ws,decode:()=>As,encode:()=>Es,name:()=>bs});var g={};i.r(g),i.d(g,{abiSchemaToJsonSchema:()=>w_,codePointToInt:()=>x_,ensureIfUint8Array:()=>B_,ethAbiToJsonSchema:()=>E_,fetchArrayElement:()=>A_,hexToNumber:()=>__,hexToUint8Array:()=>C_,numberToHex:()=>S_,padLeft:()=>P_,parseBaseType:()=>v_,transformJsonDataToAbiFormat:()=>I_,uint8ArrayToHexString:()=>O_});var m={};i.r(m),i.d(m,{isBatchRequest:()=>zP,isBatchResponse:()=>DP,isResponseRpcError:()=>CP,isResponseWithError:()=>RP,isResponseWithNotification:()=>NP,isResponseWithResult:()=>BP,isSubscriptionResult:()=>MP,isValidResponse:()=>jP,setRequestIdStart:()=>FP,toBatchPayload:()=>HP,toPayload:()=>qP,validateResponse:()=>LP});var y={};i.r(y),i.d(y,{ChunkResponseParser:()=>KP,Eip1193Provider:()=>QP,EventEmitter:()=>NS,SocketProvider:()=>YP,Web3DeferredPromise:()=>VP,asciiToHex:()=>ES,bytesToHex:()=>aS,bytesToUint8Array:()=>sS,checkAddressCheckSum:()=>jS,compareBlockNumbers:()=>GS,convert:()=>aP,convertScalarValue:()=>sP,encodePacked:()=>yP,ethUnitMap:()=>nS,format:()=>cP,fromAscii:()=>AS,fromDecimal:()=>dS,fromTwosComplement:()=>tP,fromUtf8:()=>gS,fromWei:()=>OS,getStorageSlotNumForLongString:()=>wP,hexToAscii:()=>IS,hexToBytes:()=>cS,hexToNumber:()=>uS,hexToNumberString:()=>fS,hexToString:()=>wS,hexToUtf8:()=>yS,isAddress:()=>DS,isBatchRequest:()=>zP,isBatchResponse:()=>DP,isBloom:()=>US,isContractAddressInBloom:()=>HS,isContractInitOptions:()=>VS,isDataFormat:()=>nP,isHex:()=>LS,isHexStrict:()=>MS,isInBloom:()=>FS,isNullish:()=>KS,isPromise:()=>xP,isResponseRpcError:()=>CP,isResponseWithError:()=>RP,isResponseWithNotification:()=>NP,isResponseWithResult:()=>BP,isSubscriptionResult:()=>MP,isTopic:()=>zS,isTopicInBloom:()=>$S,isUint8Array:()=>eS,isUserEthereumAddressInBloom:()=>qS,isValidResponse:()=>jP,jsonRpc:()=>m,keccak256:()=>hP,keccak256Wrapper:()=>hP,leftPad:()=>XS,mergeDeep:()=>QS,numberToHex:()=>lS,padLeft:()=>ZS,padRight:()=>JS,pollTillDefined:()=>PP,pollTillDefinedAndReturnIntervalId:()=>SP,processSolidityEncodePackedArgs:()=>mP,randomBytes:()=>EP,randomHex:()=>AP,rejectIfConditionAtInterval:()=>kP,rejectIfTimeout:()=>OP,rightPad:()=>YS,setRequestIdStart:()=>FP,sha3:()=>lP,sha3Raw:()=>dP,soliditySha3:()=>vP,soliditySha3Raw:()=>bP,stringToHex:()=>mS,toAscii:()=>xS,toBatchPayload:()=>HP,toBigInt:()=>PS,toBool:()=>CS,toChecksumAddress:()=>TS,toDecimal:()=>hS,toHex:()=>_S,toNumber:()=>SS,toPayload:()=>qP,toTwosComplement:()=>eP,toUtf8:()=>vS,toWei:()=>kS,uint8ArrayConcat:()=>tS,uint8ArrayEquals:()=>rS,utf8ToBytes:()=>bS,utf8ToHex:()=>pS,uuidV4:()=>TP,validateResponse:()=>LP,waitWithTimeout:()=>_P});var v={};i.r(v),i.d(v,{DO:()=>ZO,OG:()=>uk,My:()=>YO,Ph:()=>nk,lX:()=>ik,Id:()=>ck,fg:()=>dk,qj:()=>ak,aT:()=>rk,aY:()=>QO,lq:()=>sk,z:()=>ok,Q5:()=>pk});var b={};i.r(b),i.d(b,{secp256k1:()=>Kk});var w=i(7007),E=i.n(w),A=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},I=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},x=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},_=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},S=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},P=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},O=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,k=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],T=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function C(e){var t=function(e){return""!==e&&k.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new S;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=A(A([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=T.length;t<r;t++){var n=T[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=O.exec(e);return a&&a[1]?new _(r,s,o,a[1]):new I(r,s,o)}var B=i(8900),R=i(8196),N=i(2063);const M="2.23.2";let L=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,j=`viem@${M}`;class D extends Error{constructor(e,t={}){const r=t.cause instanceof D?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof D&&t.cause.docsPath||t.docsPath,i=L?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...j?[`Version: ${j}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=M}walk(e){return U(this,e)}}function U(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?U(e.cause,t):t?null:e}function F(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class q extends D{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function H(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new q({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new q({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}class z extends D{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class $ extends D{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function G(e){return F(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function V(e,{size:t}){if(G(e)>t)throw new $({givenSize:G(e),maxSize:t})}function K(e,t={}){const{signed:r}=t;t.size&&V(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}const W=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Q(e,t={}){return"number"==typeof e||"bigint"==typeof e?J(e,t):"string"==typeof e?function(e,t={}){return Z(Y.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(V(r,{size:t.size}),H(r,{size:t.size})):r}(e,t):Z(e,t)}function Z(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=W[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(V(n,{size:t.size}),H(n,{dir:"right",size:t.size})):n}function J(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?s=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof s&&r?-s-1n:0;if(s&&i>s||i<o){const t="bigint"==typeof e?"n":"";throw new z({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?H(a,{size:n}):a}const Y=new TextEncoder,X=new TextEncoder;const ee={zero:48,nine:57,A:65,F:70,a:97,f:102};function te(e){return e>=ee.zero&&e<=ee.nine?e-ee.zero:e>=ee.A&&e<=ee.F?e-(ee.A-10):e>=ee.a&&e<=ee.f?e-(ee.a-10):void 0}function re(e,t={}){let r=e;t.size&&(V(r,{size:t.size}),r=H(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const r=te(n.charCodeAt(t++)),i=te(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new D(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);s[e]=16*r+i}return s}function ne(e,t={}){const r=X.encode(e);return"number"==typeof t.size?(V(r,{size:t.size}),H(r,{dir:"right",size:t.size})):r}var ie=i(9999);const se=BigInt(2**32-1),oe=BigInt(32);function ae(e,t=!1){return t?{h:Number(e&se),l:Number(e>>oe&se)}:{h:0|Number(e>>oe&se),l:0|Number(e&se)}}function ce(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=ae(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}var ue=i(5924);const he=[],le=[],de=[],fe=BigInt(0),pe=BigInt(1),ge=BigInt(2),me=BigInt(7),ye=BigInt(256),ve=BigInt(113);for(let e=0,t=pe,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],he.push(2*(5*n+r)),le.push((e+1)*(e+2)/2%64);let i=fe;for(let e=0;e<7;e++)t=(t<<pe^(t>>me)*ve)%ye,t&ge&&(i^=pe<<(pe<<BigInt(e))-pe);de.push(i)}const[be,we]=ce(de,!0),Ee=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Ae=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class Ie extends ue.Vw{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,ie.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,ue.DH)(this.state)}keccak(){ue.qv||(0,ue.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=Ee(s,o,1)^r[n],c=Ae(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=le[r],s=Ee(t,i,n),o=Ae(t,i,n),a=he[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=be[n],e[1]^=we[n]}r.fill(0)}(this.state32,this.rounds),ue.qv||(0,ue.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,ie.CC)(this);const{blockLen:t,state:r}=this,n=(e=(0,ue.ZJ)(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,ie.CC)(this,!1),(0,ie.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,ie.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,ie.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new Ie(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const xe=((e,t,r)=>(0,ue.ld)((()=>new Ie(t,e,r))))(1,136,32);function _e(e,t){const r=t||"hex",n=xe(F(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return re(J(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(V(r,{size:t.size}),H(r,{size:t.size})):r}(e,t):F(e)?re(e,t):ne(e,t)}(e):e);return"bytes"===r?n:Q(n)}class Se extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Pe=new Se(8192);function Oe(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function ke({hash:e,signature:t}){return r=await async function({hash:e,signature:t}){const r=F(e)?e:Q(e),{secp256k1:n}=await i.e(641).then(i.bind(i,4641)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:i,yParity:s}=t,o=Oe(Number(s??i));return new n.Signature(K(e),K(r)).addRecoveryBit(o)}const e=F(t)?t:Q(t),r=Oe(function(e,t={}){return Number(K(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${s.recoverPublicKey(r.substring(2)).toHex(!1)}`}({hash:e,signature:t}),function(e,t){if(Pe.has(`${e}.${t}`))return Pe.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=_e(ne(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const s=`0x${i.join("")}`;return Pe.set(`${e}.${t}`,s),s}(`0x${_e(`0x${r.substring(4)}`).substring(26)}`);var r}const Te=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===n;)o++,s++;const c=(e.length-s)*i+1>>>0,u=new Uint8Array(c);for(;s<e.length;){const n=e.charCodeAt(s);if(n>255)return;let i=t[n];if(255===i)return;let o=0;for(let e=c-1;(0!==i||o<a)&&-1!==e;e--,o++)i+=r*u[e]>>>0,u[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=o,s++}let h=c-a;for(;h!==c&&0===u[h];)h++;const l=new Uint8Array(o+(c-h));let d=o;for(;h!==c;)l[d++]=u[h++];return l}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,i++;const u=(c-a)*s+1>>>0,h=new Uint8Array(u);for(;a!==c;){let e=t[a],n=0;for(let t=u-1;(0!==e||n<o)&&-1!==t;t--,n++)e+=256*h[t]>>>0,h[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=n,a++}let l=u-o;for(;l!==u&&0===h[l];)l++;let d=n.repeat(i);for(;l<u;++l)d+=e.charAt(h[l]);return d},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Ce(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function Be(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}function Re(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ne(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const Me="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Le=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function je(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Re(e),e}class De{clone(){return this._cloneInto()}}function Ue(e=32){if(Me&&"function"==typeof Me.getRandomValues)return Me.getRandomValues(new Uint8Array(e));if(Me&&"function"==typeof Me.randomBytes)return Me.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class Fe extends De{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Le(this.buffer)}update(e){Ne(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=je(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Le(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ne(this),function(e,t){Re(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Le(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const qe=BigInt(2**32-1),He=BigInt(32);function ze(e,t=!1){return t?{h:Number(e&qe),l:Number(e>>He&qe)}:{h:0|Number(e>>He&qe),l:0|Number(e&qe)}}const $e=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=ze(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]},Ge=(e,t,r)=>e>>>r,Ve=(e,t,r)=>e<<32-r|t>>>r,Ke=(e,t,r)=>e>>>r|t<<32-r,We=(e,t,r)=>e<<32-r|t>>>r,Qe=(e,t,r)=>e<<64-r|t>>>r-32,Ze=(e,t,r)=>e>>>r-32|t<<64-r,Je=function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},Ye=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Xe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,et=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),tt=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,rt=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,nt=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),[it,st]=$e(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),ot=new Uint32Array(80),at=new Uint32Array(80);class ct extends Fe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,u,h,l,d,f,p,g]}set(e,t,r,n,i,s,o,a,c,u,h,l,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)ot[r]=e.getUint32(t),at[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|ot[e-15],r=0|at[e-15],n=Ke(t,r,1)^Ke(t,r,8)^Ge(t,r,7),i=We(t,r,1)^We(t,r,8)^Ve(t,r,7),s=0|ot[e-2],o=0|at[e-2],a=Ke(s,o,19)^Qe(s,o,61)^Ge(s,o,6),c=We(s,o,19)^Ze(s,o,61)^Ve(s,o,6),u=et(i,c,at[e-7],at[e-16]),h=tt(u,n,a,ot[e-7],ot[e-16]);ot[e]=0|h,at[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=Ke(h,l,14)^Ke(h,l,18)^Qe(h,l,41),v=We(h,l,14)^We(h,l,18)^Ze(h,l,41),b=h&d^~h&p,w=nt(y,v,l&f^~l&g,st[e],at[e]),E=rt(w,m,t,b,it[e],ot[e]),A=0|w,I=Ke(r,n,28)^Qe(r,n,34)^Qe(r,n,39),x=We(r,n,28)^Ze(r,n,34)^Ze(r,n,39),_=r&i^r&o^i&o,S=n&s^n&a^s&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|h,f=0|l,({h,l}=Je(0|c,0|u,0|E,0|A)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const P=Ye(A,x,S);r=Xe(P,E,I,_),n=0|P}({h:r,l:n}=Je(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=Je(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Je(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=Je(0|this.Dh,0|this.Dl,0|c,0|u)),({h,l}=Je(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=Je(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Je(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Je(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,s,o,a,c,u,h,l,d,f,p,g,m,y)}roundClean(){ot.fill(0),at.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ut=function(e){const t=t=>e().update(je(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new ct)),ht=BigInt(0),lt=BigInt(1),dt=BigInt(2);function ft(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function pt(e){if(!ft(e))throw new Error("Uint8Array expected")}function gt(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const mt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function yt(e){pt(e);let t="";for(let r=0;r<e.length;r++)t+=mt[e[r]];return t}function vt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?ht:BigInt("0x"+e)}function bt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function wt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=bt(e.charCodeAt(i)),s=bt(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function Et(e){return pt(e),vt(yt(Uint8Array.from(e).reverse()))}function At(e,t){return wt(e.toString(16).padStart(2*t,"0"))}function It(e,t){return At(e,t).reverse()}function xt(e,t,r){let n;if("string"==typeof t)try{n=wt(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!ft(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function _t(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];pt(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const St=e=>"bigint"==typeof e&&ht<=e;function Pt(e,t,r,n){if(!function(e,t,r){return St(e)&&St(t)&&St(r)&&t<=e&&e<r}(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}const Ot=e=>(dt<<BigInt(e-1))-lt,kt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ft(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Tt(e,t,r={}){const n=(t,r,n)=>{const i=kt[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function Ct(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const Bt=BigInt(0),Rt=BigInt(1),Nt=BigInt(2),Mt=BigInt(3),Lt=BigInt(4),jt=BigInt(5),Dt=BigInt(8);function Ut(e,t){const r=e%t;return r>=Bt?r:t+r}function Ft(e,t,r){if(t<Bt)throw new Error("invalid exponent, negatives unsupported");if(r<=Bt)throw new Error("invalid modulus");if(r===Rt)return Bt;let n=Rt;for(;t>Bt;)t&Rt&&(n=n*e%r),e=e*e%r,t>>=Rt;return n}function qt(e,t,r){let n=e;for(;t-- >Bt;)n*=n,n%=r;return n}function Ht(e,t){if(e===Bt)throw new Error("invert: expected non-zero number");if(t<=Bt)throw new Error("invert: expected positive modulus, got "+t);let r=Ut(e,t),n=t,i=Bt,s=Rt;for(;r!==Bt;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==Rt)throw new Error("invert: does not exist");return Ut(i,t)}const zt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $t(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Gt(e,t,r=!1,n={}){if(e<=Bt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=$t(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:Ot(i),ZERO:Bt,ONE:Rt,create:t=>Ut(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return Bt<=t&&t<e},is0:e=>e===Bt,isOdd:e=>(e&Rt)===Rt,neg:t=>Ut(-t,e),eql:(e,t)=>e===t,sqr:t=>Ut(t*t,e),add:(t,r)=>Ut(t+r,e),sub:(t,r)=>Ut(t-r,e),mul:(t,r)=>Ut(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Bt)throw new Error("invalid exponent, negatives unsupported");if(r===Bt)return e.ONE;if(r===Rt)return t;let n=e.ONE,i=t;for(;r>Bt;)r&Rt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Rt;return n}(a,e,t),div:(t,r)=>Ut(t*Ht(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ht(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%Lt===Mt){const t=(e+Rt)/Lt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Dt===jt){const t=(e-jt)/Dt;return function(e,r){const n=e.mul(r,Nt),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,Nt),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Rt)/Nt;let r,n,i;for(r=e-Rt,n=0;r%Nt===Bt;r/=Nt,n++);for(i=Nt;i<e&&Ft(i,t,e)!==e-Rt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+Rt)/Lt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+Rt)/Nt;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),h=e.pow(o,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Rt<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?It(e,s):At(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?Et(e):function(e){return vt(yt(e))}(e)}});return Object.freeze(a)}const Vt=BigInt(0),Kt=BigInt(1);function Wt(e,t){const r=t.negate();return e?r:t}function Qt(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Zt(e,t){return Qt(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Jt=new WeakMap,Yt=new WeakMap;function Xt(e){return Yt.get(e)||1}const er=BigInt(0),tr=BigInt(1),rr=BigInt(2),nr=BigInt(8),ir={zip215:!0};BigInt(0),BigInt(1);const sr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),or=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ar=BigInt(1),cr=BigInt(2);BigInt(3);const ur=BigInt(5),hr=BigInt(8);const lr=Gt(sr,void 0,!0),dr=function(e){const t=function(e){const t=function(e){return function(e){Tt(e,zt.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),Tt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$t(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}(e);return Tt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,u=rr<<BigInt(8*a)-tr,h=r.create,l=Gt(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:er}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(gt("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){Pt("coordinate "+e,t,er,u)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=Ct(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?nr:r.inv(s));const a=h(n*t),c=h(i*t),u=h(s*t);if(o)return{x:er,y:tr};if(u!==tr)throw new Error("invZ was invalid");return{x:a,y:c}})),v=Ct((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=h(i*i),u=h(s*s),l=h(o*o),d=h(l*l),f=h(c*r);if(h(l*h(f+u))!==h(d+h(n*h(c*u))))throw new Error("bad point: equation left != right (1)");if(h(i*s)!==h(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,tr,h(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=function(e){let t;for(t=0;e>ht;e>>=lt,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(b,l,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=h(t*o),c=h(i*n),u=h(r*o),l=h(s*n);return a===c&&u===l}is0(){return this.equals(b.ZERO)}negate(){return new b(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=h(r*r),o=h(n*n),a=h(rr*h(i*i)),c=h(e*s),u=r+n,l=h(h(u*u)-s-o),d=c+o,f=d-a,p=c-o,g=h(l*f),m=h(d*p),y=h(l*p),v=h(f*d);return new b(g,m,v,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:l,et:d}=e;if(r===BigInt(-1)){const e=h((s-i)*(u+c)),t=h((s+i)*(u-c)),r=h(t-e);if(r===er)return this.double();const n=h(o*rr*d),f=h(a*rr*l),p=f+n,g=t+e,m=f-n,y=h(p*r),v=h(g*m),w=h(p*m),E=h(r*g);return new b(y,v,E,w)}const f=h(i*c),p=h(s*u),g=h(a*n*d),y=h(o*l),v=h((i+s)*(c+u)-f-p),w=y-g,E=y+g,A=h(p-r*f),I=h(v*w),x=h(E*A),_=h(v*A),S=h(w*E);return new b(I,x,S,_)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;Pt("scalar",t,tr,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return Pt("scalar",r,er,n),r===er?E:this.is0()||r===tr?this:A.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===tr?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=xt("pointHex",e,o),gt("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const l=Et(a),f=n?u:r.ORDER;Pt("pointHex.y",l,er,f);const p=h(l*l),g=h(p-tr),m=h(i*p-s);let{isValid:y,value:v}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const w=(v&tr)===tr,E=!!(128&c);if(!n&&v===er&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==w&&(v=h(-v)),b.fromAffine({x:v,y:l})}static fromPrivateKey(e){return _(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=It(t,r.BYTES);return n[n.length-1]|=e&tr?128:0,n}toHex(){return yt(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,tr,h(t.Gx*t.Gy)),b.ZERO=new b(er,tr,tr,er);const{BASE:w,ZERO:E}=b,A=function(e,t){return{constTimeNegate:Wt,hasPrecomputes:e=>1!==Xt(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Vt;)r&Kt&&(n=n.add(i)),i=i.double(),r>>=Kt;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Zt(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Zt(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&u);i>>=l,r>o&&(r-=h,i+=Kt);const s=t,d=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(Wt(f,n[s])):a=a.add(Wt(p,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Zt(r,t),c=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===Vt)break;let r=Number(i&c);if(i>>=h,r>a&&(r-=u,i+=Kt),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Jt.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Jt.set(t,r(n))),n},wNAFCached(e,t,r){const n=Xt(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Xt(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Qt(r,t),Yt.set(e,r),Jt.delete(e)}}}(b,8*a);function I(e){return Ut(e,n)}function x(e){return I(Et(e))}function _(e){const t=r.BYTES;e=xt("private key",e,t);const n=xt("hashed private key",s(e),2*t),i=f(n.slice(0,t)),o=n.slice(t,2*t),a=x(i),c=w.multiply(a),u=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:u}}function S(e=new Uint8Array,...t){const r=_t(...t);return x(s(p(r,xt("context",e),!!i)))}const P=ir;return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return _(e).pointBytes},sign:function(e,t,s={}){e=xt("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=_(t),u=S(s.context,o,e),h=w.multiply(u).toRawBytes(),l=I(u+S(s.context,h,c,e)*a);return Pt("signature.s",l,er,n),xt("result",_t(h,It(l,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,s=P){const{context:o,zip215:a}=s,c=r.BYTES;e=xt("signature",e,2*c),t=xt("message",t),n=xt("publicKey",n,c),void 0!==a&&gt("zip215",a),i&&(t=i(t));const u=Et(e.slice(c,2*c));let h,l,d;try{h=b.fromHex(n,a),l=b.fromHex(e.slice(0,c),a),d=w.multiplyUnsafe(u)}catch{return!1}if(!a&&h.isSmallOrder())return!1;const f=S(o,l.toRawBytes(),h.toRawBytes(),t);return l.add(h.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:lr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:hr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ut,randomBytes:Ue,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){const r=sr,n=Ut(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=sr,o=e*e%s*e%s,a=qt(o,cr,s)*o%s,c=qt(a,ar,s)*e%s,u=qt(c,ur,s)*c%s,h=qt(u,t,s)*u%s,l=qt(h,r,s)*h%s,d=qt(l,n,s)*l%s,f=qt(d,i,s)*d%s,p=qt(f,i,s)*d%s,g=qt(p,t,s)*u%s;return{pow_p_5_8:qt(g,cr,s)*e%s,b2:o}}(e*Ut(n*n*t,r)).pow_p_5_8;let s=Ut(e*n*i,r);const o=Ut(t*s*s,r),a=s,c=Ut(s*or,r),u=o===e,h=o===Ut(-e,r),l=o===Ut(-e*or,r);return u&&(s=a),(h||l)&&(s=c),((e,t)=>(Ut(e,t)&Rt)===Rt)(s,r)&&(s=Ut(-s,r)),{isValid:u||h,value:s}}}),fr=".",pr="base64url",gr="utf8",mr="utf8",yr="did",vr="key",br="base58btc";function wr(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Er(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?wr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Ar(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Er(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return wr(r)}var Ir=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var l=0,d=s-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*h+1>>>0,u=new Uint8Array(o);i!==s;){for(var l=t[i],d=0,f=o-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*u[f]>>>0,u[f]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const xr=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class _r{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Sr{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Or(this,e)}}class Pr{constructor(e){this.decoders=e}or(e){return Or(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Or=(e,t)=>new Pr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class kr{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new _r(e,t,r),this.decoder=new Sr(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Tr=({name:e,prefix:t,encode:r,decode:n})=>new kr(e,t,r,n),Cr=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Ir(r,t);return Tr({prefix:e,name:t,encode:n,decode:e=>xr(i(e))})},Br=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Tr({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),Rr=Tr({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Nr=Object.freeze({__proto__:null,identity:Rr});const Mr=Br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lr=Object.freeze({__proto__:null,base2:Mr});const jr=Br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Dr=Object.freeze({__proto__:null,base8:jr});const Ur=Cr({prefix:"9",name:"base10",alphabet:"0123456789"});var Fr=Object.freeze({__proto__:null,base10:Ur});const qr=Br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hr=Br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zr=Object.freeze({__proto__:null,base16:qr,base16upper:Hr});const $r=Br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gr=Br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vr=Br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kr=Br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wr=Br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qr=Br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zr=Br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jr=Br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yr=Br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Xr=Object.freeze({__proto__:null,base32:$r,base32upper:Gr,base32pad:Vr,base32padupper:Kr,base32hex:Wr,base32hexupper:Qr,base32hexpad:Zr,base32hexpadupper:Jr,base32z:Yr});const en=Cr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tn=Cr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rn=Object.freeze({__proto__:null,base36:en,base36upper:tn});const nn=Cr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sn=Cr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var on=Object.freeze({__proto__:null,base58btc:nn,base58flickr:sn});const an=Br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cn=Br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),un=Br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hn=Br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ln=Object.freeze({__proto__:null,base64:an,base64pad:cn,base64url:un,base64urlpad:hn});const dn=Array.from(""),fn=dn.reduce(((e,t,r)=>(e[r]=t,e)),[]),pn=dn.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),gn=Tr({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+fn[t]),"")},decode:function(e){const t=[];for(const r of e){const e=pn[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var mn=Object.freeze({__proto__:null,base256emoji:gn}),yn=128,vn=-128,bn=Math.pow(2,31),wn=128,En=127,An=Math.pow(2,7),In=Math.pow(2,14),xn=Math.pow(2,21),_n=Math.pow(2,28),Sn=Math.pow(2,35),Pn=Math.pow(2,42),On=Math.pow(2,49),kn=Math.pow(2,56),Tn=Math.pow(2,63),Cn={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=bn;)r[n++]=255&t|yn,t/=128;for(;t&vn;)r[n++]=255&t|yn,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&En)<<s:(n&En)*Math.pow(2,s),s+=7}while(n>=wn);return e.bytes=o-r,i},encodingLength:function(e){return e<An?1:e<In?2:e<xn?3:e<_n?4:e<Sn?5:e<Pn?6:e<On?7:e<kn?8:e<Tn?9:10}},Bn=Cn;const Rn=(e,t,r=0)=>(Bn.encode(e,t,r),t),Nn=e=>Bn.encodingLength(e),Mn=(e,t)=>{const r=t.byteLength,n=Nn(e),i=n+Nn(r),s=new Uint8Array(i+r);return Rn(e,s,0),Rn(r,s,n),s.set(t,i),new Ln(e,r,t,s)};class Ln{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const jn=({name:e,code:t,encode:r})=>new Dn(e,t,r);class Dn{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Mn(this.code,t):t.then((e=>Mn(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Un=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Fn=jn({name:"sha2-256",code:18,encode:Un("SHA-256")}),qn=jn({name:"sha2-512",code:19,encode:Un("SHA-512")});Object.freeze({__proto__:null,sha256:Fn,sha512:qn});const Hn=xr,zn={code:0,name:"identity",encode:Hn,digest:e=>Mn(0,Hn(e))};Object.freeze({__proto__:null,identity:zn}),new TextEncoder,new TextDecoder;const $n={...Nr,...Lr,...Dr,...Fr,...zr,...Xr,...rn,...on,...ln,...mn};function Gn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Vn=Gn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Kn=Gn("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Er((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Wn={utf8:Vn,"utf-8":Vn,hex:$n.base16,latin1:Kn,ascii:Kn,binary:Kn,...$n};function Qn(e,t="utf8"){const r=Wn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Zn(e,t="utf8"){const r=Wn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):wr(globalThis.Buffer.from(e,"utf-8"))}function Jn(e){return Ce(Qn(Zn(e,pr),gr))}function Yn(e){return Qn(Zn(Be(e),gr),pr)}function Xn(e){const t="z"+Qn(Ar([Zn("K36",br),e]),br);return[yr,vr,t].join(":")}function ei(e){return Qn(e,pr)}function ti(e){const t=e.split(fr),r=Jn(t[0]),n=Jn(t[1]),i=function(e){return Zn(e,pr)}(t[2]);return{header:r,payload:n,signature:i,data:Zn(t.slice(0,2).join(fr),mr)}}function ri(e=Ue(32)){const t=dr.getPublicKey(e);return{secretKey:Ar([e,t]),publicKey:t}}function ni(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function ii(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=ni(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}const si=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var l=0,d=s-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*h+1>>>0,u=new Uint8Array(o);i!==s;){for(var l=t[i],d=0,f=o-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*u[f]>>>0,u[f]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}},oi=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class ai{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ci{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return hi(this,e)}}class ui{constructor(e){this.decoders=e}or(e){return hi(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hi=(e,t)=>new ui({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class li{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ai(e,t,r),this.decoder=new ci(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const di=({name:e,prefix:t,encode:r,decode:n})=>new li(e,t,r,n),fi=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=si(r,t);return di({prefix:e,name:t,encode:n,decode:e=>oi(i(e))})},pi=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>di({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),gi=di({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),mi=pi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yi=pi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),vi=fi({prefix:"9",name:"base10",alphabet:"0123456789"}),bi=pi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wi=pi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ei=pi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ai=pi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ii=pi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xi=pi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_i=pi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Si=pi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Pi=pi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oi=pi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ki=pi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ti=fi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ci=fi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Bi=fi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ri=fi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ni=pi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mi=pi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Li=pi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ji=pi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Di=Array.from(""),Ui=Di.reduce(((e,t,r)=>(e[r]=t,e)),[]),Fi=Di.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),qi=di({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Ui[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Fi[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Hi=128,zi=-128,$i=Math.pow(2,31),Gi=Math.pow(2,7),Vi=Math.pow(2,14),Ki=Math.pow(2,21),Wi=Math.pow(2,28),Qi=Math.pow(2,35),Zi=Math.pow(2,42),Ji=Math.pow(2,49),Yi=Math.pow(2,56),Xi=Math.pow(2,63);const es=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=$i;)r[n++]=255&t|Hi,t/=128;for(;t&zi;)r[n++]=255&t|Hi,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},ts=function(e){return e<Gi?1:e<Vi?2:e<Ki?3:e<Wi?4:e<Qi?5:e<Zi?6:e<Ji?7:e<Yi?8:e<Xi?9:10},rs=(e,t,r=0)=>(es(e,t,r),t),ns=e=>ts(e),is=(e,t)=>{const r=t.byteLength,n=ns(e),i=n+ns(r),s=new Uint8Array(i+r);return rs(e,s,0),rs(r,s,n),s.set(t,i),new ss(e,r,t,s)};class ss{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const os=({name:e,code:t,encode:r})=>new as(e,t,r);class as{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?is(this.code,t):t.then((e=>is(this.code,e)))}throw Error("Unknown type, must be binary type")}}const cs=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),us=os({name:"sha2-256",code:18,encode:cs("SHA-256")}),hs=os({name:"sha2-512",code:19,encode:cs("SHA-512")}),ls=oi,ds={code:0,name:"identity",encode:ls,digest:e=>is(0,ls(e))},fs="raw",ps=85,gs=e=>oi(e),ms=e=>oi(e),ys=new TextEncoder,vs=new TextDecoder,bs="json",ws=512,Es=e=>ys.encode(JSON.stringify(e)),As=e=>JSON.parse(vs.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Is={...e,...t,...r,...n,...s,...o,...a,...c,...u,...h};function xs(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const _s=xs("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ss=xs("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=ni((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Ps={utf8:_s,"utf-8":_s,hex:Is.base16,latin1:Ss,ascii:Ss,binary:Ss,...Is};function Os(e,t="utf8"){const r=Ps[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function ks(e,t="utf8"){const r=Ps[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const Ts={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Cs=i(8287).hp;function Bs(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function Rs(e,t=[]){const r=[];return Object.keys(e).forEach((n=>{if(t.length&&!t.includes(n))return;const i=e[n];r.push(...i.accounts)})),r}function Ns(e,t){return e.includes(":")?[e]:t.chains||[]}var Ms=Object.defineProperty,Ls=Object.defineProperties,js=Object.getOwnPropertyDescriptors,Ds=Object.getOwnPropertySymbols,Us=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable,qs=(e,t,r)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Hs=(e,t)=>{for(var r in t||(t={}))Us.call(t,r)&&qs(e,r,t[r]);if(Ds)for(var r of Ds(t))Fs.call(t,r)&&qs(e,r,t[r]);return e};const zs="react-native",$s="browser",Gs="js";function Vs(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ks(){return!(0,R.getDocument)()&&!!(0,R.getNavigator)()&&"ReactNative"===navigator.product}function Ws(){return!Vs()&&!!(0,R.getNavigator)()&&!!(0,R.getDocument)()}function Qs(){return Ks()?zs:Vs()?"node":Ws()?$s:"unknown"}function Zs(){var e;try{return Ks()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Application)<"u"?null==(e=i.g.Application)?void 0:e.applicationId:void 0}catch{return}}function Js(){return(0,N.g)()||{name:"",description:"",url:"",icons:[""]}}function Ys(e,t,r){const n=function(){if(Qs()===zs&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"){const{OS:e,Version:t}=i.g.Platform;return[e,t].join("-")}const e=t?C(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new P:"undefined"!=typeof navigator?C(navigator.userAgent):"undefined"!=typeof process&&process.version?new x(process.version.slice(1)):null;var t;if(null===e)return"unknown";const r=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[r,e.name,e.version].join("-"):[r,e.version].join("-")}(),s=function(){var e;const t=Qs();return t===$s?[t,(null==(e=(0,R.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Gs,r].join("-"),n,s].join("/")}function Xs(e,t){return e.filter((e=>t.includes(e))).length===e.length}function eo(e){return Object.fromEntries(e.entries())}function to(e){return new Map(Object.entries(e))}function ro(e=B.FIVE_MINUTES,t){const r=(0,B.toMiliseconds)(e||B.FIVE_MINUTES);let n,i,s,o;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e),o=Promise.resolve(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function no(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(s)}))}function io(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function so(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function oo(e,t){return(0,B.fromMiliseconds)((t||Date.now())+(0,B.toMiliseconds)(e))}function ao(e){return Date.now()>=(0,B.toMiliseconds)(e)}function co(e,t){return`${e}${t?`:${t}`:""}`}function uo(e=[],t=[]){return[...new Set([...e,...t])]}function ho(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function lo(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function fo(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function po(e){return Cs.from(e,"base64").toString("utf-8")}function go(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function mo(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function yo(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");go(e.outputLen),go(e.blockLen)}function vo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bo(e,t){mo(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const wo=BigInt(2**32-1),Eo=BigInt(32);function Ao(e,t=!1){return t?{h:Number(e&wo),l:Number(e>>Eo&wo)}:{h:0|Number(e>>Eo&wo),l:0|Number(e&wo)}}const Io="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function xo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _o(e,t){return e<<32-t|e>>>t}const So=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Po(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Oo(e){for(let t=0;t<e.length;t++)e[t]=Po(e[t])}function ko(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),mo(e),e}class To{clone(){return this._cloneInto()}}function Co(e){const t=t=>e().update(ko(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Bo(e=32){if(Io&&"function"==typeof Io.getRandomValues)return Io.getRandomValues(new Uint8Array(e));if(Io&&"function"==typeof Io.randomBytes)return Io.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Ro=[],No=[],Mo=[],Lo=BigInt(0),jo=BigInt(1),Do=BigInt(2),Uo=BigInt(7),Fo=BigInt(256),qo=BigInt(113);for(let e=0,t=jo,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Ro.push(2*(5*n+r)),No.push((e+1)*(e+2)/2%64);let i=Lo;for(let e=0;e<7;e++)t=(t<<jo^(t>>Uo)*qo)%Fo,t&Do&&(i^=jo<<(jo<<BigInt(e))-jo);Mo.push(i)}const[Ho,zo]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Ao(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}(Mo,!0),$o=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Go=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class Vo extends To{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,go(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){So||Oo(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=$o(s,o,1)^r[n],c=Go(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=No[r],s=$o(t,i,n),o=Go(t,i,n),a=Ro[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=Ho[n],e[1]^=zo[n]}r.fill(0)}(this.state32,this.rounds),So||Oo(this.state32),this.posOut=0,this.pos=0}update(e){vo(this);const{blockLen:t,state:r}=this,n=(e=ko(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,!!(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){vo(this,!1),mo(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return go(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bo(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new Vo(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Ko=Co((()=>new Vo(136,1,32)));function Wo(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Cs.from(Ko(r)).toString("hex")}var Qo=Object.defineProperty,Zo=Object.defineProperties,Jo=Object.getOwnPropertyDescriptors,Yo=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,ta=(e,t,r)=>t in e?Qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ra=e=>e?.split(":"),na=e=>{const t=e&&ra(e);if(t)return t[2]+":"+t[3]},ia=e=>{const t=e&&ra(e);if(t)return t.pop()};async function sa(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=oa(i,i.iss),o=ia(i.iss);return await async function(e,t,r,n,i,s){switch(r.t){case"eip191":return await async function(e,t,r){return(await ke({hash:Wo(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,n,i,s){const o=Bs(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=o+Wo(t).substring(2)+a+c+u,l=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:d}=await l.json();return!!d&&d.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}(o,s,n,na(i.iss),r)}const oa=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=ia(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&ra(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,h=e.exp?`Expiration Time: ${e.exp}`:void 0,l=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=pa(e.resources);return p&&(i=function(e="",t){aa(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));n.push(o.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${n.join(" ")}`}(i,ha(p))),[r,n,"",i,"",s,o,a,c,u,h,l,d,f].filter((e=>null!=e)).join("\n")};function aa(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function ca(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function ua(e){return aa(e),`urn:recap:${function(e){return Cs.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function ha(e){const t=function(e){return JSON.parse(Cs.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return aa(t),t}function la(e,t){const r=function(e,t){aa(e),aa(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var s,o;n.att[r]=((e,t)=>Zo(e,Jo(t)))(((e,t)=>{for(var r in t||(t={}))Xo.call(t,r)&&ta(e,r,t[r]);if(Yo)for(var r of Yo(t))ea.call(t,r)&&ta(e,r,t[r]);return e})({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(o=t.att[r])?void 0:o[i])})}))})),n}(ha(e),ha(t));return ua(r)}function da(e){var t;const r=ha(e);aa(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function fa(e){const t=ha(e);aa(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function pa(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function ga(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ma(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ya(e,...t){if(!ma(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function va(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ba(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const wa=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Ea(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!ma(e))throw new Error("Uint8Array expected, got "+typeof e);e=xa(e)}return e}function Aa(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Ia(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}function xa(e){return Uint8Array.from(e)}function _a(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Sa=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Pa=Sa("expand 16-byte k"),Oa=Sa("expand 32-byte k"),ka=wa(Pa),Ta=wa(Oa);function Ca(e,t){return e<<t|e>>>32-t}function Ba(e){return e.byteOffset%4==0}const Ra=2**32-1,Na=new Uint32Array,Ma=(e,t)=>255&e[t++]|(255&e[t++])<<8;class La{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,ya(e=Ea(e),32);const t=Ma(e,0),r=Ma(e,2),n=Ma(e,4),i=Ma(e,6),s=Ma(e,8),o=Ma(e,10),a=Ma(e,12),c=Ma(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=Ma(e,16+2*t)}process(e,t,r=!1){const n=r?0:2048,{h:i,r:s}=this,o=s[0],a=s[1],c=s[2],u=s[3],h=s[4],l=s[5],d=s[6],f=s[7],p=s[8],g=s[9],m=Ma(e,t+0),y=Ma(e,t+2),v=Ma(e,t+4),b=Ma(e,t+6),w=Ma(e,t+8),E=Ma(e,t+10),A=Ma(e,t+12),I=Ma(e,t+14);let x=i[0]+(8191&m),_=i[1]+(8191&(m>>>13|y<<3)),S=i[2]+(8191&(y>>>10|v<<6)),P=i[3]+(8191&(v>>>7|b<<9)),O=i[4]+(8191&(b>>>4|w<<12)),k=i[5]+(w>>>1&8191),T=i[6]+(8191&(w>>>14|E<<2)),C=i[7]+(8191&(E>>>11|A<<5)),B=i[8]+(8191&(A>>>8|I<<8)),R=i[9]+(I>>>5|n),N=0,M=N+x*o+_*(5*g)+S*(5*p)+P*(5*f)+O*(5*d);N=M>>>13,M&=8191,M+=k*(5*l)+T*(5*h)+C*(5*u)+B*(5*c)+R*(5*a),N+=M>>>13,M&=8191;let L=N+x*a+_*o+S*(5*g)+P*(5*p)+O*(5*f);N=L>>>13,L&=8191,L+=k*(5*d)+T*(5*l)+C*(5*h)+B*(5*u)+R*(5*c),N+=L>>>13,L&=8191;let j=N+x*c+_*a+S*o+P*(5*g)+O*(5*p);N=j>>>13,j&=8191,j+=k*(5*f)+T*(5*d)+C*(5*l)+B*(5*h)+R*(5*u),N+=j>>>13,j&=8191;let D=N+x*u+_*c+S*a+P*o+O*(5*g);N=D>>>13,D&=8191,D+=k*(5*p)+T*(5*f)+C*(5*d)+B*(5*l)+R*(5*h),N+=D>>>13,D&=8191;let U=N+x*h+_*u+S*c+P*a+O*o;N=U>>>13,U&=8191,U+=k*(5*g)+T*(5*p)+C*(5*f)+B*(5*d)+R*(5*l),N+=U>>>13,U&=8191;let F=N+x*l+_*h+S*u+P*c+O*a;N=F>>>13,F&=8191,F+=k*o+T*(5*g)+C*(5*p)+B*(5*f)+R*(5*d),N+=F>>>13,F&=8191;let q=N+x*d+_*l+S*h+P*u+O*c;N=q>>>13,q&=8191,q+=k*a+T*o+C*(5*g)+B*(5*p)+R*(5*f),N+=q>>>13,q&=8191;let H=N+x*f+_*d+S*l+P*h+O*u;N=H>>>13,H&=8191,H+=k*c+T*a+C*o+B*(5*g)+R*(5*p),N+=H>>>13,H&=8191;let z=N+x*p+_*f+S*d+P*l+O*h;N=z>>>13,z&=8191,z+=k*u+T*c+C*a+B*o+R*(5*g),N+=z>>>13,z&=8191;let $=N+x*g+_*p+S*f+P*d+O*l;N=$>>>13,$&=8191,$+=k*h+T*u+C*c+B*a+R*o,N+=$>>>13,$&=8191,N=(N<<2)+N|0,N=N+M|0,M=8191&N,N>>>=13,L+=N,i[0]=M,i[1]=L,i[2]=j,i[3]=D,i[4]=U,i[5]=F,i[6]=q,i[7]=H,i[8]=z,i[9]=$}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;_a(r)}update(e){va(this);const{buffer:t,blockLen:r}=this,n=(e=Ea(e)).length;for(let i=0;i<n;){const s=Math.min(r-this.pos,n-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){_a(this.h,this.r,this.buffer,this.pad)}digestInto(e){va(this),function(e,t){ya(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const ja=function(e){const t=(t,r)=>e(r).update(Ea(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new La(e))),Da=function(e){const{allowShortKeys:t,extendNonceFn:r,counterLength:n,counterRight:i,rounds:s}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return ga(n),ga(s),ba(i),ba(t),(o,a,c,u,h=0)=>{ya(o),ya(a),ya(c);const l=c.length;if(void 0===u&&(u=new Uint8Array(l)),ya(u),ga(h),h<0||h>=Ra)throw new Error("arx: counter overflow");if(u.length<l)throw new Error(`arx: output (${u.length}) is shorter than data (${l})`);const d=[];let f,p,g=o.length;if(32===g)d.push(f=xa(o)),p=Ta;else{if(16!==g||!t)throw new Error(`arx: invalid 32-byte key, got length=${g}`);f=new Uint8Array(32),f.set(o),f.set(o,16),p=ka,d.push(f)}Ba(a)||d.push(a=xa(a));const m=wa(f);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,m,wa(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-n;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),a=e,d.push(a)}const v=wa(a);return function(e,t,r,n,i,s,o,a){const c=i.length,u=new Uint8Array(64),h=wa(u),l=Ba(i)&&Ba(s),d=l?wa(i):Na,f=l?wa(s):Na;for(let p=0;p<c;o++){if(e(t,r,n,h,o,a),o>=Ra)throw new Error("arx: counter overflow");const g=Math.min(64,c-p);if(l&&64===g){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,f[t]=d[t]^h[r];p+=64}else{for(let e,t=0;t<g;t++)e=p+t,s[e]=i[e]^u[t];p+=g}}}(e,p,m,v,c,u,h,s),_a(...d),u}}((function(e,t,r,n,i,s=20){let o=e[0],a=e[1],c=e[2],u=e[3],h=t[0],l=t[1],d=t[2],f=t[3],p=t[4],g=t[5],m=t[6],y=t[7],v=i,b=r[0],w=r[1],E=r[2],A=o,I=a,x=c,_=u,S=h,P=l,O=d,k=f,T=p,C=g,B=m,R=y,N=v,M=b,L=w,j=E;for(let e=0;e<s;e+=2)A=A+S|0,N=Ca(N^A,16),T=T+N|0,S=Ca(S^T,12),A=A+S|0,N=Ca(N^A,8),T=T+N|0,S=Ca(S^T,7),I=I+P|0,M=Ca(M^I,16),C=C+M|0,P=Ca(P^C,12),I=I+P|0,M=Ca(M^I,8),C=C+M|0,P=Ca(P^C,7),x=x+O|0,L=Ca(L^x,16),B=B+L|0,O=Ca(O^B,12),x=x+O|0,L=Ca(L^x,8),B=B+L|0,O=Ca(O^B,7),_=_+k|0,j=Ca(j^_,16),R=R+j|0,k=Ca(k^R,12),_=_+k|0,j=Ca(j^_,8),R=R+j|0,k=Ca(k^R,7),A=A+P|0,j=Ca(j^A,16),B=B+j|0,P=Ca(P^B,12),A=A+P|0,j=Ca(j^A,8),B=B+j|0,P=Ca(P^B,7),I=I+O|0,N=Ca(N^I,16),R=R+N|0,O=Ca(O^R,12),I=I+O|0,N=Ca(N^I,8),R=R+N|0,O=Ca(O^R,7),x=x+k|0,M=Ca(M^x,16),T=T+M|0,k=Ca(k^T,12),x=x+k|0,M=Ca(M^x,8),T=T+M|0,k=Ca(k^T,7),_=_+S|0,L=Ca(L^_,16),C=C+L|0,S=Ca(S^C,12),_=_+S|0,L=Ca(L^_,8),C=C+L|0,S=Ca(S^C,7);let D=0;n[D++]=o+A|0,n[D++]=a+I|0,n[D++]=c+x|0,n[D++]=u+_|0,n[D++]=h+S|0,n[D++]=l+P|0,n[D++]=d+O|0,n[D++]=f+k|0,n[D++]=p+T|0,n[D++]=g+C|0,n[D++]=m+B|0,n[D++]=y+R|0,n[D++]=v+N|0,n[D++]=b+M|0,n[D++]=w+L|0,n[D++]=E+j|0})),Ua=new Uint8Array(16),Fa=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(Ua.subarray(r))},qa=new Uint8Array(32);function Ha(e,t,r,n,i){const s=e(t,r,qa),o=ja.create(s);i&&Fa(o,i),Fa(o,n);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);Ia(c,0,BigInt(i?i.length:0),!0),Ia(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return _a(s,a),u}const za=((e,t)=>{function r(r,...n){if(ya(r),void 0!==e.nonceLength){const t=n[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?ya(t):ya(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==n[1]&&ya(n[1]);const s=t(r,...n),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");ya(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,ya(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(ya(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,t),s.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},($a=Da,(e,t,r)=>({encrypt(n,i){const s=n.length;(i=Aa(s+16,i,!1)).set(n);const o=i.subarray(0,-16);$a(e,t,o,o,1);const a=Ha($a,e,t,o,r);return i.set(a,s),_a(a),i},decrypt(n,i){i=Aa(n.length-16,i,!1);const s=n.subarray(0,-16),o=n.subarray(-16),a=Ha($a,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(o,a))throw new Error("invalid tag");return i.set(n.subarray(0,-16)),$a(e,t,i,i,1),_a(a),i}})));var $a;class Ga extends To{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,yo(e);const r=ko(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return vo(this),this.iHash.update(e),this}digestInto(e){vo(this),mo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Va=(e,t,r)=>new Ga(e,t).update(r).digest();Va.create=(e,t)=>new Ga(e,t);const Ka=new Uint8Array([0]),Wa=new Uint8Array;function Qa(e,t,r){return e&t^~e&r}function Za(e,t,r){return e&t^e&r^t&r}class Ja extends To{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xo(this.buffer)}update(e){vo(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=ko(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=xo(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){vo(this),bo(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=xo(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Ya=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ec=new Uint32Array(64);class tc extends Ja{constructor(){super(64,32,8,!1),this.A=0|Xa[0],this.B=0|Xa[1],this.C=0|Xa[2],this.D=0|Xa[3],this.E=0|Xa[4],this.F=0|Xa[5],this.G=0|Xa[6],this.H=0|Xa[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)ec[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=ec[e-15],r=ec[e-2],n=_o(t,7)^_o(t,18)^t>>>3,i=_o(r,17)^_o(r,19)^r>>>10;ec[e]=i+ec[e-7]+n+ec[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(_o(o,6)^_o(o,11)^_o(o,25))+Qa(o,a,c)+Ya[e]+ec[e]|0,h=(_o(r,2)^_o(r,13)^_o(r,22))+Za(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){ec.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const rc=Co((()=>new tc)),nc=BigInt(0),ic=BigInt(1),sc=BigInt(2);function oc(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ac(e){if(!oc(e))throw new Error("Uint8Array expected")}function cc(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const uc=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function hc(e){ac(e);let t="";for(let r=0;r<e.length;r++)t+=uc[e[r]];return t}function lc(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function dc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?nc:BigInt("0x"+e)}function fc(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function pc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=fc(e.charCodeAt(i)),s=fc(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function gc(e){return dc(hc(e))}function mc(e){return ac(e),dc(hc(Uint8Array.from(e).reverse()))}function yc(e,t){return pc(e.toString(16).padStart(2*t,"0"))}function vc(e,t){return yc(e,t).reverse()}function bc(e,t,r){let n;if("string"==typeof t)try{n=pc(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!oc(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function wc(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];ac(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Ec=e=>"bigint"==typeof e&&nc<=e;function Ac(e,t,r){return Ec(e)&&Ec(t)&&Ec(r)&&t<=e&&e<r}function Ic(e,t,r,n){if(!Ac(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function xc(e){let t;for(t=0;e>nc;e>>=ic,t+=1);return t}const _c=e=>(sc<<BigInt(e-1))-ic,Sc=e=>new Uint8Array(e),Pc=e=>Uint8Array.from(e);function Oc(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Sc(e),i=Sc(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=Sc())=>{i=a(Pc([0]),e),n=a(),0!==e.length&&(i=a(Pc([1]),e),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return wc(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(u()));)c();return o(),r}}const kc={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||oc(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Tc(e,t,r={}){const n=(t,r,n)=>{const i=kc[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function Cc(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}var Bc=Object.freeze({__proto__:null,isBytes:oc,abytes:ac,abool:cc,bytesToHex:hc,numberToHexUnpadded:lc,hexToNumber:dc,hexToBytes:pc,bytesToNumberBE:gc,bytesToNumberLE:mc,numberToBytesBE:yc,numberToBytesLE:vc,numberToVarBytesBE:function(e){return pc(lc(e))},ensureBytes:bc,concatBytes:wc,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},inRange:Ac,aInRange:Ic,bitLen:xc,bitGet:function(e,t){return e>>BigInt(t)&ic},bitSet:function(e,t,r){return e|(r?ic:nc)<<BigInt(t)},bitMask:_c,createHmacDrbg:Oc,validateObject:Tc,notImplemented:()=>{throw new Error("not implemented")},memoized:Cc});const Rc=BigInt(0),Nc=BigInt(1),Mc=BigInt(2),Lc=BigInt(3),jc=BigInt(4),Dc=BigInt(5),Uc=BigInt(8);function Fc(e,t){const r=e%t;return r>=Rc?r:t+r}function qc(e,t,r){if(t<Rc)throw new Error("invalid exponent, negatives unsupported");if(r<=Rc)throw new Error("invalid modulus");if(r===Nc)return Rc;let n=Nc;for(;t>Rc;)t&Nc&&(n=n*e%r),e=e*e%r,t>>=Nc;return n}function Hc(e,t,r){let n=e;for(;t-- >Rc;)n*=n,n%=r;return n}function zc(e,t){if(e===Rc)throw new Error("invert: expected non-zero number");if(t<=Rc)throw new Error("invert: expected positive modulus, got "+t);let r=Fc(e,t),n=t,i=Rc,s=Nc;for(;r!==Rc;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==Nc)throw new Error("invert: does not exist");return Fc(i,t)}const $c=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Gc(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Vc(e,t,r=!1,n={}){if(e<=Rc)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Gc(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:_c(i),ZERO:Rc,ONE:Nc,create:t=>Fc(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return Rc<=t&&t<e},is0:e=>e===Rc,isOdd:e=>(e&Nc)===Nc,neg:t=>Fc(-t,e),eql:(e,t)=>e===t,sqr:t=>Fc(t*t,e),add:(t,r)=>Fc(t+r,e),sub:(t,r)=>Fc(t-r,e),mul:(t,r)=>Fc(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Rc)throw new Error("invalid exponent, negatives unsupported");if(r===Rc)return e.ONE;if(r===Nc)return t;let n=e.ONE,i=t;for(;r>Rc;)r&Nc&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Nc;return n}(a,e,t),div:(t,r)=>Fc(t*zc(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>zc(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%jc===Lc){const t=(e+Nc)/jc;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Uc===Dc){const t=(e-Dc)/Uc;return function(e,r){const n=e.mul(r,Mc),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,Mc),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Nc)/Mc;let r,n,i;for(r=e-Nc,n=0;r%Mc===Rc;r/=Mc,n++);for(i=Mc;i<e&&qc(i,t,e)!==e-Nc;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+Nc)/jc;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+Nc)/Mc;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),h=e.pow(o,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Nc<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?vc(e,s):yc(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?mc(e):gc(e)}});return Object.freeze(a)}function Kc(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Wc(e){const t=Kc(e);return t+Math.ceil(t/2)}const Qc=BigInt(0),Zc=BigInt(1);function Jc(e,t){const r=t.negate();return e?r:t}function Yc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Xc(e,t){return Yc(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const eu=new WeakMap,tu=new WeakMap;function ru(e){return tu.get(e)||1}function nu(e){return function(e){Tc(e,$c.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),Tc(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const iu=BigInt(0),su=BigInt(1),ou=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const au=BigInt(1),cu=BigInt(2),uu=BigInt(3),hu=BigInt(5);BigInt(8);const lu=function(e){const t=function(e){return Tc(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:r}=t,n=e=>Fc(e,r),i=t.montgomeryBits,s=Math.ceil(i/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>qc(e,r-BigInt(2),r));function u(e,t,r){const i=n(e*(t-r));return[t=n(t-i),r=n(r+i)]}const h=(t.a-BigInt(2))/BigInt(4);function l(e){return vc(n(e),s)}function d(e,t){const d=function(e){const t=bc("u coordinate",e,s);return 32===o&&(t[31]&=127),mc(t)}(t),f=function(e){const t=bc("scalar",e),r=t.length;if(r!==s&&r!==o)throw new Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return mc(a(t))}(e),p=function(e,t){Ic("u",e,iu,r),Ic("scalar",t,iu,r);const s=t,o=e;let a,l=su,d=iu,f=e,p=su,g=iu;for(let e=BigInt(i-1);e>=iu;e--){const t=s>>e&su;g^=t,a=u(g,l,f),l=a[0],f=a[1],a=u(g,d,p),d=a[0],p=a[1],g=t;const r=l+d,i=n(r*r),c=l-d,m=n(c*c),y=i-m,v=f+p,b=n((f-p)*r),w=n(v*c),E=b+w,A=b-w;f=n(E*E),p=n(o*n(A*A)),l=n(i*m),d=n(y*(i+n(h*y)))}a=u(g,l,f),l=a[0],f=a[1],a=u(g,d,p),d=a[0],p=a[1];const m=c(d);return n(l*m)}(d,f);if(p===iu)throw new Error("invalid private or public key received");return l(p)}const f=l(t.Gu);function p(e){return d(e,f)}return{scalarMult:d,scalarMultBase:p,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}}({P:ou,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=ou,{pow_p_5_8:r,b2:n}=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=ou,o=e*e%s*e%s,a=Hc(o,cu,s)*o%s,c=Hc(a,au,s)*e%s,u=Hc(c,hu,s)*c%s,h=Hc(u,t,s)*u%s,l=Hc(h,r,s)*h%s,d=Hc(l,n,s)*l%s,f=Hc(d,i,s)*d%s,p=Hc(f,i,s)*d%s,g=Hc(p,t,s)*u%s;return{pow_p_5_8:Hc(g,cu,s)*e%s,b2:o}}(e);return Fc(Hc(r,uu,t)*n,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:Bo});function du(e){void 0!==e.lowS&&cc("lowS",e.lowS),void 0!==e.prehash&&cc("prehash",e.prehash)}const{bytesToNumberBE:fu,hexToBytes:pu}=Bc;class gu extends Error{constructor(e=""){super(e)}}const mu={Err:gu,_tlv:{encode:(e,t)=>{const{Err:r}=mu;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=lc(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?lc(i.length/2|128):"";return lc(e)+s+i+t},decode(e,t){const{Err:r}=mu;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){const{Err:t}=mu;if(e<yu)throw new t("integer: negative integers are not allowed");let r=lc(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=mu;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return fu(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=mu,i="string"==typeof e?pu(e):e;ac(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:u,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=mu,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},yu=BigInt(0),vu=BigInt(1);BigInt(2);const bu=BigInt(3);function wu(e){const t=function(e){const t=nu(e);Tc(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=Vc(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return wc(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(oc(e)&&(e=hc(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:gc(bc("private key",e,n))}catch{throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=Fc(o,s)),Ic("private key",o,vu,s),o}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const u=Cc(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),h=Cc((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(s(bc("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=xc(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(l,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(s,i)),h=r.eql(r.mul(n,a),r.mul(o,i));return u&&h}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,bu),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,h=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),h=r.mul(s,a),h=r.add(h,h),c=r.mul(e,h),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(g,c),h=r.mul(i,h),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,g),u=r.add(u,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(c,u,h)}add(e){c(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let h=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,g=r.mul(t.b,bu);let m=r.mul(n,o),y=r.mul(i,a),v=r.mul(s,u),b=r.add(n,i),w=r.add(o,a);b=r.mul(b,w),w=r.add(m,y),b=r.sub(b,w),w=r.add(n,s);let E=r.add(o,u);return w=r.mul(w,E),E=r.add(m,v),w=r.sub(w,E),E=r.add(i,s),h=r.add(a,u),E=r.mul(E,h),h=r.add(y,v),E=r.sub(E,h),f=r.mul(p,w),h=r.mul(g,v),f=r.add(h,f),h=r.sub(y,f),f=r.add(y,f),d=r.mul(h,f),y=r.add(m,m),y=r.add(y,m),v=r.mul(p,v),w=r.mul(g,w),y=r.add(y,v),v=r.sub(m,v),v=r.mul(p,v),w=r.add(w,v),m=r.mul(y,w),d=r.add(d,m),m=r.mul(E,w),h=r.mul(b,h),h=r.sub(h,m),m=r.mul(b,y),f=r.mul(E,f),f=r.add(f,m),new l(h,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;Ic("scalar",e,yu,i);const s=l.ZERO;if(e===yu)return s;if(this.is0()||e===vu)return this;if(!n||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=n.splitScalar(e),h=s,d=s,p=this;for(;a>yu||u>yu;)a&vu&&(h=h.add(p)),u&vu&&(d=d.add(p)),p=p.double(),a>>=vu,u>>=vu;return o&&(h=h.negate()),c&&(d=d.negate()),d=new l(r.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if(Ic("scalar",e,vu,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:h}=this.wNAF(i),{p:d,f:p}=this.wNAF(c);u=f.constTimeNegate(t,u),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,n.beta),d.py,d.pz),s=u.add(d),o=h.add(p)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return l.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==yu&&t!==vu&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===vu)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===vu?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return cc("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return cc("isCompressed",e),hc(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=function(e,t){return{constTimeNegate:Jc,hasPrecomputes:e=>1!==ru(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Qc;)r&Zc&&(n=n.add(i)),i=i.double(),r>>=Zc;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Xc(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Xc(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&u);i>>=l,r>o&&(r-=h,i+=Zc);const s=t,d=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(Jc(f,n[s])):a=a.add(Jc(p,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Xc(r,t),c=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===Qc)break;let r=Number(i&c);if(i>>=h,r>a&&(r-=u,i+=Zc),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=eu.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&eu.set(t,r(n))),n},wNAFCached(e,t,r){const n=ru(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=ru(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Yc(r,t),tu.set(e,r),eu.delete(e)}}}(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return Ac(e,vu,t.n)}}}function Eu(e){const t=function(e){const t=nu(e);return Tc(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return Fc(e,n)}function a(e){return zc(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:l}=wu({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=wc;return cc("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=gc(o);if(!Ac(e,vu,r.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&vu)===vu)&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>hc(yc(e,t.nByteLength));function f(e){return e>n>>vu}const p=(e,t,r)=>gc(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=bc("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=mu.toSig(bc("DER",e));return new g(t,r)}assertValidity(){Ic("r",this.r,vu,n),Ic("s",this.s,vu,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,u=b(bc("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const h=2===s||3===s?n+t.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&s?"03":"02",f=c.fromHex(l+d(h)),p=a(h),g=o(-u*p),m=o(i*p),y=c.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return pc(this.toDERHex())}toDERHex(){return mu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pc(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Wc(t.n);return function(e,t,r=!1){const n=e.length,i=Kc(t),s=Wc(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=Fc(r?mc(e):gc(e),t-Nc)+Nc;return r?vc(o,i):yc(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=oc(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}const v=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=gc(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return o(v(e))},w=_c(t.nBitLength);function E(e){return Ic("num < 2^"+t.nBitLength,e,yu,w),yc(e,t.nByteLength)}const A={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,n,i=A){const{seed:s,k2sig:h}=function(e,n,i=A){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:h}=t;let{lowS:d,prehash:p,extraEntropy:m}=i;null==d&&(d=!0),e=bc("msgHash",e),du(i),p&&(e=bc("prehashed msgHash",s(e)));const y=b(e),w=u(n),I=[E(w),E(y)];if(null!=m&&!1!==m){const e=!0===m?h(r.BYTES):m;I.push(bc("extraEntropy",e))}const x=wc(...I),_=y;return{seed:x,k2sig:function(e){const t=v(e);if(!l(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===yu)return;const s=o(r*o(_+i*w));if(s===yu)return;let u=(n.x===i?0:2)|Number(n.y&vu),h=s;return d&&f(s)&&(h=function(e){return f(e)?o(-e):e}(s),u^=1),new g(i,h,u)}}}(e,n,i),d=t;return Oc(d.hash.outputLen,d.nByteLength,d.hmac)(s,h)},verify:function(e,r,n,i=I){const s=e;r=bc("msgHash",r),n=bc("publicKey",n);const{lowS:u,prehash:h,format:l}=i;if(du(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const d="string"==typeof s||oc(s),f=!d&&!l&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!d&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,m;try{if(f&&(p=new g(s.r,s.s)),d){try{"compact"!==l&&(p=g.fromDER(s))}catch(e){if(!(e instanceof mu.Err))throw e}!p&&"der"!==l&&(p=g.fromCompact(s))}m=c.fromHex(n)}catch{return!1}if(!p||u&&p.hasHighS())return!1;h&&(r=t.hash(r));const{r:y,s:v}=p,w=b(r),E=a(v),A=o(w*E),x=o(y*E),_=c.BASE.multiplyAndAddUnsafe(m,A,x)?.toAffine();return!!_&&o(_.x)===y},ProjectivePoint:c,Signature:g,utils:m}}function Au(e){return{hash:e,hmac:(t,...r)=>Va(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];mo(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:Bo}}BigInt(4);const Iu=Vc(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),xu=function(e,t){const r=t=>Eu({...e,...Au(t)});return{...r(t),create:r}}({a:Iu.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:Iu,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},rc),_u="base10",Su="base16",Pu="base64pad",Ou="base64url",ku="utf8";function Tu(){return ks(Bo(32),Su)}function Cu(e){return ks(rc(Os(e,Su)),Su)}function Bu(e){return ks(rc(Os(e,ku)),Su)}function Ru(e){return Os(`${e}`,_u)}function Nu(e){return Number(ks(e,_u))}function Mu(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Lu(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function ju(e){if(2===Nu(e.type))return ks(ii([e.type,e.sealed]),Pu);if(1===Nu(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ks(ii([e.type,e.senderPublicKey,e.iv,e.sealed]),Pu)}return ks(ii([e.type,e.iv,e.sealed]),Pu)}function Du(e){const t=Os((e.encoding||Pu)===Ou?Lu(e.encoded):e.encoded,Pu),r=t.slice(0,1);if(1===Nu(r)){const e=33,n=e+12,i=t.slice(1,e),s=t.slice(e,n);return{type:r,sealed:t.slice(n),iv:s,senderPublicKey:i}}if(2===Nu(r))return{type:r,sealed:t.slice(1),iv:Bo(12)};const n=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:n}}function Uu(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Fu(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function qu(e){return 2===e.type}function Hu(e){return e?.relay||{protocol:"irn"}}function zu(e){const t=Ts[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function $u(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function Gu(e){if(!e.includes("wc:")){const t=po(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:Vu(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:$u(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Vu(e){return e.startsWith("//")?e.substring(2):e}function Ku(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i=n,s="relay"+t+i;e[i]&&(r[s]=e[i])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function Wu(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function Qu(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function Zu(e){return e.includes(":")}function Ju(e){return Zu(e)?e.split(":")[0]:e}function Yu(e,t){const r=function(e){const t={};return e?.forEach((e=>{var r;const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)})),t}(t=t.map((e=>e.replace("did:pkh:",""))));for(const[t,n]of Object.entries(r))n.methods?n.methods=uo(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Xu={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},eh={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function th(e,t){const{message:r,code:n}=eh[e];return{message:t?`${r} ${t}`:r,code:n}}function rh(e,t){const{message:r,code:n}=Xu[e];return{message:t?`${r} ${t}`:r,code:n}}function nh(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function ih(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function sh(e){return typeof e>"u"}function oh(e,t){return!(!t||!sh(e))||"string"==typeof e&&!!e.trim().length}function ah(e,t){return!(!t||!sh(e))||"number"==typeof e&&!isNaN(e)}function ch(e){return!(!oh(e,!1)||!e.includes(":"))&&2===e.split(":").length}function uh(e){let t=!0;return nh(e)?e.length&&(t=e.every((e=>oh(e,!1)))):t=!1,t}function hh(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return uh(e?.methods)?uh(e?.events)||(r=rh("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=rh("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function lh(e,t){let r=null;if(e&&ih(e)){const n=hh(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return nh(e)?e.forEach((e=>{r||function(e){if(oh(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&ch(e)}}return!1}(e)||(r=rh("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=rh("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=th("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function dh(e){return oh(e.protocol,!0)}function fh(e){return typeof e<"u"&&null!==typeof e}function ph(e,t){return!(!ch(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Qu(e.accounts))})),t}(e).includes(t))}function gh(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=Qu(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=mh(Object.keys(e)),u=mh(Object.keys(t)),h=c.filter((e=>!u.includes(e)));return h.length&&(n=th("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${h.toString()}\n      Received: ${Object.keys(t).toString()}`)),Xs(o,a)||(n=th("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=Qu(t[e].accounts);i.includes(e)||(n=th("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(Xs(i[e].methods,s[e].methods)?Xs(i[e].events,s[e].events)||(n=th("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=th("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function mh(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function yh(){const e=Qs();return new Promise((t=>{switch(e){case $s:t(Ws()&&navigator?.onLine);break;case zs:t(async function(){if(Ks()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo){const e=await(null==i.g?void 0:i.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const vh={};class bh{static get(e){return vh[e]}static set(e,t){vh[e]=t}static delete(e){delete vh[e]}}class wh{}class Eh extends wh{constructor(e){super()}}const Ah=B.FIVE_SECONDS,Ih="heartbeat_pulse";class xh extends Eh{constructor(e){super(e),this.events=new w.EventEmitter,this.interval=Ah,this.interval=e?.interval||Ah}static async init(e){const t=new xh(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,B.toMiliseconds)(this.interval))}pulse(){this.events.emit(Ih)}}const _h=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Sh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ph=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Oh(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function kh(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Ph.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(_h.test(e)||Sh.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Oh)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var Th=i(8287).hp;function Ch(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function Bh(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return Bh(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Rh="base64:";function Nh(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Mh(...e){return Nh(e.join(":"))}function Lh(e){return(e=Nh(e))?e+":":""}const jh=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function Dh(e={}){const t={mounts:{"":e.driver||jh()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=Nh(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=Nh(e?n:n.key),o=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=Nh(e);const{relativeKey:n,driver:i}=r(e);return Ch(i.hasItem,n,t)},getItem(e,t={}){e=Nh(e);const{relativeKey:n,driver:i}=r(e);return Ch(i.getItem,n,t).then((e=>kh(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?Ch(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:Mh(e.base,t.key),value:kh(t.value)}))))):Promise.all(e.items.map((t=>Ch(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:kh(e)})))))))),getItemRaw(e,t={}){e=Nh(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?Ch(i.getItemRaw,n,t):Ch(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(Rh)?(t=e.slice(7),globalThis.Buffer?Th.from(t,"base64"):Uint8Array.from(globalThis.atob(t),(e=>e.codePointAt(0)))):e;var t}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=Nh(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await Ch(o.setItem,s,Bh(t),n),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return Ch(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:Bh(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>Ch(e.driver.setItem,t.relativeKey,Bh(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=Nh(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await Ch(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await Ch(o.setItem,s,function(e){return"string"==typeof e?e:Rh+(t=e,globalThis.Buffer?Th.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t)));var t}(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=Nh(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await Ch(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await Ch(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=Nh(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await Ch(i.getMeta,n,t)),!t.nativeOnly){const e=await Ch(i.getItem,n+"$",t).then((e=>kh(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=Lh(e);const r=n(e,!0);let i=[];const s=[];let o=!0;for(const e of r){e.driver.flags?.maxDepth||(o=!1);const r=await Ch(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+Nh(t);i.some((e=>r.startsWith(e)))||s.push(r)}i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=Lh(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return Ch(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>Fh(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await Uh(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=Lh(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(Uh(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=Lh(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await Fh(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=Nh(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=Nh(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function Uh(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function Fh(e){"function"==typeof e.dispose&&await Ch(e.dispose)}function qh(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function Hh(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=qh(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let zh;function $h(){return zh||(zh=Hh("keyval-store","keyval")),zh}function Gh(e,t=$h()){return t("readonly",(t=>qh(t.get(e))))}var Vh=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=Hh(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await Gh(r(e),n)>"u"),getItem:async e=>await Gh(r(e),n)??null,setItem:(e,t)=>function(e,t,r=$h()){return r("readwrite",(r=>(r.put(t,e),qh(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=$h()){return t("readwrite",(t=>(t.delete(e),qh(t.transaction))))}(r(e),n),getKeys:()=>function(e=$h()){return e("readonly",(e=>{if(e.getAllKeys)return qh(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},qh(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=$h()){return e("readwrite",(e=>(e.clear(),qh(e.transaction))))}(n)}};class Kh{constructor(){this.indexedDb=Dh({driver:Vh({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,Be(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof i.g<"u"?i.g:typeof self<"u"?self:{},Qh={exports:{}};function Zh(e){var t;return[e[0],Ce(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Wh<"u"&&Wh.localStorage?Qh.exports=Wh.localStorage:typeof window<"u"&&window.localStorage?Qh.exports=window.localStorage:Qh.exports=new t}();class Jh{constructor(){this.localStorage=Qh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Zh)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return Ce(t)}async setItem(e,t){this.localStorage.setItem(e,Be(t))}async removeItem(e){this.localStorage.removeItem(e)}}class Yh{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Jh;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new Kh,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var Xh=i(4874),el=i.n(Xh);const tl="custom_context";class rl{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class nl{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new rl(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class il{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=Xh.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new nl(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Xh.levels.values.error?console.error(e):t===Xh.levels.values.warn?console.warn(e):t===Xh.levels.values.debug?console.debug(e):t===Xh.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Be({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new nl(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Be({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class sl{constructor(e,t=1024e3){this.baseChunkLogger=new il(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class ol{constructor(e,t=1024e3){this.baseChunkLogger=new il(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var al=Object.defineProperty,cl=Object.defineProperties,ul=Object.getOwnPropertyDescriptors,hl=Object.getOwnPropertySymbols,ll=Object.prototype.hasOwnProperty,dl=Object.prototype.propertyIsEnumerable,fl=(e,t,r)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pl=(e,t)=>{for(var r in t||(t={}))ll.call(t,r)&&fl(e,r,t[r]);if(hl)for(var r of hl(t))dl.call(t,r)&&fl(e,r,t[r]);return e},gl=(e,t)=>cl(e,ul(t));function ml(e){return gl(pl({},e),{level:e?.level||"info"})}function yl(e,t=tl){let r="";return r=typeof e.bindings>"u"?function(e,t=tl){return e[t]||""}(e,t):e.bindings().context||"",r}function vl(e,t,r=tl){const n=function(e,t,r=tl){const n=yl(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=tl){return e[r]=t,e}(e.child({context:n}),n,r)}function bl(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const n=new sl(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:el()(gl(pl({},e.opts),{level:"trace",browser:gl(pl({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;const r=new ol(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:el()(gl(pl({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}var wl=Object.defineProperty,El=(e,t,r)=>((e,t,r)=>t in e?wl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Al extends wh{constructor(e){super(),this.opts=e,El(this,"protocol","wc"),El(this,"version",2)}}var Il=Object.defineProperty;class xl extends wh{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,r)=>{((e,t,r)=>{t in e?Il(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"records",new Map)}}class _l{constructor(e,t){this.logger=e,this.core=t}}class Sl extends wh{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Pl extends wh{constructor(e){super()}}class Ol{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class kl extends wh{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Tl extends wh{constructor(e,t){super(),this.core=e,this.logger=t}}class Cl{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class Bl{constructor(e,t){this.projectId=e,this.logger=t}}class Rl{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var Nl=Object.defineProperty,Ml=(e,t,r)=>((e,t,r)=>t in e?Nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);E();class Ll{constructor(e){this.opts=e,Ml(this,"protocol","wc"),Ml(this,"version",2)}}w.EventEmitter;class jl{constructor(e){this.client=e}}const Dl="PARSE_ERROR",Ul="INVALID_REQUEST",Fl="METHOD_NOT_FOUND",ql="INVALID_PARAMS",Hl="INTERNAL_ERROR",zl="SERVER_ERROR",$l=[-32700,-32600,-32601,-32602,-32603],Gl={[Dl]:{code:-32700,message:"Parse error"},[Ul]:{code:-32600,message:"Invalid Request"},[Fl]:{code:-32601,message:"Method not found"},[ql]:{code:-32602,message:"Invalid params"},[Hl]:{code:-32603,message:"Internal error"},[zl]:{code:-32e3,message:"Server error"}},Vl=zl;function Kl(e){return Object.keys(Gl).includes(e)?Gl[e]:Gl[Vl]}function Wl(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Ql=i(5682);function Zl(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function Jl(e=6){return BigInt(Zl(e))}function Yl(e,t,r){return{id:r||Zl(),jsonrpc:"2.0",method:e,params:t}}function Xl(e,t){return{id:e,jsonrpc:"2.0",result:t}}function ed(e,t,r){return{id:e,jsonrpc:"2.0",error:td(t,r)}}function td(e,t){return void 0===e?Kl(Hl):("string"==typeof e&&(e=Object.assign(Object.assign({},Kl(zl)),{message:e})),void 0!==t&&(e.data=t),r=e.code,$l.includes(r)&&(e=function(e){return Object.values(Gl).find((t=>t.code===e))||Gl[Vl]}(e.code)),e);var r}class rd{}class nd extends rd{constructor(){super()}}class id extends nd{constructor(e){super()}}function sd(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function od(e){return sd(e,"^https?:")}function ad(e){return sd(e,"^wss?:")}function cd(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function ud(e){return cd(e)&&"method"in e}function hd(e){return cd(e)&&(ld(e)||dd(e))}function ld(e){return"result"in e}function dd(e){return"error"in e}class fd extends id{constructor(e){super(e),this.events=new w.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Yl(e.method,e.params||[],e.id||Jl().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{dd(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),hd(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const pd=e=>e.split("?")[0],gd=typeof WebSocket<"u"?WebSocket:typeof i.g<"u"&&typeof i.g.WebSocket<"u"?i.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:i(1591);class md{constructor(e){if(this.url=e,this.events=new w.EventEmitter,this.registering=!1,!ad(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Be(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!ad(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const n=(0,Ql.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},s=new gd(e,[],n);var o;typeof WebSocket<"u"||typeof i.g<"u"&&typeof i.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?s.onerror=e=>{const t=e;r(this.emitError(t.error))}:s.on("error",(e=>{r(this.emitError(e))})),s.onopen=()=>{this.onOpen(s),t(s)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Ce(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=ed(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return Wl(e,pd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${pd(this.url)}`));return this.events.emit("register_error",t),t}}var yd=i(8287).hp;const vd="core",bd=`wc@2:${vd}:`,wd={database:":memory:"},Ed="client_ed25519_seed",Ad=B.ONE_DAY,Id=B.SIX_HOURS,xd="wss://relay.walletconnect.org",_d="relayer_message",Sd="relayer_message_ack",Pd="relayer_connection_stalled",Od="relayer_publish",kd="payload",Td="connect",Cd="disconnect",Bd="error",Rd="2.19.2",Nd={link_mode:"link_mode",relay:"relay"},Md="inbound",Ld="WALLETCONNECT_LINK_MODE_APPS",jd="subscription_created",Dd="subscription_deleted",Ud=(B.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:B.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:B.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:B.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:B.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:B.ONE_DAY,prompt:!1,tag:0},res:{ttl:B.ONE_DAY,prompt:!1,tag:0}}}),Fd="pairing_create",qd="pairing_delete",Hd="history_created",zd="history_updated",$d="history_deleted",Gd="expirer_created",Vd="expirer_deleted",Kd="expirer_expired",Wd="https://verify.walletconnect.org",Qd=Wd,Zd=`${Qd}/v3`,Jd=["https://verify.walletconnect.com",Wd],Yd="malformed_pairing_uri",Xd="session_approve_started";var ef=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var l=0,d=s-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*h+1>>>0,u=new Uint8Array(o);i!==s;){for(var l=t[i],d=0,f=o-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*u[f]>>>0,u[f]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const tf=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class rf{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nf{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return of(this,e)}}class sf{constructor(e){this.decoders=e}or(e){return of(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const of=(e,t)=>new sf({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class af{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new rf(e,t,r),this.decoder=new nf(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const cf=({name:e,prefix:t,encode:r,decode:n})=>new af(e,t,r,n),uf=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ef(r,t);return cf({prefix:e,name:t,encode:n,decode:e=>tf(i(e))})},hf=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>cf({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),lf=cf({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var df=Object.freeze({__proto__:null,identity:lf});const ff=hf({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pf=Object.freeze({__proto__:null,base2:ff});const gf=hf({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mf=Object.freeze({__proto__:null,base8:gf});const yf=uf({prefix:"9",name:"base10",alphabet:"0123456789"});var vf=Object.freeze({__proto__:null,base10:yf});const bf=hf({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wf=hf({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ef=Object.freeze({__proto__:null,base16:bf,base16upper:wf});const Af=hf({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),If=hf({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xf=hf({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_f=hf({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sf=hf({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pf=hf({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Of=hf({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kf=hf({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tf=hf({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cf=Object.freeze({__proto__:null,base32:Af,base32upper:If,base32pad:xf,base32padupper:_f,base32hex:Sf,base32hexupper:Pf,base32hexpad:Of,base32hexpadupper:kf,base32z:Tf});const Bf=uf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rf=uf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Nf=Object.freeze({__proto__:null,base36:Bf,base36upper:Rf});const Mf=uf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lf=uf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jf=Object.freeze({__proto__:null,base58btc:Mf,base58flickr:Lf});const Df=hf({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Uf=hf({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ff=hf({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qf=hf({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hf=Object.freeze({__proto__:null,base64:Df,base64pad:Uf,base64url:Ff,base64urlpad:qf});const zf=Array.from(""),$f=zf.reduce(((e,t,r)=>(e[r]=t,e)),[]),Gf=zf.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Vf=cf({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+$f[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Gf[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Kf=Object.freeze({__proto__:null,base256emoji:Vf}),Wf=128,Qf=-128,Zf=Math.pow(2,31),Jf=128,Yf=127,Xf=Math.pow(2,7),ep=Math.pow(2,14),tp=Math.pow(2,21),rp=Math.pow(2,28),np=Math.pow(2,35),ip=Math.pow(2,42),sp=Math.pow(2,49),op=Math.pow(2,56),ap=Math.pow(2,63),cp={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Zf;)r[n++]=255&t|Wf,t/=128;for(;t&Qf;)r[n++]=255&t|Wf,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&Yf)<<s:(n&Yf)*Math.pow(2,s),s+=7}while(n>=Jf);return e.bytes=o-r,i},encodingLength:function(e){return e<Xf?1:e<ep?2:e<tp?3:e<rp?4:e<np?5:e<ip?6:e<sp?7:e<op?8:e<ap?9:10}},up=cp;const hp=(e,t,r=0)=>(up.encode(e,t,r),t),lp=e=>up.encodingLength(e),dp=(e,t)=>{const r=t.byteLength,n=lp(e),i=n+lp(r),s=new Uint8Array(i+r);return hp(e,s,0),hp(r,s,n),s.set(t,i),new fp(e,r,t,s)};class fp{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const pp=({name:e,code:t,encode:r})=>new gp(e,t,r);class gp{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?dp(this.code,t):t.then((e=>dp(this.code,e)))}throw Error("Unknown type, must be binary type")}}const mp=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),yp=pp({name:"sha2-256",code:18,encode:mp("SHA-256")}),vp=pp({name:"sha2-512",code:19,encode:mp("SHA-512")});Object.freeze({__proto__:null,sha256:yp,sha512:vp});const bp=tf,wp={code:0,name:"identity",encode:bp,digest:e=>dp(0,bp(e))};Object.freeze({__proto__:null,identity:wp}),new TextEncoder,new TextDecoder;const Ep={...df,...pf,...mf,...vf,...Ef,...Cf,...Nf,...jf,...Hf,...Kf};function Ap(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Ip=Ap("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),xp=Ap("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),_p={utf8:Ip,"utf-8":Ip,hex:Ep.base16,latin1:xp,ascii:xp,binary:xp,...Ep};var Sp=Object.defineProperty,Pp=(e,t,r)=>((e,t,r)=>t in e?Sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Op{constructor(e,t){this.core=e,this.logger=t,Pp(this,"keychain",new Map),Pp(this,"name","keychain"),Pp(this,"version","0.3"),Pp(this,"initialized",!1),Pp(this,"storagePrefix",bd),Pp(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),Pp(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),Pp(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),Pp(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=th("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),Pp(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=vl(t,this.name)}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,eo(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?to(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kp=Object.defineProperty,Tp=(e,t,r)=>((e,t,r)=>t in e?kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Cp{constructor(e,t,r){this.core=e,this.logger=t,Tp(this,"name","crypto"),Tp(this,"keychain"),Tp(this,"randomSessionIdentifier",Tu()),Tp(this,"initialized",!1),Tp(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),Tp(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),Tp(this,"getClientId",(async()=>(this.isInitialized(),Xn(ri(await this.getClientSeed()).publicKey)))),Tp(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=lu.utils.randomPrivateKey(),t=lu.getPublicKey(e);return{privateKey:ks(e,Su),publicKey:ks(t,Su)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),Tp(this,"signJWT",(async e=>{this.isInitialized();const t=ri(await this.getClientSeed()),r=this.randomSessionIdentifier,n=Ad;return await async function(e,t,r,n,i=(0,B.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Xn(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=function(e){return Zn([Yn(e.header),Yn(e.payload)].join(fr),mr)}({header:s,payload:o});return function(e){return[Yn(e.header),Yn(e.payload),ei(e.signature)].join(fr)}({header:s,payload:o,signature:dr.sign(a,n.secretKey.slice(0,32))})}(r,e,n,t)})),Tp(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const n=function(e,t){const r=lu.getSharedSecret(Os(e,Su),Os(t,Su));return ks(((e,t,r,n,i)=>function(e,t,r,n=32){if(yo(e),go(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=Wa);const s=new Uint8Array(i*e.outputLen),o=Va.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)Ka[0]=t+1,a.update(0===t?Wa:c).update(r).update(Ka).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Ka.fill(0),s.slice(0,n)}(e,function(e,t,r){return yo(e),void 0===r&&(r=new Uint8Array(e.outputLen)),Va(e,ko(r),ko(t))}(e,t,r),n,i))(rc,r,void 0,void 0,32),Su)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)})),Tp(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||Cu(e);return await this.keychain.set(r,e),r})),Tp(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Tp(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Tp(this,"encode",(async(e,t,r)=>{this.isInitialized();const n=Uu(r),i=Be(t);if(qu(n))return function(e,t){const r=Ru(2),n=Bo(12),i=ju({type:r,sealed:Os(e,ku),iv:n});return t===Ou?Mu(i):i}(i,r?.encoding);if(Fu(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return function(e){const t=Ru(typeof e.type<"u"?e.type:0);if(1===Nu(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Os(e.senderPublicKey,Su):void 0,n=typeof e.iv<"u"?Os(e.iv,Su):Bo(12),i=Os(e.symKey,Su),s=ju({type:t,sealed:za(i,n).encrypt(Os(e.message,ku)),iv:n,senderPublicKey:r});return e.encoding===Ou?Mu(s):s}({type:o,symKey:s,message:i,senderPublicKey:a,encoding:r?.encoding})})),Tp(this,"decode",(async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Du({encoded:e,encoding:t?.encoding});return Uu({type:Nu(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ks(r.senderPublicKey,Su):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(qu(n)){const e=function(e,t){const{sealed:r}=Du({encoded:e,encoding:t});return ks(r,ku)}(t,r?.encoding);return Ce(e)}if(Fu(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=function(e){const t=Os(e.symKey,Su),{sealed:r,iv:n}=Du({encoded:e.encoded,encoding:e.encoding}),i=za(t,n).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return ks(i,ku)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return Ce(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),Tp(this,"getPayloadType",((e,t=Pu)=>Nu(Du({encoded:e,encoding:t}).type))),Tp(this,"getPayloadSenderPublicKey",((e,t=Pu)=>{const r=Du({encoded:e,encoding:t});return r.senderPublicKey?ks(r.senderPublicKey,Su):void 0})),this.core=e,this.logger=vl(t,this.name),this.keychain=r||new Op(this.core,this.logger)}get context(){return yl(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ed)}catch{e=Tu(),await this.keychain.set(Ed,e)}return function(e,t="utf8"){const r=_p[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Bp=Object.defineProperty,Rp=Object.defineProperties,Np=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,Lp=Object.prototype.hasOwnProperty,jp=Object.prototype.propertyIsEnumerable,Dp=(e,t,r)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Up=(e,t,r)=>Dp(e,"symbol"!=typeof t?t+"":t,r);class Fp extends _l{constructor(e,t){super(e,t),this.logger=e,this.core=t,Up(this,"messages",new Map),Up(this,"messagesWithoutClientAck",new Map),Up(this,"name","messages"),Up(this,"version","0.3"),Up(this,"initialized",!1),Up(this,"storagePrefix",bd),Up(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),Up(this,"set",(async(e,t,r)=>{this.isInitialized();const n=Bu(t);let i=this.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[n]<"u")return n;if(i[n]=t,this.messages.set(e,i),r===Md){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>Rp(e,Np(t)))(((e,t)=>{for(var r in t||(t={}))Lp.call(t,r)&&Dp(e,r,t[r]);if(Mp)for(var r of Mp(t))jp.call(t,r)&&Dp(e,r,t[r]);return e})({},r),{[n]:t}))}return await this.persist(),n})),Up(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),Up(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),Up(this,"has",((e,t)=>(this.isInitialized(),typeof this.get(e)[Bu(t)]<"u"))),Up(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[Bu(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist())})),Up(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=vl(e,this.name),this.core=t}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,eo(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,eo(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?to(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?to(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qp=Object.defineProperty,Hp=Object.defineProperties,zp=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,Gp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,Kp=(e,t,r)=>t in e?qp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wp=(e,t)=>{for(var r in t||(t={}))Gp.call(t,r)&&Kp(e,r,t[r]);if($p)for(var r of $p(t))Vp.call(t,r)&&Kp(e,r,t[r]);return e},Qp=(e,t)=>Hp(e,zp(t)),Zp=(e,t,r)=>Kp(e,"symbol"!=typeof t?t+"":t,r);class Jp extends Sl{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Zp(this,"events",new w.EventEmitter),Zp(this,"name","publisher"),Zp(this,"queue",new Map),Zp(this,"publishTimeout",(0,B.toMiliseconds)(B.ONE_MINUTE)),Zp(this,"initialPublishTimeout",(0,B.toMiliseconds)(15*B.ONE_SECOND)),Zp(this,"needsTransportRestart",!1),Zp(this,"publish",(async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||Id,s=Hu(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||Jl().toString(),u={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},h=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const s=({id:e})=>{u.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(Od,s),n(u))};this.relayer.events.on(Od,s);const h=no(new Promise(((n,s)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(n).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await h,this.events.removeListener(Od,s)}catch(e){this.queue.set(c,Qp(Wp({},u),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await no(n,this.publishTimeout,h)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),Zp(this,"on",((e,t)=>{this.events.on(e,t)})),Zp(this,"once",((e,t)=>{this.events.once(e,t)})),Zp(this,"off",((e,t)=>{this.events.off(e,t)})),Zp(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=vl(t,this.name),this.registerEventListeners()}get context(){return yl(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:s,message:o,ttl:a=Id,prompt:c,tag:u,id:h,attestation:l,tvf:d}=e,f={method:zu(Hu().protocol).publish,params:Wp({topic:s,message:o,ttl:a,prompt:c,tag:u,attestation:l},d),id:h};sh(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),sh(null==(n=f.params)?void 0:n.tag)&&(null==(i=f.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const p=await this.relayer.request(f);return this.relayer.events.emit(Od,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,Qp(Wp({},e),{attempt:r}));const{topic:n,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Qp(Wp({},e),{topic:n,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Ih,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Pd);this.checkQueue()})),this.relayer.on(Sd,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var Yp=Object.defineProperty,Xp=(e,t,r)=>((e,t,r)=>t in e?Yp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class eg{constructor(){Xp(this,"map",new Map),Xp(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),Xp(this,"get",(e=>this.map.get(e)||[])),Xp(this,"exists",((e,t)=>this.get(e).includes(t))),Xp(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)})),Xp(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var tg=Object.defineProperty,rg=Object.defineProperties,ng=Object.getOwnPropertyDescriptors,ig=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,ag=(e,t,r)=>t in e?tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cg=(e,t)=>{for(var r in t||(t={}))sg.call(t,r)&&ag(e,r,t[r]);if(ig)for(var r of ig(t))og.call(t,r)&&ag(e,r,t[r]);return e},ug=(e,t)=>rg(e,ng(t)),hg=(e,t,r)=>ag(e,"symbol"!=typeof t?t+"":t,r);class lg extends kl{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,hg(this,"subscriptions",new Map),hg(this,"topicMap",new eg),hg(this,"events",new w.EventEmitter),hg(this,"name","subscription"),hg(this,"version","0.3"),hg(this,"pending",new Map),hg(this,"cached",[]),hg(this,"initialized",!1),hg(this,"storagePrefix",bd),hg(this,"subscribeTimeout",(0,B.toMiliseconds)(B.ONE_MINUTE)),hg(this,"initialSubscribeTimeout",(0,B.toMiliseconds)(15*B.ONE_SECOND)),hg(this,"clientId"),hg(this,"batchSubscribeTopicsLimit",500),hg(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),hg(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=Hu(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),hg(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),hg(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),hg(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),hg(this,"on",((e,t)=>{this.events.on(e,t)})),hg(this,"once",((e,t)=>{this.events.once(e,t)})),hg(this,"off",((e,t)=>{this.events.off(e,t)})),hg(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),hg(this,"start",(async()=>{await this.onConnect()})),hg(this,"stop",(async()=>{await this.onDisconnect()})),hg(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),hg(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),hg(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(Ih,(async()=>{await this.checkPending()})),this.events.on(jd,(async e=>{const t=jd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Dd,(async e=>{const t=Dd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=vl(t,this.name),this.clientId=""}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=Hu(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);const i=rh("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n;(!r||r?.transportType===Nd.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:zu(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===Nd.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,B.toMiliseconds)(B.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(jd,r),t(n.id))};this.events.on(jd,r);try{const n=await no(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(jd,r),t(n)}catch{}})),o=await no(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pd),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:zu(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await no(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Pd)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:zu(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await no(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Pd)}return r}rpcUnsubscribe(e,t,r){const n={method:zu(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,ug(cg({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,cg({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,cg({},t)),this.topicMap.set(t.topic,e),this.events.emit(jd,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=th("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Dd,ug(cg({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=th("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>ug(cg({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,B.toMiliseconds)(B.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Bu(e+await this.getClientId())}}var dg=Object.defineProperty,fg=Object.getOwnPropertySymbols,pg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable,mg=(e,t,r)=>t in e?dg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yg=(e,t)=>{for(var r in t||(t={}))pg.call(t,r)&&mg(e,r,t[r]);if(fg)for(var r of fg(t))gg.call(t,r)&&mg(e,r,t[r]);return e},vg=(e,t,r)=>mg(e,"symbol"!=typeof t?t+"":t,r);class bg extends Pl{constructor(e){super(e),vg(this,"protocol","wc"),vg(this,"version",2),vg(this,"core"),vg(this,"logger"),vg(this,"events",new w.EventEmitter),vg(this,"provider"),vg(this,"messages"),vg(this,"subscriber"),vg(this,"publisher"),vg(this,"name","relayer"),vg(this,"transportExplicitlyClosed",!1),vg(this,"initialized",!1),vg(this,"connectionAttemptInProgress",!1),vg(this,"relayUrl"),vg(this,"projectId"),vg(this,"packageName"),vg(this,"bundleId"),vg(this,"hasExperiencedNetworkDisruption",!1),vg(this,"pingTimeout"),vg(this,"heartBeatTimeout",(0,B.toMiliseconds)(B.THIRTY_SECONDS+B.FIVE_SECONDS)),vg(this,"reconnectTimeout"),vg(this,"connectPromise"),vg(this,"reconnectInProgress",!1),vg(this,"requestsInFlight",[]),vg(this,"connectTimeout",(0,B.toMiliseconds)(15*B.ONE_SECOND)),vg(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||Jl().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}})),vg(this,"resetPingTimeout",(()=>{Vs()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),vg(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),vg(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")})),vg(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()})),vg(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),vg(this,"registerProviderListeners",(()=>{this.provider.on(kd,this.onPayloadHandler),this.provider.on(Td,this.onConnectHandler),this.provider.on(Cd,this.onDisconnectHandler),this.provider.on(Bd,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?vl(e.logger,this.name):el()(ml({level:e.logger||"error"})),this.messages=new Fp(this.logger,e.core),this.subscriber=new lg(this,this.logger),this.publisher=new Jp(this,this.logger),this.relayUrl=e?.relayUrl||xd,this.projectId=e.projectId,Ks()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"android"===(null==i.g?void 0:i.g.Platform.OS)?this.packageName=Zs():Ks()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"ios"===(null==i.g?void 0:i.g.Platform.OS)&&(this.bundleId=Zs()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return yl(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Nd.relay},"outbound")}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let o,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(jd,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(jd,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,yg({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await no(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yh())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:oo(B.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(_d,e),await this.recordMessageEvent(e,Md)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Cd,r),await no(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(Cd,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Cd,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(Cd,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,B.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(Vs())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new fd(new md(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),h={auth:i,ua:Ys(e,t,n),projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},l=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const n=t[e];void 0!==n&&r.set(e,n)}return r.toString()}(u[1]||"",h);return u[0]+"?"+l}({sdkVersion:Rd,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ud(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,o={topic:r,message:n,publishedAt:i,transportType:Nd.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(yg({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else hd(e)&&this.events.emit(Sd,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Md),this.events.emit(_d,e))}async acknowledgePayload(e){const t=Xl(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(kd,this.onPayloadHandler),this.provider.off(Td,this.onConnectHandler),this.provider.off(Cd,this.onDisconnectHandler),this.provider.off(Bd,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yh();!function(e){switch(Qs()){case $s:!function(e){!Ks()&&Ws()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case zs:!function(e){Ks()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo&&i.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,B.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function wg(){}function Eg(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function Ag(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Ig(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const xg="[object Arguments]",_g="[object Object]";function Sg(e,t,r,n,i,s,o){const a=o(e,t,r,n,i,s);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Pg(e,t,s,o)}return Pg(e,t,s,o)}function Pg(e,t,r,n){if(Object.is(e,t))return!0;let i=Ig(e),s=Ig(t);if(i===xg&&(i=_g),s===xg&&(s=_g),i!==s)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(r=r??new Map).get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;for(const[i,s]of e.entries())if(!t.has(i)||!Sg(s,t.get(i),i,e,t,r,n))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const i=Array.from(e.values()),s=Array.from(t.values());for(let o=0;o<i.length;o++){const a=i[o],c=s.findIndex((i=>Sg(a,i,void 0,e,t,r,n)));if(-1===c)return!1;s.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof yd<"u"&&yd.isBuffer(e)!==yd.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Sg(e[i],t[i],i,e,t,r,n))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Pg(new Uint8Array(e),new Uint8Array(t),r,n);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Pg(new Uint8Array(e),new Uint8Array(t),r,n);case"[object Error]":return e.name===t.name&&e.message===t.message;case _g:{if(!(Pg(e.constructor,t.constructor,r,n)||Eg(e)&&Eg(t)))return!1;const i=[...Object.keys(e),...Ag(e)],s=[...Object.keys(t),...Ag(t)];if(i.length!==s.length)return!1;for(let s=0;s<i.length;s++){const o=i[s],a=e[o];if(!Object.hasOwn(t,o))return!1;if(!Sg(a,t[o],o,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}var Og=Object.defineProperty,kg=Object.getOwnPropertySymbols,Tg=Object.prototype.hasOwnProperty,Cg=Object.prototype.propertyIsEnumerable,Bg=(e,t,r)=>t in e?Og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rg=(e,t)=>{for(var r in t||(t={}))Tg.call(t,r)&&Bg(e,r,t[r]);if(kg)for(var r of kg(t))Cg.call(t,r)&&Bg(e,r,t[r]);return e},Ng=(e,t,r)=>Bg(e,"symbol"!=typeof t?t+"":t,r);class Mg extends Ol{constructor(e,t,r,n=bd,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,Ng(this,"map",new Map),Ng(this,"version","0.3"),Ng(this,"cached",[]),Ng(this,"initialized",!1),Ng(this,"getKey"),Ng(this,"storagePrefix",bd),Ng(this,"recentlyDeleted",[]),Ng(this,"recentlyDeletedLimit",200),Ng(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!sh(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),Ng(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),Ng(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),Ng(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>function(e,t){return function(e,t,r){return Sg(e,t,void 0,void 0,void 0,void 0,r)}(e,t,wg)}(t[r],e[r]))))):this.values))),Ng(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=Rg(Rg({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),Ng(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=vl(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=th("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=th("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=th("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Lg=Object.defineProperty,jg=(e,t,r)=>((e,t,r)=>t in e?Lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Dg{constructor(e,t){this.core=e,this.logger=t,jg(this,"name","pairing"),jg(this,"version","0.3"),jg(this,"events",new(E())),jg(this,"pairings"),jg(this,"initialized",!1),jg(this,"storagePrefix",bd),jg(this,"ignoredPayloadTypes",[1]),jg(this,"registeredMethods",[]),jg(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),jg(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),jg(this,"create",(async e=>{this.isInitialized();const t=Tu(),r=await this.core.crypto.setSymKey(t),n=oo(B.FIVE_MINUTES),i={protocol:"irn"},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=Ku({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(Fd,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),jg(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:s,methods:o}=Gu(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=s||oo(B.FIVE_MINUTES),u={topic:r,relay:i,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,u),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(Fd,u),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:i})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),u})),jg(this,"activate",(async({topic:e})=>{this.isInitialized();const t=oo(B.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),jg(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=ro();this.events.once(co("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}})),jg(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),jg(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),jg(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),jg(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",rh("USER_DISCONNECTED")),await this.deletePairing(t))})),jg(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return Ku({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})})),jg(this,"sendRequest",(async(e,t,r)=>{const n=Yl(t,r),i=await this.core.crypto.encode(e,n),s=Ud[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id})),jg(this,"sendResult",(async(e,t,r)=>{const n=Xl(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Ud[s].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),jg(this,"sendError",(async(e,t,r)=>{const n=ed(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Ud[s]?Ud[s].res:Ud.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),jg(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,rh("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),jg(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>ao(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),jg(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),jg(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)})),jg(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),jg(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{ld(t)?this.events.emit(co("pairing_ping",r),{}):dd(t)&&this.events.emit(co("pairing_ping",r),{error:t.error})}),500)})),jg(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(qd,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),jg(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=rh("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),jg(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(rh("WC_METHOD_UNSUPPORTED",e))})),jg(this,"isValidPair",((e,t)=>{var r;if(!fh(e)){const{message:r}=th("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(Yd),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(oh(e,!1))return!!t(e)||t(po(e))}catch{}return!1}(e.uri)){const{message:r}=th("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(Yd),new Error(r)}const n=Gu(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=th("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(Yd),new Error(e)}if(null==n||!n.symKey){const{message:e}=th("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(Yd),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,B.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=th("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),jg(this,"isValidPing",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),jg(this,"isValidDisconnect",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),jg(this,"isValidPairingTopic",(async e=>{if(!oh(e,!1)){const{message:t}=th("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=th("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ao(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=th("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=vl(t,this.name),this.pairings=new Mg(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yl(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_d,(async e=>{const{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==Nd.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);ud(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):hd(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(Kd,(async e=>{const{topic:t}=so(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}var Ug=Object.defineProperty,Fg=(e,t,r)=>((e,t,r)=>t in e?Ug(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class qg extends xl{constructor(e,t){super(e,t),this.core=e,this.logger=t,Fg(this,"records",new Map),Fg(this,"events",new w.EventEmitter),Fg(this,"name","history"),Fg(this,"version","0.3"),Fg(this,"cached",[]),Fg(this,"initialized",!1),Fg(this,"storagePrefix",bd),Fg(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Fg(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:oo(B.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(Hd,n)})),Fg(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=dd(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(zd,t))})),Fg(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),Fg(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit($d,r)}})),this.persist()})),Fg(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),Fg(this,"on",((e,t)=>{this.events.on(e,t)})),Fg(this,"once",((e,t)=>{this.events.once(e,t)})),Fg(this,"off",((e,t)=>{this.events.off(e,t)})),Fg(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=vl(t,this.name)}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Yl(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=th("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=th("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Hd,(e=>{const t=Hd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(zd,(e=>{const t=zd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on($d,(e=>{const t=$d;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(Ih,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,B.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit($d,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Hg=Object.defineProperty,zg=(e,t,r)=>((e,t,r)=>t in e?Hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class $g extends Tl{constructor(e,t){super(e,t),this.core=e,this.logger=t,zg(this,"expirations",new Map),zg(this,"events",new w.EventEmitter),zg(this,"name","expirer"),zg(this,"version","0.3"),zg(this,"cached",[]),zg(this,"initialized",!1),zg(this,"storagePrefix",bd),zg(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),zg(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),zg(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(Gd,{target:r,expiration:n})})),zg(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),zg(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(Vd,{target:t,expiration:r})}})),zg(this,"on",((e,t)=>{this.events.on(e,t)})),zg(this,"once",((e,t)=>{this.events.once(e,t)})),zg(this,"off",((e,t)=>{this.events.off(e,t)})),zg(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=vl(t,this.name)}get context(){return yl(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return io("topic",e)}(e);if("number"==typeof e)return function(e){return io("id",e)}(e);const{message:t}=th("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=th("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=th("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,B.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Kd,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(Ih,(()=>this.checkExpirations())),this.events.on(Gd,(e=>{const t=Gd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Kd,(e=>{const t=Kd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Vd,(e=>{const t=Vd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gg=Object.defineProperty,Vg=(e,t,r)=>((e,t,r)=>t in e?Gg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Kg extends Cl{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Vg(this,"name","verify-api"),Vg(this,"abortController"),Vg(this,"isDevEnv"),Vg(this,"verifyUrlV3",Zd),Vg(this,"storagePrefix",bd),Vg(this,"version",2),Vg(this,"publicKey"),Vg(this,"fetchPromise"),Vg(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,B.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),Vg(this,"register",(async e=>{if(!Ws()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,R.getDocument)(),t=this.startAbortTimer(5*B.ONE_SECOND),n=await new Promise(((n,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const s=JSON.parse(i.data);if("verify_attestation"===s.type){if(ti(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),n(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(e){this.logger.warn(e)}return""})),Vg(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(ti(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)})),Vg(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*B.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0})),Vg(this,"getVerifyUrl",(e=>{let t=e||Qd;return Jd.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${Qd}`),t=Qd),t})),Vg(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(B.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),Vg(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),Vg(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),Vg(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),Vg(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),Vg(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),Vg(this,"validateAttestation",((e,t)=>{const r=function(e,t){const[r,n,i]=e.split("."),s=Cs.from(Lu(i),"base64");if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=rc(`${r}.${n}`),u=function(e){const t=Cs.from(e.x,"base64"),r=Cs.from(e.y,"base64");return ii([new Uint8Array([4]),t,r])}(t);if(!xu.verify(ii([o,a]),c,u))throw new Error("Invalid signature");return ti(e).payload}(e,t.publicKey),n={hasExpired:(0,B.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}})),this.logger=vl(t,this.name),this.abortController=new AbortController,this.isDevEnv=fo(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return yl(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,B.toMiliseconds)(e))}}var Wg=Object.defineProperty,Qg=(e,t,r)=>((e,t,r)=>t in e?Wg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Zg extends Bl{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Qg(this,"context","echo"),Qg(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})})),this.logger=vl(t,this.context)}}var Jg=Object.defineProperty,Yg=Object.getOwnPropertySymbols,Xg=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,tm=(e,t,r)=>t in e?Jg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rm=(e,t)=>{for(var r in t||(t={}))Xg.call(t,r)&&tm(e,r,t[r]);if(Yg)for(var r of Yg(t))em.call(t,r)&&tm(e,r,t[r]);return e},nm=(e,t,r)=>tm(e,"symbol"!=typeof t?t+"":t,r);class im extends Rl{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,nm(this,"context","event-client"),nm(this,"storagePrefix",bd),nm(this,"storageVersion",.1),nm(this,"events",new Map),nm(this,"shouldPersist",!1),nm(this,"init",(async()=>{if(!fo())try{const e={eventId:lo(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Ys(this.core.relayer.protocol,this.core.relayer.version,Rd)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),nm(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=lo(),o=this.core.projectId||"",a=Date.now(),c=rm({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c})),nm(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?rm(rm({},n),this.setMethods(n.eventId)):void 0})),nm(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),nm(this,"setEventListeners",(()=>{this.core.heartbeat.on(Ih,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,B.fromMiliseconds)(Date.now())-(0,B.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),nm(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),nm(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),nm(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),nm(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),nm(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,rm(rm({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),nm(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),nm(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Rd}${t}`,{method:"POST",body:JSON.stringify(e)})})),nm(this,"getAppDomain",(()=>Js().url)),this.logger=vl(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var sm=Object.defineProperty,om=Object.getOwnPropertySymbols,am=Object.prototype.hasOwnProperty,cm=Object.prototype.propertyIsEnumerable,um=(e,t,r)=>t in e?sm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hm=(e,t)=>{for(var r in t||(t={}))am.call(t,r)&&um(e,r,t[r]);if(om)for(var r of om(t))cm.call(t,r)&&um(e,r,t[r]);return e},lm=(e,t,r)=>um(e,"symbol"!=typeof t?t+"":t,r);class dm extends Al{constructor(e){var t;super(e),lm(this,"protocol","wc"),lm(this,"version",2),lm(this,"name",vd),lm(this,"relayUrl"),lm(this,"projectId"),lm(this,"customStoragePrefix"),lm(this,"events",new w.EventEmitter),lm(this,"logger"),lm(this,"heartbeat"),lm(this,"relayer"),lm(this,"crypto"),lm(this,"storage"),lm(this,"history"),lm(this,"expirer"),lm(this,"pairing"),lm(this,"verify"),lm(this,"echoClient"),lm(this,"linkModeSupportedApps"),lm(this,"eventClient"),lm(this,"initialized",!1),lm(this,"logChunkController"),lm(this,"on",((e,t)=>this.events.on(e,t))),lm(this,"once",((e,t)=>this.events.once(e,t))),lm(this,"off",((e,t)=>this.events.off(e,t))),lm(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),lm(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:Nd.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})}));const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||xd,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=ml({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:vd}),{logger:i,chunkLoggerController:s}=bl({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=vl(i,this.name),this.heartbeat=new xh,this.crypto=new Cp(this,this.logger,e?.keychain),this.history=new qg(this,this.logger),this.expirer=new $g(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Yh(hm(hm({},wd),e?.storageOptions)),this.relayer=new bg({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Dg(this,this.logger),this.verify=new Kg(this,this.logger,this.storage),this.echoClient=new Zg(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new im(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new dm(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return yl(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Ld,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Ld)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){return void console.warn("Failed to get global WalletConnect core",e)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const fm=dm,pm="client",gm=`wc@2:${pm}:`,mm=pm,ym="WALLETCONNECT_DEEPLINK_CHOICE",vm="Proposal expired",bm=B.SEVEN_DAYS,wm={wc_sessionPropose:{req:{ttl:B.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:B.ONE_DAY,prompt:!1,tag:1104},res:{ttl:B.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:B.ONE_DAY,prompt:!1,tag:1106},res:{ttl:B.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:B.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:B.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:B.ONE_DAY,prompt:!1,tag:1112},res:{ttl:B.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:B.ONE_DAY,prompt:!1,tag:1114},res:{ttl:B.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:B.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:B.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:B.FIVE_MINUTES,prompt:!1,tag:1119}}},Em={min:B.FIVE_MINUTES,max:B.SEVEN_DAYS},Am="IDLE",Im="ACTIVE",xm={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},_m=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Sm="wc@1.5:auth:",Pm=`${Sm}:PUB_KEY`;var Om=Object.defineProperty,km=Object.defineProperties,Tm=Object.getOwnPropertyDescriptors,Cm=Object.getOwnPropertySymbols,Bm=Object.prototype.hasOwnProperty,Rm=Object.prototype.propertyIsEnumerable,Nm=(e,t,r)=>t in e?Om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mm=(e,t)=>{for(var r in t||(t={}))Bm.call(t,r)&&Nm(e,r,t[r]);if(Cm)for(var r of Cm(t))Rm.call(t,r)&&Nm(e,r,t[r]);return e},Lm=(e,t)=>km(e,Tm(t)),jm=(e,t,r)=>Nm(e,"symbol"!=typeof t?t+"":t,r);class Dm extends jl{constructor(e){super(e),jm(this,"name","engine"),jm(this,"events",new(E())),jm(this,"initialized",!1),jm(this,"requestQueue",{state:Am,queue:[]}),jm(this,"sessionRequestQueue",{state:Am,queue:[]}),jm(this,"requestQueueDelay",B.ONE_SECOND),jm(this,"expectedPairingMethodMap",new Map),jm(this,"recentlyDeletedMap",new Map),jm(this,"recentlyDeletedLimit",200),jm(this,"relayMessageCache",[]),jm(this,"pendingSessions",new Map),jm(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(wm)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,B.toMiliseconds)(this.requestQueueDelay)))})),jm(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=Lm(Mm({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:a}=t;let c,u=r,h=!1;try{if(u){const e=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),e}if(!u||!h){const{topic:e,uri:t}=await this.client.core.pairing.create();u=e,c=t}if(!u){const{message:e}=th("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(e)}const l=await this.client.core.crypto.generateKeyPair(),d=wm.wc_sessionPropose.req.ttl||B.FIVE_MINUTES,f=oo(d),p=Lm(Mm(Mm({requiredNamespaces:n,optionalNamespaces:i,relays:a??[{protocol:"irn"}],proposer:{publicKey:l,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:u},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:Zl()}),g=co("session_connect",p.id),{reject:m,resolve:y,done:v}=ro(d,vm),b=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",b),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:vm,code:0}}))};return this.client.events.on("proposal_expire",b),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",b),e?m(e):t&&y(t)})),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:v}})),jm(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),jm(this,"approve",(async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[Xd]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),e}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:u,sessionConfig:h}=e,l=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:d,proposer:f,requiredNamespaces:p,optionalNamespaces:g}=l;let m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:Xd,properties:{topic:d,trace:[Xd,"session_namespaces_validation_success"]}}));const y=await this.client.core.crypto.generateKeyPair(),v=f.publicKey,b=await this.client.core.crypto.generateSharedKey(y,v),w=Mm(Mm(Mm({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:oo(bm)},c&&{sessionProperties:c}),u&&{scopedProperties:u}),h&&{sessionConfig:h}),E=Nd.relay;m.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError("subscribe_session_topic_failure"),e}m.addTrace("subscribe_session_topic_success");const A=Lm(Mm({},w),{topic:b,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:w.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:y,transportType:Nd.relay});await this.client.session.set(b,A),m.addTrace("store_session");try{m.addTrace("publishing_session_settle"),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_settle_publish_failure"),e})),m.addTrace("session_settle_publish_success"),m.addTrace("publishing_session_approve"),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_approve_publish_failure"),e})),m.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,rh("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:f.metadata}),await this.client.proposal.delete(s,rh("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,oo(bm)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}})),jm(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:wm.wc_sessionPropose.reject}),await this.client.proposal.delete(t,rh("USER_DISCONNECTED")))})),jm(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=ro(),o=Zl(),a=Jl().toString(),c=this.client.session.get(t).namespaces;return this.events.once(co("session_update",o),(({error:e})=>{e?s(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:n}})),jm(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=Zl(),{done:n,resolve:i,reject:s}=ro();return this.events.once(co("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,oo(bm)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:n}})),jm(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:r,topic:n,expiry:s=wm.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(n);o?.transportType===Nd.relay&&await this.confirmOnlineStateOrThrow();const a=Zl(),c=Jl().toString(),{done:u,resolve:h,reject:l}=ro(s,"Request expired. Please try again.");this.events.once(co("session_request",a),(({error:e,result:t})=>{e?l(e):h(t)}));const d="wc_sessionRequest",f=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(f)return await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:n,method:d,params:{request:Lm(Mm({},r),{expiryTimestamp:oo(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:f}).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),await u();const p={request:Lm(Mm({},r),{expiryTimestamp:oo(s)}),chainId:t},g=this.shouldSetTVF(d,p);return await Promise.all([new Promise((async e=>{await this.sendRequest(Mm({clientRpcId:a,relayRpcId:c,topic:n,method:d,params:p,expiry:s,throwOnFailedPublish:!0},g&&{tvf:this.getTVFParams(a,p)})).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=o.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(Ws()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,ym);await async function({id:e,topic:t,wcDeepLink:r}){var n;try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r,o=s?.href;if("string"!=typeof o)return;const a=function(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;return i=e.startsWith("https://t.me")?`${i}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Cs.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`:`${i}/wc?${n}`,i}(o,e,t),c=Qs();if(c===$s){if(null==(n=(0,R.getDocument)())||!n.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===zs&&typeof(null==i.g?void 0:i.g.Linking)<"u"&&await i.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:n,wcDeepLink:e})}e()})),u()]).then((e=>e[2]))})),jm(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===Nd.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);ld(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):dd(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)})),jm(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=Zl(),r=Jl().toString(),{done:n,resolve:i,reject:s}=ro();this.events.once(co("session_ping",e),(({error:e})=>{e?s(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),jm(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=Jl().toString(),s=Zl();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})})),jm(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:rh("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=th("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),jm(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!Xs(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=Qu(n),c=r[t];Xs(Ns(t,c),a)&&Xs(c.methods,i)&&Xs(c.events,o)||(s=!1)})),s)}(t,e)))))),jm(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),jm(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?Nd.link_mode:Nd.relay;i===Nd.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:u,type:h,exp:l,nbf:d,methods:f=[],expiry:p}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const v=await this.client.core.crypto.generateKeyPair(),b=Cu(v);if(await Promise.all([this.client.auth.authKeys.set(Pm,{responseTopic:b,publicKey:v}),this.client.auth.pairingTopics.set(b,{topic:b,pairingTopic:m})]),await this.client.core.relayer.subscribe(b,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${m}`),f.length>0){const{namespace:e}=Bs(s[0]);let t=function(e,t,r){const n=function(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:ca(t,r,n)}}}(e,t,r);return ua(n)}(e,"request",f);pa(g)&&(t=la(t,g.pop())),g.push(t)}const w=p&&p>wm.wc_sessionAuthenticate.req.ttl?p:wm.wc_sessionAuthenticate.req.ttl,E={authPayload:{type:h??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:u,iat:(new Date).toISOString(),exp:l,nbf:d,resources:g},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:oo(w)},A={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:s,methods:[...new Set(["personal_sign",...f])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:oo(wm.wc_sessionPropose.req.ttl),id:Zl()},{done:I,resolve:x,reject:_}=ro(w,"Request expired"),S=Zl(),P=co("session_connect",A.id),O=co("session_request",S),k=async({error:e,session:t})=>{this.events.off(O,T),e?_(e):t&&x({session:t})},T=async e=>{var r,n,s;if(await this.deletePendingAuthRequest(S,{message:"fulfilled",code:0}),e.error){const t=rh("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(P,k),_(e.error.message))}await this.deleteProposal(A.id),this.events.off(P,k);const{cacaos:o,responder:a}=e.result,c=[],u=[];for(const e of o){await sa({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),_(rh("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=pa(t.resources),n=[na(t.iss)],i=ia(t.iss);if(r){const e=da(r),t=fa(r);c.push(...e),n.push(...t)}for(const e of n)u.push(`${e}:${i}`)}const h=await this.client.core.crypto.generateSharedKey(v,a.publicKey);let l;c.length>0&&(l={topic:h,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:oo(bm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:Yu([...new Set(c)],[...new Set(u)]),transportType:i},await this.client.core.relayer.subscribe(h,{transportType:i}),await this.client.session.set(h,l),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),l=this.client.session.get(h)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(h,{transportType:Nd.link_mode})),x({auths:o,session:l})};let C;this.events.once(P,k),this.events.once(O,T);try{if(n){const e=Yl("wc_sessionAuthenticate",E,S);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:Ou});C=Wu(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:E,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:S}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:A,expiry:wm.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch(e){throw this.events.off(P,k),this.events.off(O,T),e}return await this.setProposal(A.id,A),await this.setAuthRequest(S,{request:Lm(Mm({},E),{verifyContext:{}}),pairingTopic:m,transportType:i}),{uri:C??y,response:I}})),jm(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const s=i.transportType||Nd.relay;s===Nd.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Cu(o),u={type:1,receiverPublicKey:o,senderPublicKey:a},h=[],l=[];for(const e of r){if(!await sa({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");const e=rh("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:u}),new Error(e.message)}n.addTrace("cacaos_verified");const{p:r}=e,i=pa(r.resources),s=[na(r.iss)],o=ia(r.iss);if(i){const e=da(i),t=fa(i);h.push(...e),s.push(...t)}for(const e of s)l.push(`${e}:${o}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);let f;if(n.addTrace("create_authenticated_session_topic"),h?.length>0){f={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:oo(bm),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:Yu([...new Set(h)],[...new Set(l)]),transportType:s},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(d,{transportType:s})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(d,f),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,s)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:f}})),jm(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===Nd.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=Cu(i),a={type:1,receiverPublicKey:i,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:wm.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,rh("USER_DISCONNECTED"))})),jm(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return oa(t,r)})),jm(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),jm(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),jm(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,rh("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(ym).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,rh("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=Am),i&&this.client.events.emit("session_delete",{id:s,topic:r})})),jm(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,rh("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),jm(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=Am,this.client.events.emit("session_request_expire",{id:e}))})),jm(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),jm(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),jm(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,oo(wm.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),jm(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=Nd.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})})),jm(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||oo(wm.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})})),jm(this,"sendRequest",(async e=>{const{topic:t,method:r,params:n,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:u,tvf:h}=e,l=Yl(r,n,a);let d;const f=!!u;try{const e=f?Ou:Pu;d=await this.client.core.crypto.encode(t,l,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let p;if(_m.includes(r)){const e=Bu(JSON.stringify(l)),t=Bu(d);p=await this.client.core.verify.register({id:t,decryptedId:e})}const g=wm[r].req;if(g.attestation=p,s&&(g.ttl=s),o&&(g.id=o),this.client.core.history.set(t,l),f){const e=Wu(u,t,d);await i.g.Linking.openURL(e,this.client.name)}else{const e=wm[r].req;s&&(e.ttl=s),o&&(e.id=o),e.tvf=Lm(Mm({},h),{correlationId:l.id}),c?(e.internal=Lm(Mm({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,d,e)):this.client.core.relayer.publish(t,d,e).catch((e=>this.client.logger.error(e)))}return l.id})),jm(this,"sendResult",(async e=>{const{id:t,topic:r,result:n,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=Xl(t,n);let u;const h=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=h?Ou:Pu;u=await this.client.core.crypto.encode(r,c,Lm(Mm({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${r} failed`),e}let l,d;try{l=await this.client.core.history.get(r,t);const e=l.request;try{this.shouldSetTVF(e.method,e.params)&&(d=this.getTVFParams(t,e.params,n))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${r}, ${t}) failed`),e}if(h){const e=Wu(a,r,u);await i.g.Linking.openURL(e,this.client.name)}else{const e=l.request.method,n=wm[e].res;n.tvf=Lm(Mm({},d),{correlationId:t}),s?(n.internal=Lm(Mm({},n.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,u,n)):this.client.core.relayer.publish(r,u,n).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),jm(this,"sendError",(async e=>{const{id:t,topic:r,error:n,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=ed(t,n);let u;const h=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=h?Ou:Pu;u=await this.client.core.crypto.encode(r,c,Lm(Mm({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${r} failed`),e}let l;try{l=await this.client.core.history.get(r,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${r}, ${t}) failed`),e}if(h){const e=Wu(a,r,u);await i.g.Linking.openURL(e,this.client.name)}else{const e=l.request.method,t=o||wm[e].res;this.client.core.relayer.publish(r,u,t)}await this.client.core.history.resolve(c)})),jm(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;ao(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{ao(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),jm(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),jm(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),jm(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==Im){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Im;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=Am}else this.client.logger.info("Request queue already active, skipping...")})),jm(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),jm(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}})),jm(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=th("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),jm(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r)||!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))})),jm(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(Mm({},r.params));const a=s.expiryTimestamp||oo(wm.wc_sessionPropose.req.ttl),c=Mm({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const u=await this.getVerifyContext({attestationId:n,hash:Bu(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:u})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:wm.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),jm(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:n}=t;if(ld(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(n,{sessionTopic:c,pairingTopic:e,proposalId:n,publicKey:o});const u=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else if(dd(t)){await this.client.proposal.delete(n,rh("USER_DISCONNECTED"));const e=co("session_connect",n);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),jm(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:u}=t.params,h=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!h)return this.client.logger.error(`Pending session not found for topic ${e}`);const l=this.client.proposal.get(h.proposalId),d=Lm(Mm(Mm(Mm({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:l.requiredNamespaces,optionalNamespaces:l.optionalNamespaces,controller:i.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),{transportType:Nd.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(co("session_connect",h.proposalId),{session:d}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),jm(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;ld(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(co("session_approve",r),{})):dd(t)&&(await this.client.session.delete(e,rh("USER_DISCONNECTED")),this.events.emit(co("session_approve",r),{error:t.error}))})),jm(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=bh.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:rh("INVALID_UPDATE_REQUEST")});this.isValidUpdate(Mm({topic:e},r));try{bh.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw bh.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}})),jm(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),jm(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,n=co("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);ld(t)?this.events.emit(co("session_update",r),{}):dd(t)&&this.events.emit(co("session_update",r),{error:t.error})})),jm(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,oo(bm)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),jm(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,n=co("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);ld(t)?this.events.emit(co("session_extend",r),{}):dd(t)&&this.events.emit(co("session_extend",r),{error:t.error})})),jm(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),jm(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,n=co("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);ld(t)?this.events.emit(co("session_ping",r),{}):dd(t)&&this.events.emit(co("session_ping",r),{error:t.error})}),500)})),jm(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Od,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:rh("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),jm(this,"onSessionRequest",(async e=>{var t,r,n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:u,params:h}=s;try{await this.isValidRequest(Mm({topic:i},h));const e=this.client.session.get(i),s={id:u,topic:i,params:h,verifyContext:await this.getVerifyContext({attestationId:o,hash:Bu(JSON.stringify(Yl("wc_sessionRequest",h,u))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(s),c===Nd.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(s):(this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue())}catch(e){await this.sendError({id:u,topic:i,error:e}),this.client.logger.error(e)}})),jm(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,n=co("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);ld(t)?this.events.emit(co("session_request",r),{result:t.result}):dd(t)&&this.events.emit(co("session_request",r),{error:t.error})})),jm(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=bh.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(Mm({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),bh.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),jm(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),ld(t)?this.events.emit(co("session_request",r),{result:t.result}):dd(t)&&this.events.emit(co("session_request",r),{error:t.error})})),jm(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,u=await this.getVerifyContext({attestationId:i,hash:Bu(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:o}),h={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:u,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:h,pairingTopic:r,transportType:o}),o===Nd.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:u})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(n.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:wm.wc_sessionAuthenticate.autoReject,appLink:s})}})),jm(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),jm(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=Am,this.processSessionRequestQueue()}),(0,B.toMiliseconds)(this.requestQueueDelay))})),jm(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=co("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(co("session_request",e.request.id),{error:t})}))})),jm(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===Im)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=Im,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),jm(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),jm(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:Yl("wc_sessionPropose",Lm(Mm({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),jm(this,"isValidConnect",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s,relays:o}=e;if(sh(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&nh(e)&&e.length&&e.forEach((e=>{t=dh(e)})):t=!0,t}(o)){const{message:e}=th("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!sh(r)&&0!==ih(r)&&this.validateNamespaces(r,"requiredNamespaces"),!sh(n)&&0!==ih(n)&&this.validateNamespaces(n,"optionalNamespaces"),sh(i)||this.validateSessionProps(i,"sessionProperties"),!sh(s)){this.validateSessionProps(s,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(n||{}));if(!Object.keys(s).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(s)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),jm(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let n=null;if(e&&ih(e)){const i=hh(e,t);i&&(n=i);const s=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=function(e,t,r){let n=null;return nh(t)&&t.length?t.forEach((e=>{n||ch(e)||(n=rh("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):ch(e)||(n=rh("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,Ns(e,i),`${t} ${r}`);s&&(n=s)})),n}(e,t,r);s&&(n=s)}else n=th("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)})),jm(this,"isValidApprove",(async e=>{if(!fh(e))throw new Error(th("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=lh(r,"approve()");if(a)throw new Error(a.message);const c=gh(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!oh(n,!0)){const{message:e}=th("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}if(sh(i)||this.validateSessionProps(i,"sessionProperties"),!sh(s)){this.validateSessionProps(s,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(s).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),jm(this,"isValidReject",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&ah(e.code,!1)&&e.message&&oh(e.message,!1))}(r)){const{message:e}=th("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),jm(this,"isValidSessionSettleRequest",(e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!dh(t)){const{message:e}=th("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e){let t=null;return oh(e?.publicKey,!1)||(t=th("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(s)throw new Error(s.message);const o=lh(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(ao(i)){const{message:e}=th("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),jm(this,"isValidUpdate",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=lh(r,"update()");if(i)throw new Error(i.message);const s=gh(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)})),jm(this,"isValidExtend",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),jm(this,"isValidRequest",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!ph(s,n)){const{message:e}=th("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(sh(e)||!oh(e.method,!1))}(r)){const{message:e}=th("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!oh(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Qu(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(s,n,r.method)){const{message:e}=th("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return ah(e,!1)&&e<=t.max&&e>=t.min}(i,Em)){const{message:e}=th("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${Em.min} and ${Em.max}`);throw new Error(e)}})),jm(this,"isValidRespond",(async e=>{var t;if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(sh(e)||sh(e.result)&&sh(e.error)||!ah(e.id,!1)||!oh(e.jsonrpc,!1))}(n)){const{message:e}=th("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}})),jm(this,"isValidPing",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),jm(this,"isValidEmit",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!ph(i,n)){const{message:e}=th("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(sh(e)||!oh(e.name,!1))}(r)){const{message:e}=th("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!oh(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Qu(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=th("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),jm(this,"isValidDisconnect",(async e=>{if(!fh(e)){const{message:t}=th("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),jm(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!oh(r,!1))throw new Error("uri is required parameter");if(!oh(n,!1))throw new Error("domain is required parameter");if(!oh(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>Bs(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Bs(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),jm(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,o={verified:{verifyUrl:i.verifyUrl||Qd,validation:"UNKNOWN",origin:i.url||""}};try{if(s===Nd.link_mode){const e=this.getAppLinkIfEnabled(i,s);return o.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),jm(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,n)=>{if(null==r){const{message:i}=th("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw new Error(i)}}))})),jm(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),jm(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),jm(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=th("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),jm(this,"isLinkModeEnabled",((e,t)=>{var r,n,s,o,a,c,u,h,l;return!(!e||t!==Nd.link_mode)&&!0===(null==(n=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:n.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(u=e?.redirect)?void 0:u.universal)&&""!==(null==(h=e?.redirect)?void 0:h.universal)&&!0===(null==(l=e?.redirect)?void 0:l.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==i.g?void 0:i.g.Linking)<"u"})),jm(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),jm(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=ho(e,"topic")||"",r=decodeURIComponent(ho(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:Nd.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})})),jm(this,"registerLinkModeListeners",(async()=>{var e;if(fo()||Ks()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==i.g?void 0:i.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),jm(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(xm).includes(r.method)})),jm(this,"getTVFParams",((e,t,r)=>{var n,i;try{const s=t.request.method,o=this.extractTxHashesFromResult(s,r);return Lm(Mm({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(i=null==(n=t.request.params)?void 0:n[0])?void 0:i.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),jm(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1})),jm(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[xm[e].key];if(nh(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const n=r[0];if(0===n)throw new Error("No signatures found");const i=1+64*n;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Cs.from(e,"base64").slice(1,65);return Te.encode(s)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=th("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_d,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(Pm)?this.client.auth.authKeys.get(Pm):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===Nd.link_mode?Ou:Pu});ud(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:Bu(r)})):hd(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(Kd,(async e=>{const{topic:t,id:r}=so(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,th("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,th("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(Fd,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(qd,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!oh(e,!1)){const{message:t}=th("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=th("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ao(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=th("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!oh(e,!1)){const{message:t}=th("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=th("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(ao(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=th("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=th("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(oh(e,!1)){const{message:t}=th("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=th("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=th("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=th("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(ao(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=th("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Um extends Mg{constructor(e,t){super(e,t,"proposal",gm),this.core=e,this.logger=t}}class Fm extends Mg{constructor(e,t){super(e,t,"session",gm),this.core=e,this.logger=t}}class qm extends Mg{constructor(e,t){super(e,t,"request",gm,(e=>e.id)),this.core=e,this.logger=t}}class Hm extends Mg{constructor(e,t){super(e,t,"authKeys",Sm,(()=>Pm)),this.core=e,this.logger=t}}class zm extends Mg{constructor(e,t){super(e,t,"pairingTopics",Sm),this.core=e,this.logger=t}}class $m extends Mg{constructor(e,t){super(e,t,"requests",Sm,(e=>e.id)),this.core=e,this.logger=t}}var Gm=Object.defineProperty,Vm=(e,t,r)=>((e,t,r)=>t in e?Gm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Km{constructor(e,t){this.core=e,this.logger=t,Vm(this,"authKeys"),Vm(this,"pairingTopics"),Vm(this,"requests"),this.authKeys=new Hm(this.core,this.logger),this.pairingTopics=new zm(this.core,this.logger),this.requests=new $m(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Wm=Object.defineProperty,Qm=(e,t,r)=>((e,t,r)=>t in e?Wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Zm extends Ll{constructor(e){super(e),Qm(this,"protocol","wc"),Qm(this,"version",2),Qm(this,"name",mm),Qm(this,"metadata"),Qm(this,"core"),Qm(this,"logger"),Qm(this,"events",new w.EventEmitter),Qm(this,"engine"),Qm(this,"session"),Qm(this,"proposal"),Qm(this,"pendingRequest"),Qm(this,"auth"),Qm(this,"signConfig"),Qm(this,"on",((e,t)=>this.events.on(e,t))),Qm(this,"once",((e,t)=>this.events.once(e,t))),Qm(this,"off",((e,t)=>this.events.off(e,t))),Qm(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Qm(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),Qm(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),Qm(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||mm,this.metadata=function(e){var t,r;const n=Js();try{return null!=e&&e.url&&n.url&&e.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter((e=>""!==e))),((e,t)=>Ls(e,js(t)))(Hs(Hs({},n),e),{url:e?.url||n.url,name:e?.name||n.name,description:e?.description||n.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(t){return console.warn("Error populating app metadata",t),e||n}}(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:el()(ml({level:e?.logger||"error"}));this.core=e?.core||new fm(e),this.logger=vl(t,this.name),this.session=new Fm(this.core,this.logger),this.proposal=new Um(this.core,this.logger),this.pendingRequest=new qm(this.core,this.logger),this.engine=new Dm(this),this.auth=new Km(this.core,this.logger)}static async init(e){const t=new Zm(e);return await t.initialize(),t}get context(){return yl(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,B.toMiliseconds)(B.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Jm=i(4945),Ym=i.n(Jm),Xm=Object.defineProperty,ey=Object.defineProperties,ty=Object.getOwnPropertyDescriptors,ry=Object.getOwnPropertySymbols,ny=Object.prototype.hasOwnProperty,iy=Object.prototype.propertyIsEnumerable,sy=(e,t,r)=>t in e?Xm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oy=(e,t)=>{for(var r in t||(t={}))ny.call(t,r)&&sy(e,r,t[r]);if(ry)for(var r of ry(t))iy.call(t,r)&&sy(e,r,t[r]);return e},ay=(e,t)=>ey(e,ty(t));const cy={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class uy{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new w.EventEmitter,this.isAvailable=!1,this.registering=!1,!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Be(e),r=await(await Ym()(this.url,ay(oy({},cy),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Be({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ym()(e,ay(oy({},cy),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Ce(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=ed(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return Wl(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var hy=i(8287).hp;const ly="error",dy="wc@2:universal_provider:",fy="https://rpc.walletconnect.org/v1/",py="generic",gy=`${fy}bundler`,my="default_chain_changed";function yy(){}function vy(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function by(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wy(e){return"object"==typeof e&&null!==e}function Ey(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Ay(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Iy="[object String]",xy="[object Number]",_y="[object Boolean]",Sy="[object Arguments]";function Py(e,t,r,n=new Map,i=void 0){const s=i?.(e,t,r,n);if(null!=s)return s;if(vy(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=Py(e[s],s,r,n,i);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,o]of e)t.set(s,Py(o,s,r,n,i));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add(Py(s,void 0,r,n,i));return t}if(typeof hy<"u"&&hy.isBuffer(e))return e.subarray();if(by(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=Py(e[s],s,r,n,i);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),Oy(t,e,r,n,i),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),Oy(t,e,r,n,i),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),Oy(t,e,r,n,i),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,Oy(t,e,r,n,i),t}if("object"==typeof e&&function(e){switch(Ay(e)){case Sy:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case _y:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case xy:case"[object Object]":case"[object RegExp]":case"[object Set]":case Iy:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),Oy(t,e,r,n,i),t}return e}function Oy(e,t,r=e,n,i){const s=[...Object.keys(t),...Ey(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=Py(t[a],a,r,n,i))}}function ky(e){return function(e,t){return function(e,t){return Py(e,void 0,e,new Map,t)}(e,((r,n,i,s)=>{const o=t?.(r,n,i,s);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case xy:case Iy:case _y:{const t=new e.constructor(e?.valueOf());return Oy(t,e),t}case Sy:{const t={};return Oy(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}(e)}function Ty(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===Ay(e)}function Cy(e){return by(e)}function By(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ry(e,t,r,n){if(vy(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(n.has(t))return function(e){if(vy(e))return e;if(Array.isArray(e)||by(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){const t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const r=Object.create(t);return Object.assign(r,e)}return e}(n.get(t));if(n.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const i=[...Object.keys(t),...Ey(t)];for(let s=0;s<i.length;s++){const o=i[s];let a=t[o],c=e[o];if(Ty(a)&&(a={...a}),Ty(c)&&(c={...c}),typeof hy<"u"&&hy.isBuffer(a)&&(a=ky(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){const n=t[r];e[n]=c[n]}c=e}else c=[];const u=r(c,a,o,e,t,n);null!=u?e[o]=u:Array.isArray(a)||wy(c)&&wy(a)?e[o]=Ry(c,a,r,n):null==c&&By(a)?e[o]=Ry({},a,r,n):null==c&&Cy(a)?e[o]=ky(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}var Ny=Object.defineProperty,My=Object.defineProperties,Ly=Object.getOwnPropertyDescriptors,jy=Object.getOwnPropertySymbols,Dy=Object.prototype.hasOwnProperty,Uy=Object.prototype.propertyIsEnumerable,Fy=(e,t,r)=>t in e?Ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qy=(e,t)=>{for(var r in t||(t={}))Dy.call(t,r)&&Fy(e,r,t[r]);if(jy)for(var r of jy(t))Uy.call(t,r)&&Fy(e,r,t[r]);return e},Hy=(e,t)=>My(e,Ly(t));function zy(e,t,r){var n;const i=Bs(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${fy}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function $y(e){return e.includes(":")?e.split(":")[1]:e}function Gy(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function Vy(e={},t={}){return function(e,...t){return function(e,...t){const r=t.slice(0,-1),n=t[t.length-1];let i=e;for(let e=0;e<r.length;e++)i=Ry(i,r[e],n,new Map);return i}(e,...t,yy)}(Ky(e),Ky(t))}function Ky(e){var t,r,n,i;const s={};if(!ih(e))return s;for(const[o,a]of Object.entries(e)){const e=Zu(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],h=a.rpcMap||{},l=Ju(o);s[l]=Hy(qy(qy({},s[l]),a),{chains:uo(e,null==(t=s[l])?void 0:t.chains),methods:uo(c,null==(r=s[l])?void 0:r.methods),events:uo(u,null==(n=s[l])?void 0:n.events),rpcMap:qy(qy({},h),null==(i=s[l])?void 0:i.rpcMap)})}return s}function Wy(e){return e.includes(":")?e.split(":")[2]:e}function Qy(e){const t={};for(const[r,n]of Object.entries(e)){const e=n.methods||[],i=n.events||[],s=n.accounts||[],o=Zu(r)?[r]:n.chains?n.chains:Gy(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}function Zy(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const Jy={},Yy=e=>Jy[e],Xy=(e,t)=>{Jy[e]=t};var ev=Object.defineProperty,tv=(e,t,r)=>((e,t,r)=>t in e?ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class rv{constructor(e){tv(this,"name","polkadot"),tv(this,"client"),tv(this,"httpProviders"),tv(this,"events"),tv(this,"namespace"),tv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$y(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var nv=Object.defineProperty,iv=Object.defineProperties,sv=Object.getOwnPropertyDescriptors,ov=Object.getOwnPropertySymbols,av=Object.prototype.hasOwnProperty,cv=Object.prototype.propertyIsEnumerable,uv=(e,t,r)=>t in e?nv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hv=(e,t)=>{for(var r in t||(t={}))av.call(t,r)&&uv(e,r,t[r]);if(ov)for(var r of ov(t))cv.call(t,r)&&uv(e,r,t[r]);return e},lv=(e,t)=>iv(e,sv(t)),dv=(e,t,r)=>uv(e,"symbol"!=typeof t?t+"":t,r);class fv{constructor(e){dv(this,"name","eip155"),dv(this,"client"),dv(this,"chainId"),dv(this,"namespace"),dv(this,"httpProviders"),dv(this,"events"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(my,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||zy(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=parseInt($y(t));e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n;const i=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(e.topic),o=(null==(n=s?.sessionProperties)?void 0:n.capabilities)||{};if(null!=o&&o[i])return o?.[i];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:lv(hv({},s.sessionProperties||{}),{capabilities:lv(hv({},o||{}),{[i]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;const n=this.client.session.get(e.topic),i=null==(t=n.sessionProperties)?void 0:t.bundler_name;if(i){const t=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const s=null==(r=n.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Yl("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${gy}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var pv=Object.defineProperty,gv=(e,t,r)=>((e,t,r)=>t in e?pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class mv{constructor(e){gv(this,"name","solana"),gv(this,"client"),gv(this,"httpProviders"),gv(this,"events"),gv(this,"namespace"),gv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$y(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var yv=Object.defineProperty,vv=(e,t,r)=>((e,t,r)=>t in e?yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class bv{constructor(e){vv(this,"name","cosmos"),vv(this,"client"),vv(this,"httpProviders"),vv(this,"events"),vv(this,"namespace"),vv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$y(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var wv=Object.defineProperty,Ev=(e,t,r)=>((e,t,r)=>t in e?wv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Av{constructor(e){Ev(this,"name","algorand"),Ev(this,"client"),Ev(this,"httpProviders"),Ev(this,"events"),Ev(this,"namespace"),Ev(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||zy(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(my,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new fd(new uy(r,Yy("disableProviderPing")))}}var Iv=Object.defineProperty,xv=(e,t,r)=>((e,t,r)=>t in e?Iv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class _v{constructor(e){xv(this,"name","cip34"),xv(this,"client"),xv(this,"httpProviders"),xv(this,"events"),xv(this,"namespace"),xv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),n=$y(t);e[n]=this.createHttpProvider(n,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var Sv=Object.defineProperty,Pv=(e,t,r)=>((e,t,r)=>t in e?Sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Ov{constructor(e){Pv(this,"name","elrond"),Pv(this,"client"),Pv(this,"httpProviders"),Pv(this,"events"),Pv(this,"namespace"),Pv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$y(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var kv=Object.defineProperty,Tv=(e,t,r)=>((e,t,r)=>t in e?kv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Cv{constructor(e){Tv(this,"name","multiversx"),Tv(this,"client"),Tv(this,"httpProviders"),Tv(this,"events"),Tv(this,"namespace"),Tv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$y(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var Bv=Object.defineProperty,Rv=(e,t,r)=>((e,t,r)=>t in e?Bv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Nv{constructor(e){Rv(this,"name","near"),Rv(this,"client"),Rv(this,"httpProviders"),Rv(this,"events"),Rv(this,"namespace"),Rv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||zy(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(my,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace);return typeof r>"u"?void 0:new fd(new uy(r,Yy("disableProviderPing")))}}var Mv=Object.defineProperty,Lv=(e,t,r)=>((e,t,r)=>t in e?Mv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class jv{constructor(e){Lv(this,"name","tezos"),Lv(this,"client"),Lv(this,"httpProviders"),Lv(this,"events"),Lv(this,"namespace"),Lv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||zy(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(my,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace);return typeof r>"u"?void 0:new fd(new uy(r))}}var Dv=Object.defineProperty,Uv=(e,t,r)=>((e,t,r)=>t in e?Dv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Fv{constructor(e){Uv(this,"name",py),Uv(this,"client"),Uv(this,"httpProviders"),Uv(this,"events"),Uv(this,"namespace"),Uv(this,"chainId"),this.namespace=e.namespace,this.events=Yy("events"),this.client=Yy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(my,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=Bs(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||zy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new fd(new uy(r,Yy("disableProviderPing")))}}var qv=Object.defineProperty,Hv=Object.defineProperties,zv=Object.getOwnPropertyDescriptors,$v=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,Kv=(e,t,r)=>t in e?qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wv=(e,t)=>{for(var r in t||(t={}))Gv.call(t,r)&&Kv(e,r,t[r]);if($v)for(var r of $v(t))Vv.call(t,r)&&Kv(e,r,t[r]);return e},Qv=(e,t)=>Hv(e,zv(t)),Zv=(e,t,r)=>Kv(e,"symbol"!=typeof t?t+"":t,r);class Jv{constructor(e){Zv(this,"client"),Zv(this,"namespaces"),Zv(this,"optionalNamespaces"),Zv(this,"sessionProperties"),Zv(this,"scopedProperties"),Zv(this,"events",new(E())),Zv(this,"rpcProviders",{}),Zv(this,"session"),Zv(this,"providerOpts"),Zv(this,"logger"),Zv(this,"uri"),Zv(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:el()(ml({level:e?.logger||ly})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Jv(e);return await t.initialize(),t}async request(e,t,r){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Wv({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){const i=(new Date).getTime();this.request(e,r,n).then((e=>t(null,Xl(i,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:rh("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const e=Qy(this.session.namespaces);this.namespaces=Vy(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const n=await r();this.session=n;const i=Qy(n.namespaces);return this.namespaces=Vy(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,n]=this.validateChain(e),i=this.getProvider(r);i.name===py?i.setDefaultChain(`${r}:${n}`,t):i.setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(nh(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await Zm.init({core:this.providerOpts.core,logger:this.providerOpts.logger||ly,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>Ju(e))))];Xy("client",this.client),Xy("events",this.events),Xy("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=function(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const n=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;n.push(...r)})),n}(e,this.session),r=Gy(t),n=Vy(this.namespaces,this.optionalNamespaces),i=Qv(Wv({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new fv({namespace:i});break;case"algorand":this.rpcProviders[e]=new Av({namespace:i});break;case"solana":this.rpcProviders[e]=new mv({namespace:i});break;case"cosmos":this.rpcProviders[e]=new bv({namespace:i});break;case"polkadot":this.rpcProviders[e]=new rv({namespace:i});break;case"cip34":this.rpcProviders[e]=new _v({namespace:i});break;case"elrond":this.rpcProviders[e]=new Ov({namespace:i});break;case"multiversx":this.rpcProviders[e]=new Cv({namespace:i});break;case"near":this.rpcProviders[e]=new Nv({namespace:i});break;case"tezos":this.rpcProviders[e]=new jv({namespace:i});break;default:this.rpcProviders[py]?this.rpcProviders[py].updateNamespace(i):this.rpcProviders[py]=new Fv({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var t;const{params:r,topic:n}=e;if(n!==(null==(t=this.session)?void 0:t.topic))return;const{event:i}=r;if("accountsChanged"===i.name){const e=i.data;e&&nh(e)&&this.events.emit("accountsChanged",e.map(Wy))}else if("chainChanged"===i.name){const e=r.chainId,t=r.event.data,n=Ju(e),i=Zy(e)!==Zy(t)?`${n}:${Zy(t)}`:e;this.onChainChanged(i)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r,n;if(e!==(null==(r=this.session)?void 0:r.topic))return;const{namespaces:i}=t,s=null==(n=this.client)?void 0:n.session.get(e);this.session=Qv(Wv({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Qv(Wv({},rh("USER_DISCONNECTED")),{data:e.topic})))})),this.on(my,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[py]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:n,scopedProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.scopedProperties=i}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>Ju(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const n=Ju(Object.keys(this.namespaces)[0]);return[n,this.rpcProviders[n].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,n]=this.validateChain(e);if(!n)return;this.updateNamespaceChain(r,n),this.events.emit("chainChanged",n);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(n),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var n,i;try{if(t===r)return;const s=null==(i=null==(n=this.session)?void 0:n.namespaces[e])?void 0:i.accounts;if(!s)return;const o=s.filter((e=>e.includes(`${r}:`))).map(Wy);if(!nh(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,n={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=n}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const n=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${dy}/${e}${n}`,t)}async getFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${dy}/${e}${r}`)}async deleteFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${dy}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(dy)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}const Yv=Jv,Xv=["eth_sendTransaction","personal_sign"],eb=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],tb=["chainChanged","accountsChanged"],rb=["chainChanged","accountsChanged","message","disconnect","connect"];var nb=Object.defineProperty,ib=Object.defineProperties,sb=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,ab=Object.prototype.hasOwnProperty,cb=Object.prototype.propertyIsEnumerable,ub=(e,t,r)=>t in e?nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hb=(e,t)=>{for(var r in t||(t={}))ab.call(t,r)&&ub(e,r,t[r]);if(ob)for(var r of ob(t))cb.call(t,r)&&ub(e,r,t[r]);return e},lb=(e,t)=>ib(e,sb(t)),db=(e,t,r)=>ub(e,"symbol"!=typeof t?t+"":t,r);function fb(e){return Number(e[0].split(":")[1])}function pb(e){return`0x${e.toString(16)}`}class gb{constructor(){db(this,"events",new w.EventEmitter),db(this,"namespace","eip155"),db(this,"accounts",[]),db(this,"signer"),db(this,"chainId",1),db(this,"modal"),db(this,"rpc"),db(this,"STORAGE_KEY","wc@2:ethereum_provider:"),db(this,"on",((e,t)=>(this.events.on(e,t),this))),db(this,"once",((e,t)=>(this.events.once(e,t),this))),db(this,"removeListener",((e,t)=>(this.events.removeListener(e,t),this))),db(this,"off",((e,t)=>(this.events.off(e,t),this))),db(this,"parseAccount",(e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e)),this.signer={},this.rpc={}}static async init(e){const t=new gb;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:r}=function(e){const{chains:t,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=e;if(!nh(t))throw new Error("Invalid chains");const c={chains:t,methods:n||Xv,events:s||tb,rpcMap:hb({},t.length?{[fb(t)]:a[fb(t)]}:{})},u=s?.filter((e=>!tb.includes(e))),h=n?.filter((e=>!Xv.includes(e)));if(!(r||o||i||null!=u&&u.length||null!=h&&h.length))return{required:t.length?c:void 0};const l={chains:[...new Set(u?.length&&h?.length||!r?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(null!=i&&i.length?i:eb))],events:[...new Set(c.events.concat(null!=o&&o.length?o:rb))],rpcMap:a};return{required:t.length?c:void 0,optional:r.length?l:void 0}}(this.rpc);try{const n=await new Promise((async(n,i)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))})));const o=null!=e&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(lb(hb({namespaces:hb({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic,scopedProperties:o})).then((e=>{n(e)})).catch((e=>{i(new Error(e.message))}))}));if(!n)return;const i=Rs(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:pb(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const r=await new Promise((async(r,n)=>{var i;this.rpc.showQrModal&&(null==(i=this.modal)||i.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),n(new Error("Connection request reset. Please try again.")))}))),await this.signer.authenticate(lb(hb({},e),{chains:this.rpc.chains}),t).then((e=>{r(e)})).catch((e=>{n(new Error(e.message))}))})),n=r.session;if(n){const e=Rs(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:pb(this.chainId)})}return r}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(e=>{const{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)})),this.signer.on("accountsChanged",(e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)})),this.signer.on("chainChanged",(e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",pb(this.chainId)),this.persist()})),this.signer.on("session_update",(e=>{this.events.emit("session_update",e)})),this.signer.on("session_delete",(e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",lb(hb({},rh("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)}))}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter((e=>this.isCompatibleChainId(e))).map((e=>this.parseChainId(e)));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",pb(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,n]=e.split(":");return{chainId:`${t}:${r}`,address:n}}setAccounts(e){this.accounts=e.filter((e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId)).map((e=>this.parseAccountId(e).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const n=null!=(t=e?.chains)?t:[],i=null!=(r=e?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=n.length?e?.methods||Xv:[],a=n.length?e?.events||tb:[],c=e?.optionalMethods||[],u=e?.optionalEvents||[],h=e?.rpcMap||this.buildRpcMap(s,e.projectId),l=e?.qrModalOptions||void 0;return{chains:n?.map((e=>this.formatChainId(e))),optionalChains:i.map((e=>this.formatChainId(e))),methods:o,events:a,optionalMethods:c,optionalEvents:u,rpcMap:h,showQrModal:!(null==e||!e.showQrModal),qrModalOptions:l,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach((e=>{r[e]=this.getRpcUrl(e,t)})),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?fb(this.rpc.chains):fb(this.rpc.optionalChains),this.signer=await Yv.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:t}=await i.e(940).then(i.bind(i,940));e=t}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(hb({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:n}=e;t&&nh(t)&&(this.rpc.chains=t.map((e=>this.formatChainId(e))),t.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))),r&&nh(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map((e=>this.formatChainId(e))),r.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch((e=>this.signer.logger.warn(e)))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map((e=>this.parseAccount(e)))}}const mb=gb;var yb,vb;!function(e){e.NUMBER="NUMBER_NUMBER",e.HEX="NUMBER_HEX",e.STR="NUMBER_STR",e.BIGINT="NUMBER_BIGINT"}(yb||(yb={})),function(e){e.HEX="BYTES_HEX",e.UINT8ARRAY="BYTES_UINT8ARRAY"}(vb||(vb={}));const bb={number:yb.BIGINT,bytes:vb.HEX},wb={number:yb.HEX,bytes:vb.HEX};var Eb,Ab,Ib;(Ib=Eb||(Eb={})).EARLIEST="earliest",Ib.LATEST="latest",Ib.PENDING="pending",Ib.SAFE="safe",Ib.FINALIZED="finalized",Ib.COMMITTED="committed",function(e){e.chainstart="chainstart",e.frontier="frontier",e.homestead="homestead",e.dao="dao",e.tangerineWhistle="tangerineWhistle",e.spuriousDragon="spuriousDragon",e.byzantium="byzantium",e.constantinople="constantinople",e.petersburg="petersburg",e.istanbul="istanbul",e.muirGlacier="muirGlacier",e.berlin="berlin",e.london="london",e.altair="altair",e.arrowGlacier="arrowGlacier",e.grayGlacier="grayGlacier",e.bellatrix="bellatrix",e.merge="merge",e.capella="capella",e.shanghai="shanghai"}(Ab||(Ab={}));const xb=Object.getPrototypeOf(Uint8Array);var _b=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Sb=Symbol.for("web3/base-provider");class Pb{static isWeb3Provider(e){return e instanceof Pb||Boolean(e&&e[Sb])}get[Sb](){return!0}send(e,t){this.request(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}sendAsync(e){return _b(this,void 0,void 0,(function*(){return this.request(e)}))}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(e){return _b(this,void 0,void 0,(function*(){return(yield t(e)).result}))},e.asEIP1193Provider=void 0,e}}class Ob extends Array{constructor(e){super(),this._accountProvider=e}}const kb=4001,Tb=4100,Cb=4200,Bb=4900,Rb=4901,Nb=-32700,Mb=-32600,Lb=-32601,jb=-32602,Db=-32603,Ub=-32e3,Fb=-32001,qb=-32002,Hb=-32003,zb=-32004,$b=-32005,Gb=-32006;class Vb extends Error{get innerError(){return this.cause instanceof Kb?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new Kb(e):this.cause=e}constructor(e,t){super(e),Array.isArray(t)?this.cause=new Kb(t):this.cause=t,this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}static convertToString(e,t=!1){if(null==e)return"undefined";const r=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class Kb extends Vb{constructor(e){super(`Multiple errors occurred: [${e.map((e=>e.message)).join("], [")}]`),this.code=208,this.errors=e}}class Wb extends Vb{constructor(e,t){super(`Invalid value given "${Vb.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class Qb extends Vb{constructor(){super("Private key must be 32 bytes."),this.code=701}}class Zb extends Vb{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=702}}class Jb extends Vb{constructor(e){super(`"${e}"`),this.code=802}}class Yb extends Vb{constructor(){super("Invalid key derivation function"),this.code=703}}class Xb extends Vb{constructor(){super("Key derivation failed - possibly wrong password"),this.code=704}}class ew extends Vb{constructor(){super("Unsupported key store version"),this.code=705}}class tw extends Vb{constructor(){super("Password cannot be empty"),this.code=706}}class rw extends Vb{constructor(){super("Initialization vector must be 16 bytes"),this.code=707}}class nw extends Vb{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=709}}class iw extends Vb{constructor(e,t){super(e),this.code=500,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class sw extends iw{constructor(e){super("Connection not open",e),this.code=503}}class ow extends iw{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=505}}class aw extends iw{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=506}}class cw extends iw{constructor(e){super(`Request already sent with following id: ${e}`),this.code=507}}class uw extends Vb{constructor(e,t){super(e),this.code=300,this.receipt=t}}class hw extends Vb{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=301}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class lw extends uw{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,"object"==typeof e.data){let t;t=e.data&&"originalError"in e.data?e.data.originalError:e.data,this.data=t.data,this.cause=new lw(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class dw extends uw{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=310,this.cause=new lw(e)}}class fw extends Wb{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.'),this.code=311}}class pw extends Vb{constructor(e){super(`ENS is not supported on network ${e}`),this.code=902}}class gw extends Vb{constructor(){super("Network not synced"),this.code=903}}class mw extends Vb{constructor(e){super(`Invalid parameters passed. "${void 0!==e?e:""}"`),this.hint=e,this.code=207}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class yw extends Vb{constructor(){super(...arguments),this.code=201}}class vw extends Vb{constructor(){super("The method you're trying to call is not implemented."),this.code=202}}class bw extends Vb{constructor(){super(...arguments),this.code=203}}class ww extends Vb{constructor(){super(...arguments),this.code=204}}class Ew extends Vb{constructor(e,t){super(e),this.code=205,this.props=null!=t?t:{}}}class Aw extends Vb{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=206}}class Iw extends Vb{constructor(){super(...arguments),this.code=600}}class xw extends Vb{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=602}}class _w extends Vb{constructor(){super(...arguments),this.code=603}}class Sw extends Vb{constructor(){super(...arguments),this.code=604}}class Pw extends Wb{constructor(){super(...arguments),this.code=801}}class Ow extends Vb{constructor(e,t){super(e),this.receipt=t,this.code=400}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class kw extends Vb{constructor(e,t,r,n){super("Transaction has been reverted by the EVM"+(void 0===r?"":`:\n ${Vb.convertToString(r)}`)),this.reason=e,this.signature=t,this.receipt=r,this.data=n,this.code=402}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class Tw extends kw{constructor(e,t,r,n,i,s,o){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=n,this.signature=i,this.receipt=s,this.data=o,this.code=438}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class Cw extends Ow{constructor(e){super("Transaction has been reverted by the EVM"+(void 0===e?"":`:\n ${Vb.convertToString(e)}`),e),this.code=405}}class Bw extends Ow{constructor(){super("Raw transaction undefined"),this.code=407}}class Rw extends Ow{constructor(){super("Transaction not found"),this.code=430}}class Nw extends Wb{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=408}}class Mw extends Wb{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=437}}class Lw extends Wb{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=410}}class jw extends Wb{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=411}}class Dw extends Wb{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=412}}class Uw extends Wb{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=435}}class Fw extends Wb{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=436}}class qw extends Wb{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=413}}class Hw extends Wb{constructor(e){var t,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${null!==(t=e.chain)&&void 0!==t?t:"undefined"}, "hardfork": ${null!==(r=e.hardfork)&&void 0!==r?r:"undefined"}`),this.code=414}}class zw extends Vb{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=440}}class $w extends Wb{constructor(e){var t,r,n,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,'"gas" is missing'),this.code=415,this.cause=new zw}}class Gw extends Vb{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=441}}class Vw extends Wb{constructor(e){var t,r,n,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=434,this.cause=new Gw}}class Kw extends Wb{constructor(e){var t,r;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=416}}class Ww extends Wb{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=417}}class Qw extends Wb{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=418}}class Zw extends Wb{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=419}}class Jw extends Wb{constructor(e){super(e,"invalid transaction object"),this.code=420}}class Yw extends Wb{constructor(e){var t,r;super(`nonce: ${null!==(t=e.nonce)&&void 0!==t?t:"undefined"}, chainId: ${null!==(r=e.chainId)&&void 0!==r?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=421}}class Xw extends Wb{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=422}}class eE extends Wb{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=423}}class tE extends Wb{constructor(e){super(e,"unsupported transaction type"),this.code=424}}class rE extends Wb{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.'),this.code=425}}class nE extends Vb{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!\n\tTransaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=431}}function iE(e){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!\n\tTransaction Hash: ${e?e.toString():"not available"}`}class sE extends Vb{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${iE(e.transactionHash)}`),this.code=426}}class oE extends Vb{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${iE(e.transactionHash)}`),this.code=432}}class aE extends Wb{constructor(e){var t,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${null===(t=e.blockHash)||void 0===t?void 0:t.toString()}, transactionHash: ${null===(r=e.transactionHash)||void 0===r?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=427}}class cE extends Wb{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=428}}class uE extends Vb{constructor(e){super(`Invalid signature. "${e}"`),this.code=433}}class hE extends Wb{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=429}}class lE extends Vb{constructor(e,t){const r=[];e.forEach((e=>r.push(e.keyword))),super(`The following properties are invalid for the transaction type ${t}: ${r.join(", ")}`),this.code=439}}class dE extends Wb{constructor(e){super(e,"can not parse as byte data"),this.code=1002}}class fE extends Wb{constructor(e){super(e,"can not parse as number data"),this.code=1003}}class pE extends Wb{constructor(e){super(e,"invalid ethereum address"),this.code=1005}}class gE extends Wb{constructor(e){super(e,"not a valid string"),this.code=1001}}class mE extends Wb{constructor(e){super(e,"invalid unit"),this.code=1004}}class yE extends Wb{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=1015}}class vE extends Wb{constructor(e){super(e,"can not be converted to hex"),this.code=1006}}class bE extends Wb{constructor(e){super(e,"value greater than the nibble width"),this.code=1014}}class wE extends Wb{constructor(e){super(e,"not a valid boolean."),this.code=1008}}class EE extends Wb{constructor(e){super(e,"not a valid unsigned integer."),this.code=1009}}class AE extends Wb{constructor(e){super(e,"invalid size given."),this.code=1010}}class IE extends Wb{constructor(e){super(e,"value is larger than size."),this.code=1011}}class xE extends Wb{constructor(e){super(e,"invalid string given"),this.code=1012}}const _E=e=>(e=>!(Array.isArray(e)||"2.0"!==e.jsonrpc||!e||void 0!==e.result&&null!==e.result||!("error"in e)||"number"!=typeof e.id&&"string"!=typeof e.id))(e)?e.error.message:"";class SE extends Vb{constructor(e,t,r,n){var i;let s;super(null!=t?t:`Returned error: ${Array.isArray(e)?e.map((e=>_E(e))).join(","):_E(e)}`),this.code=100,t||(this.data=Array.isArray(e)?e.map((e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.data})):null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.data),this.statusCode=n,this.request=r,"error"in e?s=e.error:e instanceof Array&&(s=e.filter((e=>e.error)).map((e=>e.error))),Array.isArray(s)&&s.length>0?this.cause=new Kb(s):this.cause=s}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class PE extends SE{constructor(e,t){let r;super(e,void 0,t),this.code=101,"error"in e?r=e.error:e instanceof Array&&(r=e.map((e=>e.error))),Array.isArray(r)?this.cause=new Kb(r):this.cause=r}}class OE extends Vb{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}class kE extends Vb{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}const TE="An Rpc error has occured with a code of *code*",CE={[Nb]:{message:"Parse error",description:"Invalid JSON"},[Mb]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[Lb]:{message:"Method not found",description:"Method does not exist\t"},[jb]:{message:"Invalid params",description:"Invalid method parameters"},[Db]:{message:"Internal error",description:"Internal JSON-RPC error"},[Ub]:{message:"Invalid input",description:"Missing or invalid parameters"},[Fb]:{message:"Resource not found",description:"Requested resource not found"},[qb]:{message:"Resource unavailable",description:"Requested resource not available"},[Hb]:{message:"Transaction rejected",description:"Transaction creation failed"},[zb]:{message:"Method not supported",description:"Method is not implemented"},[$b]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[Gb]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[kb]:{name:"User Rejected Request",message:"The user rejected the request."},[Tb]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[Cb]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[Bb]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[Rb]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class BE extends Vb{constructor(e,t){super(null!=t?t:TE.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class RE extends Vb{constructor(e,t){var r,n,i,s;if(e)if(null===(r=CE[e])||void 0===r?void 0:r.message)super(CE[e].message);else{const t=Object.keys(CE).find((t=>"string"==typeof t&&e>=parseInt(t.split("-")[0],10)&&e<=parseInt(t.split("-")[1],10)));super(null!==(i=null===(n=CE[null!=t?t:""])||void 0===n?void 0:n.message)&&void 0!==i?i:TE.replace("*code*",null!==(s=null==e?void 0:e.toString())&&void 0!==s?s:'""'))}else super();this.code=e,this.data=t}}const NE=new Map;NE.set(Nb,{error:class extends BE{constructor(e){super(e,CE[-32700].message),this.code=Nb}}}),NE.set(Mb,{error:class extends BE{constructor(e){super(e,CE[-32600].message),this.code=Mb}}}),NE.set(Lb,{error:class extends BE{constructor(e){super(e,CE[-32601].message),this.code=Lb}}}),NE.set(jb,{error:class extends BE{constructor(e){super(e,CE[-32602].message),this.code=jb}}}),NE.set(Db,{error:class extends BE{constructor(e){super(e,CE[-32603].message),this.code=Db}}}),NE.set(Ub,{error:class extends BE{constructor(e){super(e,CE[-32e3].message),this.code=Ub}}}),NE.set(zb,{error:class extends BE{constructor(e){super(e,CE[-32004].message),this.code=zb}}}),NE.set(qb,{error:class extends BE{constructor(e){super(e,CE[-32002].message),this.code=qb}}}),NE.set(Hb,{error:class extends BE{constructor(e){super(e,CE[-32003].message),this.code=Hb}}}),NE.set(Fb,{error:class extends BE{constructor(e){super(e,CE[-32001].message),this.code=Fb}}}),NE.set(Gb,{error:class extends BE{constructor(e){super(e,CE[-32006].message),this.code=Gb}}}),NE.set($b,{error:class extends BE{constructor(e){super(e,CE[-32005].message),this.code=$b}}});class ME extends Vb{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=1200}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function LE(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function jE(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function DE(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");LE(e.outputLen),LE(e.blockLen)}function UE(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function FE(e,t){jE(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const qE={number:LE,bool:function(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)},bytes:jE,hash:DE,exists:UE,output:FE},HE=BigInt(2**32-1),zE=BigInt(32);function $E(e,t=!1){return t?{h:Number(e&HE),l:Number(e>>zE&HE)}:{h:0|Number(e>>zE&HE),l:0|Number(e&HE)}}function GE(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=$E(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const VE=(e,t,r)=>e<<r|t>>>32-r,KE=(e,t,r)=>t<<r|e>>>32-r,WE=(e,t,r)=>t<<r-32|e>>>64-r,QE=(e,t,r)=>e<<r-32|t>>>64-r,ZE={fromBig:$E,split:GE,toBig:(e,t)=>BigInt(e>>>0)<<zE|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:VE,rotlSL:KE,rotlBH:WE,rotlBL:QE,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},JE=ZE,YE="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,XE=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),eA=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),tA=(e,t)=>e<<32-t|e>>>t,rA=(e,t)=>e<<t|e>>>32-t>>>0,nA=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function iA(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function sA(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function oA(e){return"string"==typeof e&&(e=sA(e)),jE(e),e}function aA(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];jE(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class cA{clone(){return this._cloneInto()}}const uA={}.toString;function hA(e,t){if(void 0!==t&&"[object Object]"!==uA.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function lA(e){const t=t=>e().update(oA(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function dA(e=32){if(YE&&"function"==typeof YE.getRandomValues)return YE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const fA=[],pA=[],gA=[],mA=BigInt(0),yA=BigInt(1),vA=BigInt(2),bA=BigInt(7),wA=BigInt(256),EA=BigInt(113);for(let e=0,t=yA,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],fA.push(2*(5*n+r)),pA.push((e+1)*(e+2)/2%64);let i=mA;for(let e=0;e<7;e++)t=(t<<yA^(t>>bA)*EA)%wA,t&vA&&(i^=yA<<(yA<<BigInt(e))-yA);gA.push(i)}const[AA,IA]=GE(gA,!0),xA=(e,t,r)=>r>32?WE(e,t,r):VE(e,t,r),_A=(e,t,r)=>r>32?QE(e,t,r):KE(e,t,r);class SA extends cA{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,LE(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=XE(this.state)}keccak(){nA||iA(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=xA(s,o,1)^r[n],c=_A(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=pA[r],s=xA(t,i,n),o=_A(t,i,n),a=fA[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=AA[n],e[1]^=IA[n]}r.fill(0)}(this.state32,this.rounds),nA||iA(this.state32),this.posOut=0,this.pos=0}update(e){UE(this);const{blockLen:t,state:r}=this,n=(e=oA(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){UE(this,!1),jE(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return LE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(FE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new SA(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const PA=(e,t,r)=>lA((()=>new SA(t,e,r))),OA=PA(1,144,28),kA=PA(1,136,32),TA=PA(1,104,48),CA=PA(1,72,64),BA=(qE.bool,qE.bytes);function RA(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)}function NA(e){return t=>(qE.bytes(t),e(t))}(()=>{const e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,t="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);t&&!e&&t("crypto")})(),NA(OA);const MA=(()=>{const e=NA(kA);return e.create=kA.create,e})();var LA,jA;NA(TA),NA(CA),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(LA||(LA={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(jA||(jA={}));const DA=LA.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),UA=e=>{switch(typeof e){case"undefined":return DA.undefined;case"string":return DA.string;case"number":return isNaN(e)?DA.nan:DA.number;case"boolean":return DA.boolean;case"function":return DA.function;case"bigint":return DA.bigint;case"symbol":return DA.symbol;case"object":return Array.isArray(e)?DA.array:null===e?DA.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?DA.promise:"undefined"!=typeof Map&&e instanceof Map?DA.map:"undefined"!=typeof Set&&e instanceof Set?DA.set:"undefined"!=typeof Date&&e instanceof Date?DA.date:DA.object;default:return DA.unknown}},FA=LA.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class qA extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof qA))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,LA.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}qA.create=e=>new qA(e);const HA=(e,t)=>{let r;switch(e.code){case FA.invalid_type:r=e.received===DA.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case FA.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,LA.jsonStringifyReplacer)}`;break;case FA.unrecognized_keys:r=`Unrecognized key(s) in object: ${LA.joinValues(e.keys,", ")}`;break;case FA.invalid_union:r="Invalid input";break;case FA.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${LA.joinValues(e.options)}`;break;case FA.invalid_enum_value:r=`Invalid enum value. Expected ${LA.joinValues(e.options)}, received '${e.received}'`;break;case FA.invalid_arguments:r="Invalid function arguments";break;case FA.invalid_return_type:r="Invalid function return type";break;case FA.invalid_date:r="Invalid date";break;case FA.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:LA.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case FA.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case FA.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case FA.custom:r="Invalid input";break;case FA.invalid_intersection_types:r="Intersection results could not be merged";break;case FA.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case FA.not_finite:r="Number must be finite";break;default:r=t.defaultError,LA.assertNever(e)}return{message:r}};let zA=HA;function $A(){return zA}const GA=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}};function VA(e,t){const r=$A(),n=GA({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===HA?void 0:HA].filter((e=>!!e))});e.common.issues.push(n)}class KA{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return WA;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return KA.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return WA;if("aborted"===i.status)return WA;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const WA=Object.freeze({status:"aborted"}),QA=e=>({status:"dirty",value:e}),ZA=e=>({status:"valid",value:e}),JA=e=>"aborted"===e.status,YA=e=>"dirty"===e.status,XA=e=>"valid"===e.status,eI=e=>"undefined"!=typeof Promise&&e instanceof Promise;function tI(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function rI(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}var nI,iI,sI;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(nI||(nI={}));class oI{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const aI=(e,t)=>{if(XA(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new qA(e.common.issues);return this._error=t,this._error}}};function cI(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}},description:i}}class uI{get description(){return this._def.description}_getType(e){return UA(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:UA(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new KA,ctx:{common:e.parent.common,data:e.data,parsedType:UA(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(eI(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:UA(e)},i=this._parseSync({data:e,path:n.path,parent:n});return aI(n,i)}"~validate"(e){var t,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:UA(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:n});return XA(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then((e=>XA(e)?{value:e.value}:{issues:n.common.issues}))}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:UA(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(eI(n)?n:Promise.resolve(n));return aI(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:FA.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new hx({schema:this,typeName:Ix.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return lx.create(this,this._def)}nullable(){return dx.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return GI.create(this)}promise(){return ux.create(this,this._def)}or(e){return WI.create([this,e],this._def)}and(e){return YI.create(this,e,this._def)}transform(e){return new hx({...cI(this._def),schema:this,typeName:Ix.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new fx({...cI(this._def),innerType:this,defaultValue:t,typeName:Ix.ZodDefault})}brand(){return new yx({typeName:Ix.ZodBranded,type:this,...cI(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new px({...cI(this._def),innerType:this,catchValue:t,typeName:Ix.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return vx.create(this,e)}readonly(){return bx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hI=/^c[^\s-]{8,}$/i,lI=/^[0-9a-z]+$/,dI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pI=/^[a-z0-9_-]{21}$/i,gI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,mI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let vI;const bI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,EI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,II=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_I="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",SI=new RegExp(`^${_I}$`);function PI(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function OI(e){let t=`${_I}T${PI(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function kI(e,t){return!("v4"!==t&&t||!bI.test(e))||!("v6"!==t&&t||!EI.test(e))}function TI(e,t){if(!gI.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)}catch(e){return!1}}function CI(e,t){return!("v4"!==t&&t||!wI.test(e))||!("v6"!==t&&t||!AI.test(e))}class BI extends uI{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==DA.string){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.string,received:t.parsedType}),WA}const t=new KA;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,s=e.data.length<n.value;(i||s)&&(r=this._getOrReturnCtx(e,r),i?VA(r,{code:FA.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):s&&VA(r,{code:FA.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)yI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"email",code:FA.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)vI||(vI=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),vI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"emoji",code:FA.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)fI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"uuid",code:FA.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)pI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"nanoid",code:FA.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)hI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"cuid",code:FA.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)lI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"cuid2",code:FA.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)dI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"ulid",code:FA.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),VA(r,{validation:"url",code:FA.invalid_string,message:n.message}),t.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"regex",code:FA.invalid_string,message:n.message}),t.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty()):"datetime"===n.kind?OI(n).test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:"datetime",message:n.message}),t.dirty()):"date"===n.kind?SI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:"date",message:n.message}),t.dirty()):"time"===n.kind?new RegExp(`^${PI(n)}$`).test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.invalid_string,validation:"time",message:n.message}),t.dirty()):"duration"===n.kind?mI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"duration",code:FA.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?kI(e.data,n.version)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"ip",code:FA.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?TI(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"jwt",code:FA.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?CI(e.data,n.version)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"cidr",code:FA.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?II.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"base64",code:FA.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?xI.test(e.data)||(r=this._getOrReturnCtx(e,r),VA(r,{validation:"base64url",code:FA.invalid_string,message:n.message}),t.dirty()):LA.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:FA.invalid_string,...nI.errToObj(r)})}_addCheck(e){return new BI({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nI.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nI.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nI.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nI.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nI.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nI.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nI.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nI.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nI.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...nI.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...nI.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nI.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...nI.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...nI.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...nI.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...nI.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...nI.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...nI.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...nI.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...nI.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...nI.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...nI.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...nI.errToObj(t)})}nonempty(e){return this.min(1,nI.errToObj(e))}trim(){return new BI({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new BI({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new BI({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function RI(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}BI.create=e=>{var t;return new BI({checks:[],typeName:Ix.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...cI(e)})};class NI extends uI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==DA.number){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.number,received:t.parsedType}),WA}let t;const r=new KA;for(const n of this._def.checks)"int"===n.kind?LA.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==RI(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.not_finite,message:n.message}),r.dirty()):LA.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,nI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,nI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,nI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,nI.toString(t))}setLimit(e,t,r,n){return new NI({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:nI.toString(n)}]})}_addCheck(e){return new NI({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nI.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:nI.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:nI.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nI.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nI.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&LA.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}NI.create=e=>new NI({checks:[],typeName:Ix.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...cI(e)});class MI extends uI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==DA.bigint)return this._getInvalidInput(e);let t;const r=new KA;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),VA(t,{code:FA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):LA.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.bigint,received:t.parsedType}),WA}gte(e,t){return this.setLimit("min",e,!0,nI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,nI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,nI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,nI.toString(t))}setLimit(e,t,r,n){return new MI({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:nI.toString(n)}]})}_addCheck(e){return new MI({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:nI.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}MI.create=e=>{var t;return new MI({checks:[],typeName:Ix.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...cI(e)})};class LI extends uI{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==DA.boolean){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.boolean,received:t.parsedType}),WA}return ZA(e.data)}}LI.create=e=>new LI({typeName:Ix.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...cI(e)});class jI extends uI{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==DA.date){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.date,received:t.parsedType}),WA}if(isNaN(e.data.getTime()))return VA(this._getOrReturnCtx(e),{code:FA.invalid_date}),WA;const t=new KA;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),VA(r,{code:FA.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):LA.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new jI({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:nI.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:nI.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}jI.create=e=>new jI({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ix.ZodDate,...cI(e)});class DI extends uI{_parse(e){if(this._getType(e)!==DA.symbol){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.symbol,received:t.parsedType}),WA}return ZA(e.data)}}DI.create=e=>new DI({typeName:Ix.ZodSymbol,...cI(e)});class UI extends uI{_parse(e){if(this._getType(e)!==DA.undefined){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.undefined,received:t.parsedType}),WA}return ZA(e.data)}}UI.create=e=>new UI({typeName:Ix.ZodUndefined,...cI(e)});class FI extends uI{_parse(e){if(this._getType(e)!==DA.null){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.null,received:t.parsedType}),WA}return ZA(e.data)}}FI.create=e=>new FI({typeName:Ix.ZodNull,...cI(e)});class qI extends uI{constructor(){super(...arguments),this._any=!0}_parse(e){return ZA(e.data)}}qI.create=e=>new qI({typeName:Ix.ZodAny,...cI(e)});class HI extends uI{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ZA(e.data)}}HI.create=e=>new HI({typeName:Ix.ZodUnknown,...cI(e)});class zI extends uI{_parse(e){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.never,received:t.parsedType}),WA}}zI.create=e=>new zI({typeName:Ix.ZodNever,...cI(e)});class $I extends uI{_parse(e){if(this._getType(e)!==DA.undefined){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.void,received:t.parsedType}),WA}return ZA(e.data)}}$I.create=e=>new $I({typeName:Ix.ZodVoid,...cI(e)});class GI extends uI{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==DA.array)return VA(t,{code:FA.invalid_type,expected:DA.array,received:t.parsedType}),WA;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(VA(t,{code:e?FA.too_big:FA.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(VA(t,{code:FA.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(VA(t,{code:FA.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new oI(t,e,t.path,r))))).then((e=>KA.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new oI(t,e,t.path,r))));return KA.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new GI({...this._def,minLength:{value:e,message:nI.toString(t)}})}max(e,t){return new GI({...this._def,maxLength:{value:e,message:nI.toString(t)}})}length(e,t){return new GI({...this._def,exactLength:{value:e,message:nI.toString(t)}})}nonempty(e){return this.min(1,e)}}function VI(e){if(e instanceof KI){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=lx.create(VI(n))}return new KI({...e._def,shape:()=>t})}return e instanceof GI?new GI({...e._def,type:VI(e.element)}):e instanceof lx?lx.create(VI(e.unwrap())):e instanceof dx?dx.create(VI(e.unwrap())):e instanceof XI?XI.create(e.items.map((e=>VI(e)))):e}GI.create=(e,t)=>new GI({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ix.ZodArray,...cI(t)});class KI extends uI{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=LA.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==DA.object){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.object,received:t.parsedType}),WA}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof zI&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new oI(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof zI){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(VA(r,{code:FA.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new oI(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>KA.mergeObjectSync(t,e))):KA.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return nI.errToObj,new KI({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=nI.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new KI({...this._def,unknownKeys:"strip"})}passthrough(){return new KI({...this._def,unknownKeys:"passthrough"})}extend(e){return new KI({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new KI({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ix.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new KI({...this._def,catchall:e})}pick(e){const t={};return LA.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new KI({...this._def,shape:()=>t})}omit(e){const t={};return LA.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new KI({...this._def,shape:()=>t})}deepPartial(){return VI(this)}partial(e){const t={};return LA.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new KI({...this._def,shape:()=>t})}required(e){const t={};return LA.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof lx;)e=e._def.innerType;t[r]=e}})),new KI({...this._def,shape:()=>t})}keyof(){return ox(LA.objectKeys(this.shape))}}KI.create=(e,t)=>new KI({shape:()=>e,unknownKeys:"strip",catchall:zI.create(),typeName:Ix.ZodObject,...cI(t)}),KI.strictCreate=(e,t)=>new KI({shape:()=>e,unknownKeys:"strict",catchall:zI.create(),typeName:Ix.ZodObject,...cI(t)}),KI.lazycreate=(e,t)=>new KI({shape:e,unknownKeys:"strip",catchall:zI.create(),typeName:Ix.ZodObject,...cI(t)});class WI extends uI{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new qA(e.ctx.common.issues)));return VA(t,{code:FA.invalid_union,unionErrors:r}),WA}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new qA(e)));return VA(t,{code:FA.invalid_union,unionErrors:i}),WA}}get options(){return this._def.options}}WI.create=(e,t)=>new WI({options:e,typeName:Ix.ZodUnion,...cI(t)});const QI=e=>e instanceof ix?QI(e.schema):e instanceof hx?QI(e.innerType()):e instanceof sx?[e.value]:e instanceof ax?e.options:e instanceof cx?LA.objectValues(e.enum):e instanceof fx?QI(e._def.innerType):e instanceof UI?[void 0]:e instanceof FI?[null]:e instanceof lx?[void 0,...QI(e.unwrap())]:e instanceof dx?[null,...QI(e.unwrap())]:e instanceof yx||e instanceof bx?QI(e.unwrap()):e instanceof px?QI(e._def.innerType):[];class ZI extends uI{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==DA.object)return VA(t,{code:FA.invalid_type,expected:DA.object,received:t.parsedType}),WA;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(VA(t,{code:FA.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),WA)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=QI(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new ZI({typeName:Ix.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...cI(r)})}}function JI(e,t){const r=UA(e),n=UA(t);if(e===t)return{valid:!0,data:e};if(r===DA.object&&n===DA.object){const r=LA.objectKeys(t),n=LA.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=JI(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===DA.array&&n===DA.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=JI(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===DA.date&&n===DA.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class YI extends uI{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(JA(e)||JA(n))return WA;const i=JI(e.value,n.value);return i.valid?((YA(e)||YA(n))&&t.dirty(),{status:t.value,value:i.data}):(VA(r,{code:FA.invalid_intersection_types}),WA)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}YI.create=(e,t,r)=>new YI({left:e,right:t,typeName:Ix.ZodIntersection,...cI(r)});class XI extends uI{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==DA.array)return VA(r,{code:FA.invalid_type,expected:DA.array,received:r.parsedType}),WA;if(r.data.length<this._def.items.length)return VA(r,{code:FA.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),WA;!this._def.rest&&r.data.length>this._def.items.length&&(VA(r,{code:FA.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new oI(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>KA.mergeArray(t,e))):KA.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new XI({...this._def,rest:e})}}XI.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new XI({items:e,typeName:Ix.ZodTuple,rest:null,...cI(t)})};class ex extends uI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==DA.object)return VA(r,{code:FA.invalid_type,expected:DA.object,received:r.parsedType}),WA;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new oI(r,e,r.path,e)),value:s._parse(new oI(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?KA.mergeObjectAsync(t,n):KA.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ex(t instanceof uI?{keyType:e,valueType:t,typeName:Ix.ZodRecord,...cI(r)}:{keyType:BI.create(),valueType:e,typeName:Ix.ZodRecord,...cI(t)})}}class tx extends uI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==DA.map)return VA(r,{code:FA.invalid_type,expected:DA.map,received:r.parsedType}),WA;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new oI(r,e,r.path,[s,"key"])),value:i._parse(new oI(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return WA;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return WA;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}tx.create=(e,t,r)=>new tx({valueType:t,keyType:e,typeName:Ix.ZodMap,...cI(r)});class rx extends uI{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==DA.set)return VA(r,{code:FA.invalid_type,expected:DA.set,received:r.parsedType}),WA;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(VA(r,{code:FA.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(VA(r,{code:FA.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return WA;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new oI(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new rx({...this._def,minSize:{value:e,message:nI.toString(t)}})}max(e,t){return new rx({...this._def,maxSize:{value:e,message:nI.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}rx.create=(e,t)=>new rx({valueType:e,minSize:null,maxSize:null,typeName:Ix.ZodSet,...cI(t)});class nx extends uI{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==DA.function)return VA(t,{code:FA.invalid_type,expected:DA.function,received:t.parsedType}),WA;function r(e,r){return GA({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$A(),HA].filter((e=>!!e)),issueData:{code:FA.invalid_arguments,argumentsError:r}})}function n(e,r){return GA({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$A(),HA].filter((e=>!!e)),issueData:{code:FA.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ux){const e=this;return ZA((async function(...t){const o=new qA([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),c=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw o.addIssue(n(c,e)),o}))}))}{const e=this;return ZA((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new qA([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new qA([n(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new nx({...this._def,args:XI.create(e).rest(HI.create())})}returns(e){return new nx({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new nx({args:e||XI.create([]).rest(HI.create()),returns:t||HI.create(),typeName:Ix.ZodFunction,...cI(r)})}}class ix extends uI{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ix.create=(e,t)=>new ix({getter:e,typeName:Ix.ZodLazy,...cI(t)});class sx extends uI{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return VA(t,{received:t.data,code:FA.invalid_literal,expected:this._def.value}),WA}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ox(e,t){return new ax({values:e,typeName:Ix.ZodEnum,...cI(t)})}sx.create=(e,t)=>new sx({value:e,typeName:Ix.ZodLiteral,...cI(t)});class ax extends uI{constructor(){super(...arguments),iI.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return VA(t,{expected:LA.joinValues(r),received:t.parsedType,code:FA.invalid_type}),WA}if(tI(this,iI,"f")||rI(this,iI,new Set(this._def.values),"f"),!tI(this,iI,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return VA(t,{received:t.data,code:FA.invalid_enum_value,options:r}),WA}return ZA(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ax.create(e,{...this._def,...t})}exclude(e,t=this._def){return ax.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}iI=new WeakMap,ax.create=ox;class cx extends uI{constructor(){super(...arguments),sI.set(this,void 0)}_parse(e){const t=LA.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==DA.string&&r.parsedType!==DA.number){const e=LA.objectValues(t);return VA(r,{expected:LA.joinValues(e),received:r.parsedType,code:FA.invalid_type}),WA}if(tI(this,sI,"f")||rI(this,sI,new Set(LA.getValidEnumValues(this._def.values)),"f"),!tI(this,sI,"f").has(e.data)){const e=LA.objectValues(t);return VA(r,{received:r.data,code:FA.invalid_enum_value,options:e}),WA}return ZA(e.data)}get enum(){return this._def.values}}sI=new WeakMap,cx.create=(e,t)=>new cx({values:e,typeName:Ix.ZodNativeEnum,...cI(t)});class ux extends uI{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==DA.promise&&!1===t.common.async)return VA(t,{code:FA.invalid_type,expected:DA.promise,received:t.parsedType}),WA;const r=t.parsedType===DA.promise?t.data:Promise.resolve(t.data);return ZA(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ux.create=(e,t)=>new ux({type:e,typeName:Ix.ZodPromise,...cI(t)});class hx extends uI{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ix.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{VA(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return WA;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?WA:"dirty"===n.status||"dirty"===t.value?QA(n.value):n}));{if("aborted"===t.value)return WA;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?WA:"dirty"===n.status||"dirty"===t.value?QA(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?WA:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?WA:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!XA(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>XA(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}LA.assertNever(n)}}hx.create=(e,t,r)=>new hx({schema:e,typeName:Ix.ZodEffects,effect:t,...cI(r)}),hx.createWithPreprocess=(e,t,r)=>new hx({schema:t,effect:{type:"preprocess",transform:e},typeName:Ix.ZodEffects,...cI(r)});class lx extends uI{_parse(e){return this._getType(e)===DA.undefined?ZA(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lx.create=(e,t)=>new lx({innerType:e,typeName:Ix.ZodOptional,...cI(t)});class dx extends uI{_parse(e){return this._getType(e)===DA.null?ZA(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dx.create=(e,t)=>new dx({innerType:e,typeName:Ix.ZodNullable,...cI(t)});class fx extends uI{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===DA.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}fx.create=(e,t)=>new fx({innerType:e,typeName:Ix.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...cI(t)});class px extends uI{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return eI(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new qA(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new qA(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}px.create=(e,t)=>new px({innerType:e,typeName:Ix.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...cI(t)});class gx extends uI{_parse(e){if(this._getType(e)!==DA.nan){const t=this._getOrReturnCtx(e);return VA(t,{code:FA.invalid_type,expected:DA.nan,received:t.parsedType}),WA}return{status:"valid",value:e.data}}}gx.create=e=>new gx({typeName:Ix.ZodNaN,...cI(e)});const mx=Symbol("zod_brand");class yx extends uI{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class vx extends uI{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?WA:"dirty"===e.status?(t.dirty(),QA(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?WA:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new vx({in:e,out:t,typeName:Ix.ZodPipeline})}}class bx extends uI{_parse(e){const t=this._def.innerType._parse(e),r=e=>(XA(e)&&(e.value=Object.freeze(e.value)),e);return eI(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function wx(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function Ex(e,t={},r){return e?qI.create().superRefine(((n,i)=>{var s,o;const a=e(n);if(a instanceof Promise)return a.then((e=>{var s,o;if(!e){const e=wx(t,n),a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:a})}}));if(!a){const e=wx(t,n),a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:a})}})):qI.create()}bx.create=(e,t)=>new bx({innerType:e,typeName:Ix.ZodReadonly,...cI(t)});const Ax={object:KI.lazycreate};var Ix;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ix||(Ix={}));const xx=BI.create,_x=NI.create,Sx=gx.create,Px=MI.create,Ox=LI.create,kx=jI.create,Tx=DI.create,Cx=UI.create,Bx=FI.create,Rx=qI.create,Nx=HI.create,Mx=zI.create,Lx=$I.create,jx=GI.create,Dx=KI.create,Ux=KI.strictCreate,Fx=WI.create,qx=ZI.create,Hx=YI.create,zx=XI.create,$x=ex.create,Gx=tx.create,Vx=rx.create,Kx=nx.create,Wx=ix.create,Qx=sx.create,Zx=ax.create,Jx=cx.create,Yx=ux.create,Xx=hx.create,e_=lx.create,t_=dx.create,r_=hx.createWithPreprocess,n_=vx.create,i_={string:e=>BI.create({...e,coerce:!0}),number:e=>NI.create({...e,coerce:!0}),boolean:e=>LI.create({...e,coerce:!0}),bigint:e=>MI.create({...e,coerce:!0}),date:e=>jI.create({...e,coerce:!0})},s_=WA;var o_=Object.freeze({__proto__:null,defaultErrorMap:HA,setErrorMap:function(e){zA=e},getErrorMap:$A,makeIssue:GA,EMPTY_PATH:[],addIssueToContext:VA,ParseStatus:KA,INVALID:WA,DIRTY:QA,OK:ZA,isAborted:JA,isDirty:YA,isValid:XA,isAsync:eI,get util(){return LA},get objectUtil(){return jA},ZodParsedType:DA,getParsedType:UA,ZodType:uI,datetimeRegex:OI,ZodString:BI,ZodNumber:NI,ZodBigInt:MI,ZodBoolean:LI,ZodDate:jI,ZodSymbol:DI,ZodUndefined:UI,ZodNull:FI,ZodAny:qI,ZodUnknown:HI,ZodNever:zI,ZodVoid:$I,ZodArray:GI,ZodObject:KI,ZodUnion:WI,ZodDiscriminatedUnion:ZI,ZodIntersection:YI,ZodTuple:XI,ZodRecord:ex,ZodMap:tx,ZodSet:rx,ZodFunction:nx,ZodLazy:ix,ZodLiteral:sx,ZodEnum:ax,ZodNativeEnum:cx,ZodPromise:ux,ZodEffects:hx,ZodTransformer:hx,ZodOptional:lx,ZodNullable:dx,ZodDefault:fx,ZodCatch:px,ZodNaN:gx,BRAND:mx,ZodBranded:yx,ZodPipeline:vx,ZodReadonly:bx,custom:Ex,Schema:uI,ZodSchema:uI,late:Ax,get ZodFirstPartyTypeKind(){return Ix},coerce:i_,any:Rx,array:jx,bigint:Px,boolean:Ox,date:kx,discriminatedUnion:qx,effect:Xx,enum:Zx,function:Kx,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ex((t=>t instanceof e),t),intersection:Hx,lazy:Wx,literal:Qx,map:Gx,nan:Sx,nativeEnum:Jx,never:Mx,null:Bx,nullable:t_,number:_x,object:Dx,oboolean:()=>Ox().optional(),onumber:()=>_x().optional(),optional:e_,ostring:()=>xx().optional(),pipeline:n_,preprocess:r_,promise:Yx,record:$x,set:Vx,strictObject:Ux,string:xx,symbol:Tx,transformer:Xx,tuple:zx,undefined:Cx,union:Fx,unknown:Nx,void:Lx,NEVER:s_,ZodIssueCode:FA,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:qA});const a_=e=>e.message?e.message:"unspecified error";class c_ extends Vb{constructor(e){super(),this.code=1100,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:\n${this._compileErrors().join("\n")}`}_compileErrors(){return this.errors.map(a_)}}const u_=["bool","int","uint","bytes","string","address","tuple"],h_=e=>"object"==typeof e&&"type"in e&&"name"in e,l_=e=>"string"==typeof e,d_=e=>"string"==typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e);function f_(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||void 0!==t&&t>0&&e.length!==2+2*t)}const p_=e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(e);function g_(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return e.startsWith("0x")}const m_=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString()}`)},y_=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],v_=e=>{let t,r=e.replace(/ /,""),n=!1,i=[];if(e.includes("[")&&(r=r.slice(0,r.indexOf("[")),i=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),n=i.length>0),u_.includes(r))return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i};if(r.startsWith("int"))t=parseInt(r.substring(3),10),r="int";else if(r.startsWith("uint"))t=parseInt(e.substring(4),10),r="uint";else{if(!r.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};t=parseInt(r.substring(5),10),r="bytes"}return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i}},b_=(e,t={})=>{if(Object.keys(t).includes("type"))throw new c_([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:n}=v_(e);if(!r&&!y_.includes(e))throw new c_([{keyword:"eth",message:`Eth data type "${e}" is not valid`,params:{eth:e},instancePath:"",schemaPath:""}]);if(r){if("tuple"===r)throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${null!=n?n:""}`,required:!0}}return e?{format:e,required:!0}:{}},w_=(e,t="/0")=>{const r={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[n,i]of e.entries()){let e,s,o=[];h_(i)?(e=i.type,s=i.name||`${t}/${n}`,o=i.components):"string"==typeof i?(e=i,s=`${t}/${n}`):Array.isArray(i)&&(i[0]&&"string"==typeof i[0]&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(e=i[0],s=`${t}/${n}`,o=i[1]):(e="tuple",s=`${t}/${n}`,o=i));const{baseType:a,isArray:c,arraySizes:u}=v_(e);let h,l=r;for(let e=u.length-1;e>0;e-=1)h={type:"array",$id:s,items:[],maxItems:u[e],minItems:u[e]},u[e]<0&&(delete h.maxItems,delete h.minItems),Array.isArray(l.items)?0===l.items.length?l.items=[h]:l.items.push(h):l.items=[l.items,h],l=h;if("tuple"!==a||c)if("tuple"===a&&c){const e=u[0],t=Object.assign({type:"array",$id:s,items:w_(o,s)},e>=0&&{minItems:e,maxItems:e});l.items.push(t)}else if(c){const t=u[0],r=Object.assign({type:"array",$id:s,items:b_(e)},t>=0&&{minItems:t,maxItems:t});l.items.push(r)}else Array.isArray(l.items),l.items.push(Object.assign({$id:s},b_(e)));else{const e=w_(o,s);e.$id=s,l.items.push(e)}l=r}return r},E_=e=>w_(e),A_=(e,t)=>1===t?e:A_(e[0],t-1),I_=(e,t,r)=>{const n=[];for(const[i,s]of e.entries()){let e,o,a=[];h_(s)?(e=s.type,o=s.name,a=s.components):"string"==typeof s?e=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(e=s[0],a=s[1]):(e="tuple",a=s));const{baseType:c,isArray:u,arraySizes:h}=v_(e),l=Array.isArray(t)?t[i]:t[o];if("tuple"!==c||u)if("tuple"===c&&u){const e=[];for(const t of l)if(h.length>1){const n=A_(t,h.length-1),i=[];for(const e of n)i.push(I_(a,e,r));e.push(i)}else e.push(I_(a,t,r));n.push(e)}else n.push(l);else n.push(I_(a,l,r))}return(r=null!=r?r:[]).push(...n),r},x_=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error(`Invalid code point: ${e}`)},__=e=>{if(!d_(e))throw new Error("Invalid hex string");const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],n=BigInt(r);return n>Number.MAX_SAFE_INTEGER?t?-n:n:n<Number.MIN_SAFE_INTEGER?n:t?-1*Number(n):Number(n)},S_=e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<0)return`-0x${e.toString(16).slice(1)}`;if(("number"==typeof e||"bigint"==typeof e)&&e>=0)return`0x${e.toString(16)}`;if("string"==typeof e&&d_(e)){const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e];return`${t?"-":""}0x${r.split(/^(-)?0(x|X)/).slice(-1)[0].replace(/^0+/,"").toLowerCase()}`}if("string"==typeof e&&!d_(e))return S_(BigInt(e));throw new fE(e)},P_=(e,t,r="0")=>{if("string"==typeof e&&!d_(e))return e.padStart(t,r);const n="string"==typeof e&&d_(e)?e:S_(e),[i,s]=n.startsWith("-")?["-0x",n.slice(3)]:["0x",n.slice(2)];return`${i}${s.padStart(t,r)}`};function O_(e){let t="0x";for(const r of e){const e=r.toString(16);t+=1===e.length?`0${e}`:e}return t}const k_={zero:48,nine:57,A:65,F:70,a:97,f:102};function T_(e){return e>=k_.zero&&e<=k_.nine?e-k_.zero:e>=k_.A&&e<=k_.F?e-(k_.A-10):e>=k_.a&&e<=k_.f?e-(k_.a-10):void 0}function C_(e){let t=0;if(!e.startsWith("0")||"x"!==e[1]&&"X"!==e[1]||(t=2),e.length%2!=0)throw new dE(`hex string has odd length: ${e}`);const r=(e.length-t)/2,n=new Uint8Array(r);for(let i=0,s=t;i<r;i+=1){const t=T_(e.charCodeAt(s++)),r=T_(e.charCodeAt(s++));if(void 0===t||void 0===r)throw new dE(`Invalid byte sequence ("${e[s-2]}${e[s-1]}" in "${e}").`);n[i]=16*t+r}return n}function B_(e){var t;return e instanceof Uint8Array||"Uint8Array"!==(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)?e:Uint8Array.from(e)}const R_=e=>{var t,r;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"Buffer"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)},N_=(e,t={abiType:"bytes"})=>{if("string"!=typeof e&&!Array.isArray(e)&&!R_(e))return!1;if("string"==typeof e&&d_(e)&&e.startsWith("-"))return!1;if("string"==typeof e&&!d_(e))return!1;let r;if("string"==typeof e){if(e.length%2!=0)return!1;r=C_(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;r=new Uint8Array(e)}else r=e;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=v_(t.abiType);return!e||r.length===e}return!(null==t?void 0:t.size)||r.length===(null==t?void 0:t.size)},M_=e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),r=sA(t.toLowerCase()),n=O_(MA(B_(r))).slice(2);for(let e=0;e<40;e+=1)if(parseInt(n[e],16)>7&&t[e].toUpperCase()!==t[e]||parseInt(n[e],16)<=7&&t[e].toLowerCase()!==t[e])return!1;return!0},L_=(e,t=!0)=>{if("string"!=typeof e&&!R_(e))return!1;let r;return r=R_(e)?O_(e):"string"!=typeof e||d_(e)||e.toLowerCase().startsWith("0x")?e:`0x${e}`,!!/^(0x)?[0-9a-f]{40}$/i.test(r)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(r)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(r))||!t||M_(r))},j_=(e,t)=>{if(t===BigInt(0))return BigInt(1);let r=e;for(let n=1;n<t;n+=1)r*=e;return r},D_=(e,t={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof e)||"string"==typeof e&&0===e.length)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=v_(t.abiType);e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=j_(BigInt(2),BigInt(null!=r?r:256))-BigInt(1);try{const t="string"==typeof e&&d_(e)?BigInt(__(e)):BigInt(e);return t>=0&&t<=n}catch(e){return!1}},U_=(e,t={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof e))return!1;if("number"==typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e,baseType:n}=v_(t.abiType);if("int"!==n)return!1;e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=j_(BigInt(2),BigInt((null!=r?r:256)-1)),i=BigInt(-1)*j_(BigInt(2),BigInt((null!=r?r:256)-1));try{const t="string"==typeof e&&d_(e)?BigInt(__(e)):BigInt(e);return t>=i&&t<=n}catch(e){return!1}},F_=e=>!!U_(e)||!("string"!=typeof e||!/[0-9.]/.test(e)||e.indexOf(".")!==e.lastIndexOf("."))||"number"==typeof e,q_=e=>D_(e),H_=e=>Object.values(Eb).includes(e),z_=e=>H_(e)||q_(e),$_=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{512}$/i.test(e)||!/^(0x)?[0-9a-f]{512}$/.test(e)&&!/^(0x)?[0-9A-F]{512}$/.test(e)),G_=(e,t)=>{if("string"==typeof t&&!d_(t))return!1;if(!$_(e))return!1;const r="string"==typeof t?C_(t):t,n=O_(MA(r)).slice(2);for(let t=0;t<12;t+=4){const r=(parseInt(n.slice(t,t+2),16)<<8)+parseInt(n.slice(t+2,t+4),16)&2047,i=1<<r%4;if((x_(e.charCodeAt(e.length-1-Math.floor(r/4)))&i)!==i)return!1}return!0},V_=e=>null==e,K_=e=>!("object"!=typeof e||V_(e)||Array.isArray(e)||e instanceof xb),W_=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{64}$/i.test(e)||!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e)),Q_={address:e=>L_(e),bloom:e=>$_(e),blockNumber:e=>q_(e),blockTag:e=>H_(e),blockNumberOrTag:e=>z_(e),bool:e=>{return!!["number","string","boolean"].includes(typeof(t=e))&&("boolean"==typeof t||("string"!=typeof t||d_(t)?"string"==typeof t&&d_(t)?"0x1"===t||"0x0"===t:1===t||0===t:"1"===t||"0"===t));var t},bytes:e=>N_(e),filter:e=>(e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if(V_(e)||"object"!=typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!V_(e.fromBlock)&&!z_(e.fromBlock)||!V_(e.toBlock)&&!z_(e.toBlock))return!1;if(!V_(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>L_(e))))return!1}else if(!L_(e.address))return!1;return!(!V_(e.topics)&&!e.topics.every((e=>!!V_(e)||(Array.isArray(e)?e.every((e=>W_(e))):!!W_(e)))))})(e),hex:e=>d_(e),uint:e=>D_(e),int:e=>U_(e),number:e=>F_(e),string:e=>l_(e)};for(let e=8;e<=256;e+=8)Q_[`int${e}`]=t=>U_(t,{bitSize:e}),Q_[`uint${e}`]=t=>D_(t,{bitSize:e});for(let e=1;e<=32;e+=1)Q_[`bytes${e}`]=t=>N_(t,{size:e});Q_.bytes256=Q_.bytes;const Z_=Q_,J_=e=>{if((!(null==e?void 0:e.type)||"object"===(null==e?void 0:e.type))&&(null==e?void 0:e.properties)){const t={};for(const r of Object.keys(e.properties)){const n=J_(e.properties[r]);n&&(t[r]=n)}return Array.isArray(e.required)?o_.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):o_.object(t).partial()}if("array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>1&&void 0!==e.maxItems&&new Set(e.items.map((e=>e.$id))).size===e.items.length){const t=[];for(const r of e.items){const e=J_(r);e&&t.push(e)}return o_.tuple(t)}const t=Array.isArray(e.items)?e.items[0]:e.items;let r=o_.array(J_(t));return r=void 0!==e.minItems?r.min(e.minItems):r,r=void 0!==e.maxItems?r.max(e.maxItems):r,r}if(e.oneOf&&Array.isArray(e.oneOf))return o_.union(e.oneOf.map((e=>J_(e))));if(null==e?void 0:e.format){if(!Z_[e.format])throw new ME(e.format);return o_.any().refine(Z_[e.format],(t=>({params:{value:t,format:e.format}})))}return(null==e?void 0:e.type)&&"object"!==(null==e?void 0:e.type)&&"function"==typeof o_[String(e.type)]?o_[String(e.type)]():o_.object({data:o_.any()}).partial()};class Y_{static factory(){return Y_.validatorInstance||(Y_.validatorInstance=new Y_),Y_.validatorInstance}validate(e,t,r){var n,i;const s=J_(e).safeParse(t);if(!s.success){const e=this.convertErrors(null!==(i=null===(n=s.error)||void 0===n?void 0:n.issues)&&void 0!==i?i:[]);if(e){if(null==r?void 0:r.silent)return e;throw new c_(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let r,n,i,s;s=e.path.join("/");const o=String(e.path[e.path.length-1]),a=e.path.join("/");if(e.code===FA.too_big)n="maxItems",s=`${a}/maxItems`,i={limit:e.maximum},r=`must NOT have more than ${e.maximum} items`;else if(e.code===FA.too_small)n="minItems",s=`${a}/minItems`,i={limit:e.minimum},r=`must NOT have fewer than ${e.minimum} items`;else if(e.code===FA.custom){const{value:n,format:o}=null!==(t=e.params)&&void 0!==t?t:{};r=void 0===n?`value at "/${s}" is required`:`value "${"object"==typeof n?JSON.stringify(n):n}" at "/${s}" must pass "${o}" validation`,i={value:n}}return{keyword:null!=n?n:o,instancePath:a?`/${a}`:"",schemaPath:s?`#${s}`:"#",params:null!=i?i:{value:e.message},message:null!=r?r:e.message}}))}}const X_=new class{constructor(){this._validator=Y_.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var n,i;const s=E_(e);if(!Array.isArray(s.items)||0!==(null===(n=s.items)||void 0===n?void 0:n.length)||0!==t.length){if(Array.isArray(s.items)&&0===(null===(i=s.items)||void 0===i?void 0:i.length)&&0!==t.length)throw new c_([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(s,t,r)}}};function eS(e){var t,r;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"Buffer"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)}function tS(...e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function rS(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r+=1)if(e[r]!==t[r])return!1;return!0}const nS={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},iS="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",sS=e=>{if(X_.validate(["bytes"],[e]),eS(e))return e;if(Array.isArray(e))return new Uint8Array(e);if("string"==typeof e)return C_(e);throw new dE(e)},{uint8ArrayToHexString:oS}=g,aS=e=>oS(sS(e)),cS=e=>"string"==typeof e&&"0x"!==e.slice(0,2).toLowerCase()?sS(`0x${e}`):sS(e),uS=e=>(X_.validate(["hex"],[e]),__(e)),hS=uS,lS=(e,t)=>{"bigint"!=typeof e&&X_.validate(["int"],[e]);let r=S_(e);return t&&(r.startsWith("-")||r.length%2!=1?r.length%2==0&&r.startsWith("-")&&(r="-0x0".concat(r.slice(3))):r="0x0".concat(r.slice(2))),r},dS=lS,fS=e=>uS(e).toString(),pS=e=>{X_.validate(["string"],[e]);let t=e.replace(/^(?:\u0000)/,"");return t=t.replace(/(?:\u0000)$/,""),aS((new TextEncoder).encode(t))},gS=pS,mS=pS,yS=e=>RA(cS(e)),vS=e=>"string"==typeof e?yS(e):(X_.validate(["bytes"],[e]),RA(e)),bS=sA,wS=yS,ES=e=>{X_.validate(["string"],[e]);let t="";for(let r=0;r<e.length;r+=1){const n=e.charCodeAt(r).toString(16);t+=n.length%2!=0?`0${n}`:n}return`0x${t}`},AS=ES,IS=e=>new TextDecoder("ascii").decode(cS(e)),xS=IS,_S=(e,t)=>{if("string"==typeof e&&L_(e))return t?"address":`0x${e.toLowerCase().replace(/^0x/i,"")}`;if("boolean"==typeof e)return t?"bool":e?"0x01":"0x00";if("number"==typeof e)return t?e<0?"int256":"uint256":lS(e);if("bigint"==typeof e)return t?"bigint":lS(e);if(eS(e))return t?"bytes":aS(e);if("object"==typeof e&&e)return t?"string":pS(JSON.stringify(e));if("string"==typeof e){if(e.startsWith("-0x")||e.startsWith("-0X"))return t?"int256":lS(e);if(d_(e))return t?"bytes":e;if(p_(e)&&!U_(e)&&!D_(e))return t?"bytes":`0x${e}`;if(p_(e)&&!U_(e)&&D_(e))return t?"uint":lS(e);if(!Number.isFinite(e))return t?"string":pS(e)}throw new vE(e)},SS=e=>{if("number"==typeof e)return e>1e20?(console.warn(iS),BigInt(e)):e;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"==typeof e&&d_(e))return uS(e);try{return SS(BigInt(e))}catch(t){throw new fE(e)}},PS=e=>{if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;if("string"==typeof e&&p_(e))return e.startsWith("-")?-BigInt(e.substring(1)):BigInt(e);throw new fE(e)},OS=(e,t)=>{let r;if("string"==typeof t){if(r=nS[t],!r)throw new mE(t)}else{if(t<0||!Number.isInteger(t))throw new yE(t);r=j_(BigInt(10),BigInt(t))}const n=String(SS(e)),i=r.toString().length-1;if(i<=0)return n.toString();const s=n.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return""===o?a?`0.${a}`:"0":""===a?o:`${o}.${a}`.slice(0,o.length+i+1)},kS=(e,t)=>{let r;if(X_.validate(["number"],[e]),"string"==typeof t){if(r=nS[t],!r)throw new mE(t)}else{if(t<0||!Number.isInteger(t))throw new yE(t);r=j_(BigInt(10),BigInt(t))}let n=e;"number"==typeof n&&(n<1e-15&&console.warn(iS),n>1e20?(console.warn(iS),n=BigInt(n)):n=n.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,s]=String("string"!=typeof n||d_(n)?SS(n):n).split(".").concat(""),o=BigInt(`${i}${s}`)*r,a=s.length;return 0===a?o.toString():o.toString().slice(0,-a)},TS=e=>{if(!L_(e,!1))throw new pE(e);const t=e.toLowerCase().replace(/^0x/i,""),r=O_(MA(B_(bS(t))));if(V_(r)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===r)return"";let n="0x";const i=r.replace(/^0x/i,"");for(let e=0;e<t.length;e+=1)parseInt(i[e],16)>7?n+=t[e].toUpperCase():n+=t[e];return n},CS=e=>{if("boolean"==typeof e)return e;if("number"==typeof e&&(0===e||1===e))return Boolean(e);if("bigint"==typeof e&&(e===BigInt(0)||e===BigInt(1)))return Boolean(e);if("string"==typeof e&&!d_(e)&&("1"===e||"0"===e||"false"===e||"true"===e))return"true"===e||"false"!==e&&Boolean(Number(e));if("string"==typeof e&&d_(e)&&("0x1"===e||"0x0"===e))return Boolean(SS(e));throw new wE(e)};var BS=i(228);const RS=BS;class NS extends RS{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const MS=d_,LS=p_,jS=M_,DS=L_,US=$_,FS=G_,qS=(e,t)=>{if(!$_(e))return!1;if(!L_(t))return!1;const r=P_(t,64);return G_(e,r)},HS=(e,t)=>!!$_(e)&&!!L_(t)&&G_(e,t),zS=W_,$S=(e,t)=>!!$_(e)&&!!W_(t)&&G_(e,t),GS=(e,t)=>{const r="string"==typeof e&&H_(e),n="string"==typeof t&&H_(t);if(e===t||("earliest"===e||0===e)&&("earliest"===t||0===t))return 0;if("earliest"===e)return-1;if("earliest"===t)return 1;if(r&&n){const r={[Eb.EARLIEST]:1,[Eb.FINALIZED]:2,[Eb.SAFE]:3,[Eb.LATEST]:4,[Eb.PENDING]:5};return r[e]<r[t]?-1:1}if(r&&!n||!r&&n)throw new xE("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(e),s=BigInt(t);return i<s?-1:i===s?0:1},VS=e=>"object"==typeof e&&!V_(e)&&0!==Object.keys(e).length&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((t=>t in e)),KS=V_,WS=e=>!("object"!=typeof e||V_(e)||Array.isArray(e)||e instanceof xb),QS=(e,...t)=>{if(!WS(e))return e;const r=Object.assign({},e);for(const e of t)for(const t in e)WS(e[t])?(r[t]||(r[t]={}),r[t]=QS(r[t],e[t])):!V_(e[t])&&Object.hasOwnProperty.call(e,t)&&(Array.isArray(e[t])||e[t]instanceof xb?r[t]=e[t].slice(0):r[t]=e[t]);return r},ZS=(e,t,r="0")=>"string"==typeof e?d_(e)?P_(e,t,r):e.padStart(t,r):(X_.validate(["int"],[e]),P_(e,t,r)),JS=(e,t,r="0")=>{if("string"==typeof e&&!d_(e))return e.padEnd(t,r);const n="string"==typeof e&&d_(e)?e:lS(e),i=n.startsWith("-")?3:2;return X_.validate([n.startsWith("-")?"int":"uint"],[e]),n.padEnd(t+i,r)},YS=JS,XS=ZS,eP=(e,t=64)=>{X_.validate(["int"],[e]);const r=SS(e);if(r>=0)return ZS(_S(r),t);const n=j_(BigInt(2),BigInt(4*t));if(-r>=n)throw new bE(`value: ${e}, nibbleWidth: ${t}`);const i=BigInt(r);return ZS(lS(i+n),t)},tP=(e,t=64)=>{X_.validate(["int"],[e]);const r=SS(e);if(r<0)return r;const n=Math.ceil(Math.log(Number(r))/Math.log(2));if(n>4*t)throw new bE(`value: "${e}", nibbleWidth: "${t}"`);if(4*t!==n)return r;const i=j_(BigInt(2),BigInt(t)*BigInt(4));return SS(BigInt(r)-i)},{parseBaseType:rP}=g,nP=e=>"object"==typeof e&&!V_(e)&&"number"in e&&"bytes"in e,iP=(e,t,r=[])=>{let n,i=Object.assign({},e);for(const e of t){if(i.oneOf&&n){const e=n,t=r.find((([t])=>t===e));t&&t[0]===n&&(i=i.oneOf[t[1]])}if(!i.properties&&!i.items)return;i.properties?i=i.properties[e]:i.items&&i.items.properties?i=i.items.properties[e]:i.items&&K_(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(e,10)]),i&&e&&(n=e)}return i},sP=(e,t,r)=>{try{const{baseType:n,baseTypeSize:i}=rP(t);if("int"===n||"uint"===n)switch(r.number){case yb.NUMBER:return Number(PS(e));case yb.HEX:return lS(PS(e));case yb.STR:return PS(e).toString();case yb.BIGINT:return PS(e);default:throw new yw(`Invalid format: ${String(r.number)}`)}if("bytes"===n){let t;switch(i?"string"==typeof e?t=ZS(e,2*i):eS(e)&&(t=tS(new Uint8Array(i-e.length),e)):t=e,r.bytes){case vb.HEX:return aS(sS(t));case vb.UINT8ARRAY:return sS(t);default:throw new yw(`Invalid format: ${String(r.bytes)}`)}}if("string"===n)return String(e)}catch(t){return e}return e},oP=({value:e,schemaProp:t,schema:r,object:n,key:i,dataPath:s,format:o,oneOfPath:a=[]})=>{var c,u;if(Array.isArray(e)){let h=t;if(void 0!==(null==t?void 0:t.oneOf)&&t.oneOf.forEach(((r,n)=>{var s,o;!Array.isArray(null==t?void 0:t.items)&&("object"==typeof e[0]&&"object"===(null===(s=null==r?void 0:r.items)||void 0===s?void 0:s.type)||"string"==typeof e[0]&&"object"!==(null===(o=null==r?void 0:r.items)||void 0===o?void 0:o.type))&&(h=r,a.push([i,n]))})),V_(null==h?void 0:h.items))return delete n[i],s.pop(),!0;if(K_(h.items)&&!V_(h.items.format)){for(let t=0;t<e.length;t+=1)n[i][t]=sP(e[t],null===(c=null==h?void 0:h.items)||void 0===c?void 0:c.format,o);return s.pop(),!0}if(!Array.isArray(null==h?void 0:h.items)&&"object"===(null===(u=null==h?void 0:h.items)||void 0===u?void 0:u.type)){for(const t of e)aP(t,r,s,o,a);return s.pop(),!0}if(Array.isArray(null==h?void 0:h.items)){for(let t=0;t<e.length;t+=1)n[i][t]=sP(e[t],h.items[t].format,o);return s.pop(),!0}}return!1},aP=(e,t,r,n,i=[])=>{var s;if(!K_(e)&&!Array.isArray(e))return sP(e,null==t?void 0:t.format,n);const o=e;if(Array.isArray(o)&&"array"===(null==t?void 0:t.type)&&"object"===(null===(s=null==t?void 0:t.items)||void 0===s?void 0:s.type))oP({value:o,schemaProp:t,schema:t,object:o,key:"",dataPath:r,format:n,oneOfPath:i});else for(const[e,s]of Object.entries(o)){r.push(e);let a=iP(t,r,i);if(V_(a))delete o[e],r.pop();else if(K_(s))aP(s,t,r,n,i),r.pop();else if(!oP({value:s,schemaProp:a,schema:t,object:o,key:e,dataPath:r,format:n,oneOfPath:i})){if(void 0===(null==a?void 0:a.format)&&void 0!==(null==a?void 0:a.oneOf))for(const[e,t]of a.oneOf.entries())if(void 0!==(null==t?void 0:t.format)){a=t;break}o[e]=sP(s,a.format,n),r.pop()}}return o},cP=(e,t,r=bb)=>{let n;n=K_(t)?QS({},t):Array.isArray(t)?[...t]:t;const i=K_(e)?e:E_(e);if(!i.properties&&!i.items&&!i.format)throw new yw("Invalid json schema for formatting");return aP(n,i,[],r)},uP="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",hP=e=>{let t;return t="bigint"==typeof e||"number"==typeof e?sA(e.toString()):Array.isArray(e)?new Uint8Array(e):"string"!=typeof e||d_(e)?sS(e):sA(e),aS(MA(B_(t)))},lP=e=>{let t;t="string"==typeof e?e.startsWith("0x")&&d_(e)?cS(e):sA(e):e;const r=hP(t);return r===uP?void 0:r},dP=e=>{const t=lP(e);return V_(t)?uP:t},fP=(e,t)=>{const r=/^(\d+).*$/.exec(e.slice(t));return r?parseInt(r[1],10):0},pP=e=>e.toString(2).length,gP=(e,t)=>{const r=t.toString();if("string"===e){if("string"==typeof t)return pS(t);throw new gE(t)}if("bool"===e||"boolean"===e){if("boolean"==typeof t)return t?"01":"00";throw new wE(t)}if("address"===e){if(!L_(r))throw new pE(r);return r}const n=(e=>e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256'${e.slice(4)}`:"uint"===e?"uint256":e)(e);if(e.startsWith("uint")){const e=fP(n,4);if(e%8||e<8||e>256)throw new AE(r);const t=SS(r);if(pP(t)>e)throw new IE(r);if(t<BigInt(0))throw new EE(r);return e?XS(t.toString(16),e/8*2):t.toString(16)}if(e.startsWith("int")){const t=fP(n,3);if(t%8||t<8||t>256)throw new AE(e);const i=SS(r);if(pP(i)>t)throw new IE(r);return i<BigInt(0)?eP(i.toString(),t/8*2):t?XS(i.toString(16),t/4):i.toString(16)}if("bytes"===n){if(r.replace(/^0x/i,"").length%2!=0)throw new dE(r);return r}if(e.startsWith("bytes")){if(r.replace(/^0x/i,"").length%2!=0)throw new dE(r);const t=fP(e,5);if(!t||t<1||t>64||t<r.replace(/^0x/i,"").length/2)throw new dE(r);return YS(r,2*t)}return""},mP=e=>{const[t,r]=(e=>{if(Array.isArray(e))throw new Error("Autodetection of array types is not supported.");let t,r;if("object"==typeof e&&("t"in e||"type"in e)&&("v"in e||"value"in e))t="t"in e?e.t:e.type,r="v"in e?e.v:e.value,t="bigint"===t.toLowerCase()?"int":t;else{if("bigint"==typeof e)return["int",e];t=_S(e,!0),r=_S(e),t.startsWith("int")||t.startsWith("uint")||(t="bytes")}return!t.startsWith("int")&&!t.startsWith("uint")||"string"!=typeof r||/^(-)?0x/i.test(r)||(r=PS(r)),[t,r]})(e);if(Array.isArray(r)){return r.map((e=>gP(t,e).replace("0x",""))).join("")}return gP(t,r).replace("0x","")},yP=(...e)=>`0x${e.map(mP).join("").toLowerCase()}`,vP=(...e)=>lP(yP(...e)),bP=(...e)=>dP(yP(...e)),wP=e=>lP(`0x${("number"==typeof e?e.toString():e).padStart(64,"0")}`),EP=e=>function(e){return dA(e)}(e),AP=e=>aS(EP(e));var IP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function xP(e){return("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function _P(e,t,r){return IP(this,void 0,void 0,(function*(){let n;const i=yield Promise.race([e instanceof Promise?e:e(),new Promise(((e,i)=>{n=setTimeout((()=>r?i(r):e(void 0)),t)}))]);if(n&&clearTimeout(n),i instanceof Error)throw i;return i}))}function SP(e,t){let r;return[new Promise(((n,i)=>{r=setInterval(function s(){return(()=>{IP(this,void 0,void 0,(function*(){try{const i=yield _P(e,t);V_(i)||(clearInterval(r),n(i))}catch(e){clearInterval(r),i(e)}}))})(),s}(),t)})),r]}function PP(e,t){return IP(this,void 0,void 0,(function*(){return SP(e,t)[0]}))}function OP(e,t){let r;const n=new Promise(((n,i)=>{r=setTimeout((()=>{i(t)}),e)}));return[r,n]}function kP(e,t){let r;const n=new Promise(((n,i)=>{r=setInterval((()=>{(()=>{IP(this,void 0,void 0,(function*(){const t=yield e();t&&(clearInterval(r),i(t))}))})()}),t)}));return[r,n]}const TP=()=>{const e=EP(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=aS(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")},CP=e=>{const t=e.error.code;return NE.has(t)||t>=-32099&&t<=-32e3},BP=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"result"in e&&V_(e.error)&&("number"==typeof e.id||"string"==typeof e.id),RP=e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&V_(e.result)&&"error"in e&&("number"==typeof e.id||"string"==typeof e.id),NP=e=>!(Array.isArray(e)||!e||"2.0"!==e.jsonrpc||V_(e.params)||V_(e.method)),MP=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"id"in e&&"result"in e,LP=e=>BP(e)||RP(e),jP=e=>Array.isArray(e)?e.every(LP):LP(e),DP=e=>Array.isArray(e)&&e.length>0&&jP(e);let UP;const FP=e=>{UP=e},qP=e=>{var t,r,n,i;return void 0!==UP&&(UP+=1),{jsonrpc:null!==(t=e.jsonrpc)&&void 0!==t?t:"2.0",id:null!==(n=null!==(r=e.id)&&void 0!==r?r:UP)&&void 0!==n?n:TP(),method:e.method,params:null!==(i=e.params)&&void 0!==i?i:void 0}},HP=e=>e.map((e=>qP(e))),zP=e=>Array.isArray(e)&&e.length>0;var $P,GP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class VP{constructor({timeout:e,eagerStart:t,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[$P]="Promise",this._state="pending",this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return GP(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return GP(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return GP(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new bw(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}$P=Symbol.toStringTag;class KP{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimeout=15e3}clearQueues(){"function"==typeof this._clearQueues&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((e=>{let r,n=e;this.lastChunk&&(n=this.lastChunk+n);try{r=JSON.parse(n)}catch(e){return this.lastChunk=n,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new PE({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),this.chunkTimeout))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,r&&t.push(r)})),t}}var WP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class QP extends Pb{constructor(){super(...arguments),this._eventEmitter=new BS,this._chainId="",this._accounts=[]}_getChainId(){return WP(this,void 0,void 0,(function*(){var e;const t=yield this.request(qP({method:"eth_chainId",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:""}))}_getAccounts(){return WP(this,void 0,void 0,(function*(){var e;const t=yield this.request(qP({method:"eth_accounts",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:[]}))}_onConnect(){Promise.all([this._getChainId().then((e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((e=>{console.error(e)})),this._getAccounts().then((e=>{this._accounts.length===e.length&&e.every((t=>e.includes(t)))||(this._accounts=e,this._onAccountsChanged())})).catch((e=>{console.error(e)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((e=>{console.error(e)}))}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new RE(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var ZP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const JP={autoReconnect:!0,delay:5e3,maxAttempts:5};class YP extends QP{get SocketConnection(){return this._socketConnection}constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new xw(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},JP),null!=r?r:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new KP(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(!this.isReconnecting)throw this._connectionStatus="disconnected",e&&e.message?new iw(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new xw(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=null!=e?e:1e3;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}safeDisconnect(e,t){return ZP(this,arguments,void 0,(function*(e,t,r=!1,n=1e3){let i=0;yield(()=>ZP(this,void 0,void 0,(function*(){return new Promise((e=>{const t=setInterval((()=>{r&&i>=5&&this.clearQueues(),0===this.getPendingRequestQueueSize()&&0===this.getSentRequestsQueueSize()&&(clearInterval(t),e(!0)),i+=1}),n)}))})))(),this.disconnect(e,t)}))}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,t)=>{e.deferredPromise.reject(new aw),this._sentRequestsQueue.delete(t)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new ow(this._reconnectOptions.maxAttempts))))}request(e){return ZP(this,void 0,void 0,(function*(){if(KS(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const t=zP(e)?e[0].id:e.id;if(!t)throw new Sw("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new cw(t);const r=new VP;r.catch((e=>{this._eventEmitter.emit("error",e)}));const n={payload:e,deferredPromise:r};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(t,n),n.deferredPromise;this._sentRequestsQueue.set(t,n);try{this._sendToSocket(n.payload)}catch(e){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",e)}return r}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())try{this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}catch(t){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",t)}}_onMessage(e){const t=this._parseResponses(e);if(!KS(t)&&0!==t.length)for(const e of t){if(NP(e)&&e.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",e);const t=DP(e)?e[0].id:e.id,r=this._sentRequestsQueue.get(t);if(!r)return;(DP(e)||BP(e)||RP(e))&&(this._eventEmitter.emit("message",e),r.deferredPromise.resolve(e)),this._sentRequestsQueue.delete(t)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new sw(e)),this._pendingRequestsQueue.delete(r)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new sw(e)),this._sentRequestsQueue.delete(r)})),this._removeSocketListeners()}}class XP{constructor(){this._emitter=new NS}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var eO;!function(e){e.CONFIG_CHANGE="CONFIG_CHANGE"}(eO||(eO={}));class tO extends XP{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:_S(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:bb,ignoreGasPricing:!1},this.setConfig(null!=e?e:{})}setConfig(e){const t=Object.keys(e);for(const r of t)this._triggerConfigChange(r,e[r]),KS(e[r])||"number"!=typeof e[r]||"maxListenersWarningThreshold"!==r||this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!KS(this.config.defaultCommon)&&!KS(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new kE(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!KS(this.config.defaultCommon)&&!KS(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new OE(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!KS(this.config.defaultHardfork)&&!KS(e)&&!KS(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new OE(this.config.defaultHardfork,e.hardfork);if(!KS(this.config.defaultChain)&&!KS(e)&&!KS(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new kE(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,t){this.emit(eO.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var rO=i(9094);class nO extends Pb{constructor(e,t){if(super(),!nO.validateClientUrl(e))throw new xw(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return"string"==typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new vw}supportsSubscriptions(){return!1}request(e,t){var r;return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},null===(r=this.httpProviderOptions)||void 0===r?void 0:r.providerOptions),t),i=yield rO(this.clientUrl,Object.assign(Object.assign({},n),{method:"POST",headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new SE(yield i.json(),void 0,void 0,i.status);return yield i.json()}))}on(){throw new vw}removeListener(){throw new vw}once(){throw new vw}removeAllListeners(){throw new vw}connect(){throw new vw}disconnect(){throw new vw}reset(){throw new vw}reconnect(){throw new vw}}var iO=null;"undefined"!=typeof WebSocket?iO=WebSocket:"undefined"!=typeof MozWebSocket?iO=MozWebSocket:void 0!==i.g?iO=i.g.WebSocket||i.g.MozWebSocket:"undefined"!=typeof window?iO=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(iO=self.WebSocket||self.MozWebSocket);const sO=iO;class oO extends YP{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return"string"==typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!KS(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new sO(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;null===(r=this._socketConnection)||void 0===r||r.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new sw;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,n;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(r=this._socketConnection)||void 0===r||r.addEventListener("close",(e=>this._onCloseHandler(e))),null===(n=this._socketConnection)||void 0===n||n.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(r=this._socketConnection)||void 0===r||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(e.code)&&e.wasClean?(this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}const aO=e=>Pb.isWeb3Provider(e),cO=e=>"string"!=typeof e&&"request"in e&&"Function"===e.request.constructor.name,uO=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,hO=e=>"string"!=typeof e&&"send"in e,lO=e=>"string"!=typeof e&&"sendAsync"in e,dO=e=>e&&(aO(e)||uO(e)||cO(e)||lO(e)||hO(e));var fO,pO=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.PROVIDER_CHANGED="PROVIDER_CHANGED",e.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"}(fO||(fO={}));const gO={HttpProvider:nO,WebsocketProvider:oO};class mO extends XP{constructor(e,t,r){super(),KS(e)||this.setProvider(e),this.useRpcCallSpecification=t,KS(r)||(this.middleware=r)}static get providers(){return gO}get provider(){return this._provider}get providers(){return gO}setProvider(e){let t;if(e&&"string"==typeof e&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else{if(!/^ws(s)?:\/\//i.test(e))throw new Iw(`Can't autodetect provider for "${e}"`);t=new this.providers.WebsocketProvider(e)}else t=KS(e)?void 0:e;return this.emit(fO.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(fO.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return pO(this,void 0,void 0,(function*(){const t=Object.assign({},e);let r=yield this._sendRequest(t);if(KS(this.middleware)||(r=yield this.middleware.processResponse(r)),BP(r))return r.result;throw new SE(r)}))}sendBatch(e){return pO(this,void 0,void 0,(function*(){return yield this._sendRequest(e)}))}_sendRequest(e){return pO(this,void 0,void 0,(function*(){const{provider:t}=this;if(KS(t))throw new Iw("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=zP(e)?HP(e):qP(e);if(KS(this.middleware)||(r=yield this.middleware.processRequest(r)),aO(t)){let e;try{e=yield t.request(r)}catch(t){e=t}return this._processJsonRpcResponse(r,e,{legacy:!1,error:!1})}if(uO(t))return t.request(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));if(cO(t))return new Promise(((e,n)=>{const i=e=>{n(this._processJsonRpcResponse(r,e,{legacy:!0,error:!0}))},s=t=>e(this._processJsonRpcResponse(r,t,{legacy:!0,error:!1})),o=t.request(r,((e,t)=>e?i(e):s(t)));xP(o)&&o.then(s).catch((e=>{try{const t=this._processJsonRpcResponse(r,e,{legacy:!0,error:!0});n(t)}catch(e){n(e)}}))}));if(hO(t))return new Promise(((e,n)=>{t.send(r,((t,i)=>{if(t)return n(this._processJsonRpcResponse(r,t,{legacy:!0,error:!0}));if(KS(i))throw new SE({},'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(r,i,{legacy:!0,error:!1}))}))}));if(lO(t))return t.sendAsync(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));throw new Iw("Provider does not have a request or send method to use.")}))}_processJsonRpcResponse(e,t,{legacy:r,error:n}){if(KS(t))return this._buildResponse(e,null,n);if(RP(t)){if(this.useRpcCallSpecification&&CP(t)){const e=t;if(NE.get(e.error.code))throw new(0,NE.get(e.error.code).error)(e);throw new BE(e)}if(!mO._isReverted(t))throw new PE(t,e)}if(BP(t))return t;if(t instanceof Error)throw mO._isReverted(t),t;if(!r&&zP(e)&&DP(t))return t;if(r&&!n&&zP(e))return t;if(r&&n&&zP(e))throw t;if(r&&!RP(t)&&!BP(t))return this._buildResponse(e,t,n);if(zP(e)&&!Array.isArray(t))throw new SE(t,"Got normal response for a batch request.");if(!zP(e)&&Array.isArray(t))throw new SE(t,"Got batch response for a normal request.");throw new SE(t,"Invalid response")}static _isReverted(e){let t;if(RP(e)?t=e.error:e instanceof Error&&(t=e),null==t?void 0:t.message.includes("revert"))throw new dw(t);return!1}_buildResponse(e,t,r){const n={jsonrpc:"2.0",id:zP(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},n),{error:t}):Object.assign(Object.assign({},n),{result:t})}}var yO=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class vO{constructor(e,t,r=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(fO.BEFORE_PROVIDER_CHANGE,(()=>yO(this,void 0,void 0,(function*(){yield this.unsubscribe()})))),this.requestManager.on(fO.PROVIDER_CHANGED,(()=>{this.clear(),this.listenToProviderEvents()})),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;this.requestManager.provider&&("function"!=typeof(null==e?void 0:e.supportsSubscriptions)||(null==e?void 0:e.supportsSubscriptions()))&&"function"==typeof this.requestManager.provider.on&&("function"==typeof this.requestManager.provider.request?this.requestManager.provider.on("message",(e=>this.messageListener(e))):e.on("data",(e=>this.messageListener(e))))}messageListener(e){var t,r,n;if(!e)throw new _w("Should not call messageListener with no data. Type was");const i=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(r=e.data)||void 0===r?void 0:r.subscription)||(null===(n=e.id)||void 0===n?void 0:n.toString(16));if(i){const t=this._subscriptions.get(i);null==t||t.processSubscriptionData(e)}}subscribe(e,t){return yO(this,arguments,void 0,(function*(e,t,r=bb){const n=this.registeredSubscriptions[e];if(!n)throw new _w("Invalid subscription type");const i=new n(null!=t?t:void 0,{subscriptionManager:this,returnFormat:r});return yield this.addSubscription(i),i}))}get subscriptions(){return this._subscriptions}addSubscription(e){return yO(this,void 0,void 0,(function*(){if(!this.requestManager.provider)throw new Iw("Provider not available");if(!this.supportsSubscriptions())throw new _w("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new _w(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),KS(e.id))throw new _w("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id}))}removeSubscription(e){return yO(this,void 0,void 0,(function*(){const{id:t}=e;if(KS(t))throw new _w("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new _w(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t}))}unsubscribe(e){return yO(this,void 0,void 0,(function*(){const t=[];for(const[r,n]of this.subscriptions.entries())(!e||"function"==typeof e&&e({id:r,sub:n}))&&t.push(this.removeSubscription(n));return Promise.all(t)}))}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!KS(this.requestManager.provider)&&((e=this.requestManager.provider)&&"supportsSubscriptions"in e?e.supportsSubscriptions():!(!e||"string"==typeof e||!("on"in e)));var e}}var bO=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class wO extends XP{constructor(e,t){var r;super(),this.args=e;const{requestManager:n}=t,{subscriptionManager:i}=t;this._subscriptionManager=n?new vO(n,{},!0):i,this._returnFormat=null!==(r=null==t?void 0:t.returnFormat)&&void 0!==r?r:bb}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return bO(this,void 0,void 0,(function*(){return this._subscriptionManager.addSubscription(this)}))}processSubscriptionData(e){var t,r;(null==e?void 0:e.data)?this._processSubscriptionResult(null!==(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==r?r:null==e?void 0:e.data):e&&NP(e)&&this._processSubscriptionResult(null==e?void 0:e.params.result)}sendSubscriptionRequest(){return bO(this,void 0,void 0,(function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id}))}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return bO(this,void 0,void 0,(function*(){yield this.unsubscribe(),yield this.subscribe()}))}unsubscribe(){return bO(this,void 0,void 0,(function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))}))}sendUnsubscribeRequest(){return bO(this,void 0,void 0,(function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0}))}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var EO=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class AO extends Ob{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||V_(e)||0===e.length?void 0:e}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"==typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),r=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return V_(t)?void 0:this[t]}return this[e]}remove(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return!V_(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return EO(this,void 0,void 0,(function*(){return Promise.all(this.map((r=>EO(this,void 0,void 0,(function*(){return r.encrypt(e,t)})))))}))}decrypt(e,t,r){return EO(this,void 0,void 0,(function*(){const n=yield Promise.all(e.map((e=>EO(this,void 0,void 0,(function*(){return this._accountProvider.decrypt(e,t,r)})))));for(const e of n)this.add(e);return this}))}save(e,t){return EO(this,void 0,void 0,(function*(){const r=AO.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(null!=t?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0}))}load(e,t){return EO(this,void 0,void 0,(function*(){const r=AO.getStorage();if(!r)throw new Error("Local storage not available.");const n=r.getItem(null!=t?t:this._defaultKeyName);return n&&(yield this.decrypt(JSON.parse(n)||[],e)),this}))}}const IO={web:YE};function xO(e,t,r){if(!r.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${r}`);if(16!==t.length)throw new Error("AES: wrong IV length");if(r.startsWith("aes-128")&&16!==e.length||r.startsWith("aes-256")&&32!==e.length)throw new Error("AES: wrong key length")}async function _O(e,t,r){if(!IO.web)throw new Error("Browser crypto not available.");let n;if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(n="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(n="ctr"),!n)throw new Error("AES: unsupported mode");return[await IO.web.subtle.importKey("raw",t,{name:`AES-${n.toUpperCase()}`,length:8*t.length},!0,["encrypt","decrypt"]),{name:`aes-${n}`,iv:r,counter:r,length:128}]}async function SO(e,t,r,n="aes-128-ctr",i=!0){if(xO(t,r,n),IO.web){const[s,o]=await _O(n,t,r),a=await IO.web.subtle.encrypt(o,s,e);let c=new Uint8Array(a);return i||"aes-cbc"!==o.name||e.length%16||(c=c.slice(0,-16)),c}if(IO.node){const s=IO.node.createCipheriv(n,t,r);return s.setAutoPadding(i),aA(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}class PO extends cA{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,DE(e);const r=oA(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return UE(this),this.iHash.update(e),this}digestInto(e){UE(this),jE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const OO=(e,t,r)=>new PO(e,t).update(r).digest();function kO(e,t,r,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=function(e,t,r,n){DE(e);const i=hA({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(LE(s),LE(o),LE(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=oA(t),u=oA(r),h=new Uint8Array(o),l=OO.create(e,c),d=l._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:h,PRF:l,PRFSalt:d}}(e,t,r,n);let u;const h=new Uint8Array(4),l=eA(h),d=new Uint8Array(a.outputLen);for(let e=1,t=0;t<s;e++,t+=a.outputLen){const r=o.subarray(t,t+a.outputLen);l.setInt32(0,e,!1),(u=c._cloneInto(u)).update(h).digestInto(d),r.set(d.subarray(0,r.length));for(let e=1;e<i;e++){a._cloneInto(u).update(d).digestInto(d);for(let e=0;e<r.length;e++)r[e]^=d[e]}}return function(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}(a,c,o,u,d)}OO.create=(e,t)=>new PO(e,t);const TO=(e,t,r)=>e&t^e&r^t&r;class CO extends cA{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eA(this.buffer)}update(e){UE(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=oA(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=eA(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){UE(this),FE(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=eA(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const BO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),RO=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),NO=new Uint32Array(64);class MO extends CO{constructor(){super(64,32,8,!1),this.A=0|RO[0],this.B=0|RO[1],this.C=0|RO[2],this.D=0|RO[3],this.E=0|RO[4],this.F=0|RO[5],this.G=0|RO[6],this.H=0|RO[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)NO[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=NO[e-15],r=NO[e-2],n=tA(t,7)^tA(t,18)^t>>>3,i=tA(r,17)^tA(r,19)^r>>>10;NO[e]=i+NO[e-7]+n+NO[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(tA(o,6)^tA(o,11)^tA(o,25))+((h=o)&a^~h&c)+BO[e]+NO[e]|0,l=(tA(r,2)^tA(r,13)^tA(r,22))+TO(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+l|0}var h;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){NO.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const LO=lA((()=>new MO)),[jO,DO]=(()=>JE.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),UO=new Uint32Array(80),FO=new Uint32Array(80);class qO extends CO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,u,h,l,d,f,p,g]}set(e,t,r,n,i,s,o,a,c,u,h,l,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)UO[r]=e.getUint32(t),FO[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|UO[e-15],r=0|FO[e-15],n=JE.rotrSH(t,r,1)^JE.rotrSH(t,r,8)^JE.shrSH(t,r,7),i=JE.rotrSL(t,r,1)^JE.rotrSL(t,r,8)^JE.shrSL(t,r,7),s=0|UO[e-2],o=0|FO[e-2],a=JE.rotrSH(s,o,19)^JE.rotrBH(s,o,61)^JE.shrSH(s,o,6),c=JE.rotrSL(s,o,19)^JE.rotrBL(s,o,61)^JE.shrSL(s,o,6),u=JE.add4L(i,c,FO[e-7],FO[e-16]),h=JE.add4H(u,n,a,UO[e-7],UO[e-16]);UO[e]=0|h,FO[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=JE.rotrSH(h,l,14)^JE.rotrSH(h,l,18)^JE.rotrBH(h,l,41),v=JE.rotrSL(h,l,14)^JE.rotrSL(h,l,18)^JE.rotrBL(h,l,41),b=h&d^~h&p,w=l&f^~l&g,E=JE.add5L(y,v,w,DO[e],FO[e]),A=JE.add5H(E,m,t,b,jO[e],UO[e]),I=0|E,x=JE.rotrSH(r,n,28)^JE.rotrBH(r,n,34)^JE.rotrBH(r,n,39),_=JE.rotrSL(r,n,28)^JE.rotrBL(r,n,34)^JE.rotrBL(r,n,39),S=r&i^r&o^i&o,P=n&s^n&a^s&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|h,f=0|l,({h,l}=JE.add(0|c,0|u,0|A,0|I)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const O=JE.add3L(I,_,P);r=JE.add3H(O,A,x,S),n=0|O}({h:r,l:n}=JE.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=JE.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=JE.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=JE.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h,l}=JE.add(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=JE.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=JE.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=JE.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,s,o,a,c,u,h,l,d,f,p,g,m,y)}roundClean(){UO.fill(0),FO.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const HO=lA((()=>new qO));function zO(e,t,r,n,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return BA(e),BA(t),kO("sha256"===i?LO:HO,e,t,{c:r,dkLen:n})}function $O(e,t,r,n,i,s){let o=e[t++]^r[n++],a=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],h=e[t++]^r[n++],l=e[t++]^r[n++],d=e[t++]^r[n++],f=e[t++]^r[n++],p=e[t++]^r[n++],g=e[t++]^r[n++],m=e[t++]^r[n++],y=e[t++]^r[n++],v=e[t++]^r[n++],b=e[t++]^r[n++],w=e[t++]^r[n++],E=e[t++]^r[n++],A=o,I=a,x=c,_=u,S=h,P=l,O=d,k=f,T=p,C=g,B=m,R=y,N=v,M=b,L=w,j=E;for(let e=0;e<8;e+=2)S^=rA(A+N|0,7),T^=rA(S+A|0,9),N^=rA(T+S|0,13),A^=rA(N+T|0,18),C^=rA(P+I|0,7),M^=rA(C+P|0,9),I^=rA(M+C|0,13),P^=rA(I+M|0,18),L^=rA(B+O|0,7),x^=rA(L+B|0,9),O^=rA(x+L|0,13),B^=rA(O+x|0,18),_^=rA(j+R|0,7),k^=rA(_+j|0,9),R^=rA(k+_|0,13),j^=rA(R+k|0,18),I^=rA(A+_|0,7),x^=rA(I+A|0,9),_^=rA(x+I|0,13),A^=rA(_+x|0,18),O^=rA(P+S|0,7),k^=rA(O+P|0,9),S^=rA(k+O|0,13),P^=rA(S+k|0,18),R^=rA(B+C|0,7),T^=rA(R+B|0,9),C^=rA(T+R|0,13),B^=rA(C+T|0,18),N^=rA(j+L|0,7),M^=rA(N+j|0,9),L^=rA(M+N|0,13),j^=rA(L+M|0,18);i[s++]=o+A|0,i[s++]=a+I|0,i[s++]=c+x|0,i[s++]=u+_|0,i[s++]=h+S|0,i[s++]=l+P|0,i[s++]=d+O|0,i[s++]=f+k|0,i[s++]=p+T|0,i[s++]=g+C|0,i[s++]=m+B|0,i[s++]=y+R|0,i[s++]=v+N|0,i[s++]=b+M|0,i[s++]=w+L|0,i[s++]=E+j|0}function GO(e,t,r,n,i){let s=n+0,o=n+16*i;for(let n=0;n<16;n++)r[o+n]=e[t+16*(2*i-1)+n];for(let n=0;n<i;n++,s+=16,t+=16)$O(r,o,e,t,r,s),n>0&&(o+=16),$O(r,s,e,t+=16,r,o)}function VO(e,t,r,n,i,s,o){return BA(e),BA(t),function(e,t,r){const{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:c,B32:u,B:h,tmp:l,blockMixCb:d}=function(e,t,r){const n=hA({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:i,r:s,p:o,dkLen:a,asyncTick:c,maxmem:u,onProgress:h}=n;if(LE(i),LE(s),LE(o),LE(a),LE(c),LE(u),void 0!==h&&"function"!=typeof h)throw new Error("progressCb should be function");const l=128*s,d=l/4;if(i<=1||i&i-1||i>=2**(l/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/l)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=l*(i+o);if(f>u)throw new Error(`Scrypt: parameters too large, ${f} (128 * r * (N + p)) > ${u} (maxmem)`);const p=kO(LO,e,t,{c:1,dkLen:l*o}),g=XE(p),m=XE(new Uint8Array(l*i)),y=XE(new Uint8Array(l));let v=()=>{};if(h){const e=2*i*o,t=Math.max(Math.floor(e/1e4),1);let r=0;v=()=>{r++,!h||r%t&&r!==e||h(r/e)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:d,V:m,B32:g,B:p,tmp:y,blockMixCb:v,asyncTick:c}}(e,t,r);nA||iA(u);for(let e=0;e<s;e++){const t=a*e;for(let e=0;e<a;e++)c[e]=u[t+e];for(let e=0,t=0;e<n-1;e++)GO(c,t,c,t+=a,i),d();GO(c,(n-1)*a,u,t,i),d();for(let e=0;e<n;e++){const e=u[t+a-16]%n;for(let r=0;r<a;r++)l[r]=u[t+r]^c[e*a+r];GO(l,0,u,t,i),d()}}return nA||iA(u),function(e,t,r,n,i){const s=kO(LO,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),i.fill(0),s}(e,o,h,c,l)}(e,t,{N:r,r:i,p:n,dkLen:s,onProgress:o})}const KO=BigInt(1),WO=BigInt(2);function QO(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function ZO(e){if(!QO(e))throw new Error("Uint8Array expected")}const JO=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function YO(e){ZO(e);let t="";for(let r=0;r<e.length;r++)t+=JO[e[r]];return t}function XO(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const ek={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function tk(e){return e>=ek._0&&e<=ek._9?e-ek._0:e>=ek._A&&e<=ek._F?e-(ek._A-10):e>=ek._a&&e<=ek._f?e-(ek._a-10):void 0}function rk(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=tk(e.charCodeAt(i)),s=tk(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function nk(e){return XO(YO(e))}function ik(e){return ZO(e),XO(YO(Uint8Array.from(e).reverse()))}function sk(e,t){return rk(e.toString(16).padStart(2*t,"0"))}function ok(e,t){return sk(e,t).reverse()}function ak(e,t,r){let n;if("string"==typeof t)try{n=rk(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!QO(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function ck(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];ZO(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const uk=e=>(WO<<BigInt(e-1))-KO,hk=e=>new Uint8Array(e),lk=e=>Uint8Array.from(e);function dk(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=hk(e),i=hk(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=hk())=>{i=a(lk([0]),e),n=a(),0!==e.length&&(i=a(lk([1]),e),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return ck(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(u()));)c();return o(),r}}const fk={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||QO(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function pk(e,t,r={}){const n=(t,r,n)=>{const i=fk[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const gk=BigInt(0),mk=BigInt(1),yk=BigInt(2),vk=BigInt(3),bk=BigInt(4),wk=BigInt(5),Ek=BigInt(8);function Ak(e,t){const r=e%t;return r>=gk?r:t+r}function Ik(e,t,r){if(r<=gk||t<gk)throw new Error("Expected power/modulo > 0");if(r===mk)return gk;let n=mk;for(;t>gk;)t&mk&&(n=n*e%r),e=e*e%r,t>>=mk;return n}function xk(e,t,r){let n=e;for(;t-- >gk;)n*=n,n%=r;return n}function _k(e,t){if(e===gk||t<=gk)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ak(e,t),n=t,i=gk,s=mk,o=mk,a=gk;for(;r!==gk;){const e=n/r,t=n%r,c=i-o*e,u=s-a*e;n=r,r=t,i=o,s=a,o=c,a=u}if(n!==mk)throw new Error("invert: does not exist");return Ak(i,t)}BigInt(9),BigInt(16);const Sk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pk(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ok(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function kk(e){const t=Ok(e);return t+Math.ceil(t/2)}const Tk=BigInt(0),Ck=BigInt(1);function Bk(e){return pk(e.Fp,Sk.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),pk(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pk(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:Rk,aT:Nk}=v,Mk={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=Mk;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Rk(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Mk,r="string"==typeof e?Nk(e):e;ZO(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Mk._parseInt(r.subarray(2)),{d:o,l:a}=Mk._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),c=r(o);return`30${r(o+s+4)}02${c}${i}02${a}${n}`}},Lk=BigInt(0),jk=BigInt(1),Dk=(BigInt(2),BigInt(3));function Uk(e){const t=function(e){const t=Bk(e);return pk(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return Ak(e,n)}function a(e){return _k(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:l}=function(e){const t=function(e){const t=Bk(e);pk(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return ck(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&Lk<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(QO(e)&&(e=YO(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:nk(ak("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=Ak(o,s)),a(o),o}const u=new Map;function h(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ak("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=s(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return c&&u}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Dk),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,h=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),h=r.mul(s,a),h=r.add(h,h),c=r.mul(e,h),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(g,c),h=r.mul(i,h),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,g),u=r.add(u,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(c,u,h)}add(e){h(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let u=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,g=r.mul(t.b,Dk);let m=r.mul(n,o),y=r.mul(i,a),v=r.mul(s,c),b=r.add(n,i),w=r.add(o,a);b=r.mul(b,w),w=r.add(m,y),b=r.sub(b,w),w=r.add(n,s);let E=r.add(o,c);return w=r.mul(w,E),E=r.add(m,v),w=r.sub(w,E),E=r.add(i,s),u=r.add(a,c),E=r.mul(E,u),u=r.add(y,v),E=r.sub(E,u),f=r.mul(p,w),u=r.mul(g,v),f=r.add(u,f),u=r.sub(y,f),f=r.add(y,f),d=r.mul(u,f),y=r.add(m,m),y=r.add(y,m),v=r.mul(p,v),w=r.mul(g,w),y=r.add(y,v),v=r.sub(m,v),v=r.mul(p,v),w=r.add(w,v),m=r.mul(y,w),d=r.add(d,m),m=r.mul(E,w),u=r.mul(b,u),u=r.sub(u,m),m=r.mul(b,y),f=r.mul(E,f),f=r.add(f,m),new l(u,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,u,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}))}multiplyUnsafe(e){const n=l.ZERO;if(e===Lk)return n;if(a(e),e===jk)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:c,k2:u}=i.splitScalar(e),h=n,d=n,p=this;for(;o>Lk||u>Lk;)o&jk&&(h=h.add(p)),u&jk&&(d=d.add(p)),p=p.double(),o>>=jk,u>>=jk;return s&&(h=h.negate()),c&&(d=d.negate()),d=new l(r.mul(d.px,i.beta),d.py,d.pz),h.add(d)}multiply(e){a(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(s);let{p:u,f:h}=this.wNAF(t),{p:d,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,o.beta),d.py,d.pz),n=u.add(d),i=h.add(p)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return l.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==Lk&&t!==jk&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),c=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===jk)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===jk?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(l,this,e)}toHex(e=!0){return YO(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>Tk;)r&Ck&&(n=n.add(i)),i=i.double(),r>>=Ck;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=n(t);let c=e.ZERO,u=e.BASE;const h=BigInt(2**t-1),l=2**t,d=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let n=Number(s&h);s>>=d,n>a&&(n-=l,s+=Ck);const o=t,f=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[o])):c=c.add(r(g,i[f]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=ck;return n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=nk(o);if(!(Lk<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&jk)===jk)&&(i=r.neg(i)),{x:e,y:i}}var a}}),d=e=>YO(sk(e,t.nByteLength));function f(e){return e>n>>jk}const p=(e,t,r)=>nk(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ak("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Mk.toSig(ak("DER",e));return new g(t,r)}assertValidity(){if(!l(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,u=b(ak("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const h=2===s||3===s?n+t.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&s?"03":"02",f=c.fromHex(l+d(h)),p=a(h),g=o(-u*p),m=o(i*p),y=c.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return rk(this.toDERHex())}toDERHex(){return Mk.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rk(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=kk(t.n);return function(e,t,r=!1){const n=e.length,i=Ok(t),s=kk(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=Ak(r?nk(e):ik(e),t-mk)+mk;return r?ok(o,i):sk(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=QO(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}const v=t.bits2int||function(e){const r=nk(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return o(v(e))},w=uk(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(Lk<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return sk(e,t.nByteLength)}const A={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,n,i=A){const{seed:s,k2sig:h}=function(e,n,i=A){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:h}=t;let{lowS:d,prehash:p,extraEntropy:m}=i;null==d&&(d=!0),e=ak("msgHash",e),p&&(e=ak("prehashed msgHash",s(e)));const y=b(e),w=u(n),I=[E(w),E(y)];if(null!=m&&!1!==m){const e=!0===m?h(r.BYTES):m;I.push(ak("extraEntropy",e))}const x=ck(...I),_=y;return{seed:x,k2sig:function(e){const t=v(e);if(!l(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===Lk)return;const s=o(r*o(_+i*w));if(s===Lk)return;let u=(n.x===i?0:2)|Number(n.y&jk),h=s;return d&&f(s)&&(h=function(e){return f(e)?o(-e):e}(s),u^=1),new g(i,h,u)}}}(e,n,i),d=t;return dk(d.hash.outputLen,d.nByteLength,d.hmac)(s,h)},verify:function(e,r,n,i=I){const s=e;if(r=ak("msgHash",r),n=ak("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:h}=i;let l,d;try{if("string"==typeof s||QO(s))try{l=g.fromDER(s)}catch(e){if(!(e instanceof Mk.Err))throw e;l=g.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;l=new g(e,t)}}d=c.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;h&&(r=t.hash(r));const{r:f,s:p}=l,m=b(r),y=a(p),v=o(m*y),w=o(f*y),E=c.BASE.multiplyAndAddUnsafe(d,v,w)?.toAffine();return!!E&&o(E.x)===f},ProjectivePoint:c,Signature:g,utils:m}}function Fk(e){return{hash:e,hmac:(t,...r)=>OO(e,t,aA(...r)),randomBytes:dA}}BigInt(4);const qk=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Hk=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zk=BigInt(1),$k=BigInt(2),Gk=(e,t)=>(e+t/$k)/t;const Vk=function(e,t,r=!1,n={}){if(e<=gk)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=Pk(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(e){if(e%bk===vk){const t=(e+mk)/bk;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Ek===wk){const t=(e-wk)/Ek;return function(e,r){const n=e.mul(r,yk),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,yk),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-mk)/yk;let r,n,i;for(r=e-mk,n=0;r%yk===gk;r/=yk,n++);for(i=yk;i<e&&Ik(i,t,e)!==e-mk;i++);if(1===n){const t=(e+mk)/bk;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+mk)/yk;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),h=e.pow(o,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,mk<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:uk(i),ZERO:gk,ONE:mk,create:t=>Ak(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return gk<=t&&t<e},is0:e=>e===gk,isOdd:e=>(e&mk)===mk,neg:t=>Ak(-t,e),eql:(e,t)=>e===t,sqr:t=>Ak(t*t,e),add:(t,r)=>Ak(t+r,e),sub:(t,r)=>Ak(t-r,e),mul:(t,r)=>Ak(t*r,e),pow:(e,t)=>function(e,t,r){if(r<gk)throw new Error("Expected power > 0");if(r===gk)return e.ONE;if(r===mk)return t;let n=e.ONE,i=t;for(;r>gk;)r&mk&&(n=e.mul(n,i)),i=e.sqr(i),r>>=mk;return n}(a,e,t),div:(t,r)=>Ak(t*_k(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>_k(t,e),sqrt:n.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?ok(e,s):sk(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?ik(e):nk(e)}});return Object.freeze(a)}(qk,void 0,void 0,{sqrt:function(e){const t=qk,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=xk(h,r,t)*h%t,d=xk(l,r,t)*h%t,f=xk(d,$k,t)*u%t,p=xk(f,i,t)*f%t,g=xk(p,s,t)*p%t,m=xk(g,a,t)*g%t,y=xk(m,c,t)*m%t,v=xk(y,a,t)*g%t,b=xk(v,r,t)*h%t,w=xk(b,o,t)*p%t,E=xk(w,n,t)*u%t,A=xk(E,$k,t);if(!Vk.eql(Vk.sqr(A),e))throw new Error("Cannot find square root");return A}}),Kk=function(e,t){const r=t=>Uk({...e,...Fk(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Vk,n:Hk,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Hk,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-zk*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Gk(s*e,t),c=Gk(-n*e,t);let u=Ak(e-a*r-c*i,t),h=Ak(-a*n-c*s,t);const l=u>o,d=h>o;if(l&&(u=t-u),d&&(h=t-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:d,k2:h}}}},LO);var Wk;BigInt(0),Kk.ProjectivePoint;const Qk=null!==(Wk=Kk)&&void 0!==Wk?Wk:b,Zk=BigInt("0xffffffffffffffff"),Jk=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Yk=Qk.CURVE.n/BigInt(2),Xk={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var eT,tT,rT,nT,iT,sT;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia"}(eT||(eT={})),function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Merge="merge",e.Shanghai="shanghai",e.ShardingForkDev="shardingFork"}(tT||(tT={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(rT||(rT={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(nT||(nT={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}(iT||(iT={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(sT||(sT={}));const oT=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return g_(e)?e.slice(2):e},aT=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};function cT(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}const uT=function(e){var t;if(null==e)return new Uint8Array;if(e instanceof Uint8Array)return e;if("Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name))return Uint8Array.from(e);if(Array.isArray(e))return Uint8Array.from(e);if("string"==typeof e){if(!f_(e))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${e}`);return cS(cT(oT(e)))}if("number"==typeof e)return uT(lS(e));if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t=`0${t}`),uT(`0x${t}`)}if(e.toArray)return Uint8Array.from(e.toArray());throw new Error("invalid type")};function hT(e){const t=aS(e);return"0x"===t?BigInt(0):BigInt(t)}const lT=function(e){return new Uint8Array(e).fill(0)};function dT(e){if(!eS(e))throw new Error(`This method only supports Uint8Array but input was: ${e}`)}const fT=function(e,t){return dT(e),function(e,t){const r=lT(t);return e.length<t?(r.set(e,t-e.length),r):e.subarray(-t)}(e,t)},pT=function(e){return dT(e),function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}(e)},gT=e=>`0x${e.toString(16)}`;function mT(e){return pT(uT(`0x${e.toString(16)}`))}const yT=function(e,t,r,n,i){const s=function(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}(t,i);if(!function(e){return e===BigInt(0)||e===BigInt(1)}(s))throw new Error("Invalid signature v value");return new Qk.Signature(hT(r),hT(n)).addRecoveryBit(Number(s)).recoverPublicKey(e).toRawBytes(!1).slice(1)};function vT(e,t){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!f_(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=uT(e);switch(t){case sT.Uint8Array:return r;case sT.BigInt:return hT(r);case sT.Number:{const e=hT(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case sT.PrefixedHexString:return aS(r);default:throw new Error("unknown outputType")}}var bT=i(6289),wT=i(2566);const ET={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},AT={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},IT={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},xT={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},_T={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:ST}=wT;class PT extends NS{static custom(e,t={}){var r;const n=null!==(r=t.baseChain)&&void 0!==r?r:"mainnet",i=Object.assign({},PT._getChainParams(n));if(i.name="custom-chain","string"!=typeof e)return new PT(Object.assign({chain:Object.assign(Object.assign({},i),e)},t));if(e===iT.PolygonMainnet)return PT.custom({name:iT.PolygonMainnet,chainId:137,networkId:137},t);if(e===iT.PolygonMumbai)return PT.custom({name:iT.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===iT.ArbitrumRinkebyTestnet)return PT.custom({name:iT.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===iT.ArbitrumOne)return PT.custom({name:iT.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===iT.xDaiChain)return PT.custom({name:iT.xDaiChain,chainId:100,networkId:100},t);if(e===iT.OptimisticKovan)return PT.custom({name:iT.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:tT.Berlin},t));if(e===iT.OptimisticEthereum)return PT.custom({name:iT.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:tT.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:n,hardfork:i,mergeForkIdPostMerge:s}){var o;const a=function(e,t,r){try{if(["config","difficulty","gasLimit","alloc"].some((t=>!(t in e))))throw new Error("Invalid format, expected geth genesis fields missing");return void 0!==t&&(e.name=t),function(e,t=!0){var r,n;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:c,coinbase:u,baseFeePerGas:h}=e;let{extraData:l,timestamp:d,nonce:f}=e;const p=Number(d),{chainId:g}=s;if(""===l&&(l="0x"),g_(d)||(d=aT(parseInt(d))),18!==f.length&&(f=function(e){return e&&"0x0"!==e?g_(e)?`0x${oT(e).padStart(16,"0")}`:`0x${e.padStart(16,"0")}`:"0x0000000000000000"}(f)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const m={name:i,chainId:g,networkId:g,genesis:{timestamp:d,gasLimit:parseInt(c),difficulty:parseInt(o),nonce:f,extraData:l,mixHash:a,coinbase:u,baseFeePerGas:h},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==s.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(r=s.clique.period)&&void 0!==r?r:s.clique.blockperiodseconds,epoch:null!==(n=s.clique.epoch)&&void 0!==n?n:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},y={[tT.Homestead]:{name:"homesteadBlock"},[tT.Dao]:{name:"daoForkBlock"},[tT.TangerineWhistle]:{name:"eip150Block"},[tT.SpuriousDragon]:{name:"eip155Block"},[tT.Byzantium]:{name:"byzantiumBlock"},[tT.Constantinople]:{name:"constantinopleBlock"},[tT.Petersburg]:{name:"petersburgBlock"},[tT.Istanbul]:{name:"istanbulBlock"},[tT.MuirGlacier]:{name:"muirGlacierBlock"},[tT.Berlin]:{name:"berlinBlock"},[tT.London]:{name:"londonBlock"},[tT.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[tT.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[tT.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},v=Object.keys(y).reduce(((e,t)=>(e[y[t].name]=t,e)),{}),b=Object.keys(s).filter((e=>void 0!==v[e]&&void 0!==s[e]&&null!==s[e]));if(m.hardforks=b.map((e=>({name:v[e],block:!0===y[v[e]].isTimestamp||"number"!=typeof s[e]?null:s[e],timestamp:!0===y[v[e]].isTimestamp&&"number"==typeof s[e]?s[e]:void 0}))).filter((e=>null!==e.block||void 0!==e.timestamp)),m.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.block)&&void 0!==r?r:1/0)-(null!==(n=t.block)&&void 0!==n?n:1/0)})),m.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.timestamp)&&void 0!==r?r:p)-(null!==(n=t.timestamp)&&void 0!==n?n:p)})),void 0!==s.terminalTotalDifficulty){const e={name:tT.Merge,ttd:s.terminalTotalDifficulty,block:null},t=m.hardforks.findIndex((e=>{var t;return!0===(null===(t=y[e.name])||void 0===t?void 0:t.postMerge)}));-1!==t?m.hardforks.splice(t,0,e):m.hardforks.push(e)}const w=m.hardforks.length>0?m.hardforks.slice(-1)[0]:void 0;return m.hardfork=null==w?void 0:w.name,m.hardforks.unshift({name:tT.Chainstart,block:0}),m}(e,r)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}}(e,t,s),c=new PT({chain:null!==(o=a.name)&&void 0!==o?o:"custom",customChains:[a],eips:r,hardfork:null!=i?i:a.hardfork});return void 0!==n&&c.setForkHashes(n),c}static isSupportedChainId(e){const t=this._getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){let r=e;const n=this._getInitializedChains(t);if("number"==typeof r||"bigint"==typeof r){if(r=r.toString(),n.names[r])return n[n.names[r]];throw new Error(`Chain with ID ${r} not supported`)}if(void 0!==n[r])return n[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var t,r;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(r=this._chainParams.defaultHardfork)&&void 0!==r?r:tT.Merge,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,_T[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=PT._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}}for(const e of this.hardforks())if(void 0===e.block)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,r){const n=vT(e,sT.BigInt),i=vT(t,sT.BigInt),s=vT(r,sT.Number),o=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp)),a=o.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(o.slice(a+1).findIndex((e=>null!==e.ttd&&void 0!==e.ttd))>=0)throw Error("More than one merge hardforks found with ttd specified");let c=o.findIndex((e=>null!==e.block&&e.block>n||void 0!==s&&Number(e.timestamp)>s));if(-1===c)c=o.length;else if(0===c)throw Error("Must have at least one hardfork at block 0");if(void 0===s&&(c-=o.slice(0,c).reverse().findIndex((e=>null!==e.block||void 0!==e.ttd))),c-=1,null===o[c].block&&void 0===o[c].timestamp)(null==i||BigInt(o[c].ttd)>i)&&(c-=1);else if(a>=0&&null!=i){if(c>=a&&BigInt(o[a].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<a&&BigInt(o[a].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const u=c;for(;c<o.length-1&&o[c].block===o[c+1].block&&o[c].timestamp===o[c+1].timestamp;c+=1);if(s){const e=o.slice(0,u).reduce(((e,t)=>{var r;return Math.max(Number(null!==(r=t.timestamp)&&void 0!==r?r:"0"),e)}),0);if(e>s)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");const t=o.slice(c+1).reduce(((e,t)=>{var r;return Math.min(Number(null!==(r=t.timestamp)&&void 0!==r?r:s),e)}),s);if(t<s)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return o[c].name}setHardforkByBlockNumber(e,t,r){const n=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(n),n}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in xT))throw new Error(`${t} not supported`);const r=this.gteHardfork(xT[t].minimumHardfork);if(!r)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(void 0!==xT[t].requiredEIPs)for(const r of xT[t].requiredEIPs)if(!e.includes(r)&&!this.isActivatedEIP(r))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}this._eips=e}param(e,t){let r;for(const n of this._eips)if(r=this.paramByEIP(e,t,n),void 0!==r)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let n=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const r=i[1].eips;for(const i of r){const r=this.paramByEIP(e,t,i);n="bigint"==typeof r?r:n}}else{if(void 0===i[1][e])throw new Error(`Topic ${e} not defined`);void 0!==i[1][e][t]&&(n=i[1][e][t].v)}if(i[0]===r)break}return BigInt(null!=n?n:0)}paramByEIP(e,t,r){if(!(r in xT))throw new Error(`${r} not supported`);const n=xT[r];if(!(e in n))throw new Error(`Topic ${e} not defined`);if(void 0===n[e][t])return;const i=n[e][t].v;return BigInt(i)}paramByBlock(e,t,r,n,i){const s=this.getHardforkByBlockNumber(r,n,i);return this.paramByHardfork(e,t,s)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=vT(t,sT.BigInt),n=null!=e?e:this._hardfork,i=this.hardforkBlock(n);return"bigint"==typeof i&&i!==BigInt(0)&&r>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=null!=e?e:this._hardfork,n=this.hardforks();let i=-1,s=-1,o=0;for(const e of n)e.name===r&&(i=o),e.name===t&&(s=o),o+=1;return i>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.block;return null==n?null:BigInt(n)}hardforkTimestamp(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.timestamp;return null==n?null:BigInt(n)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock("number"==typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.ttd;return null==n?null:BigInt(n)}isHardforkBlock(e,t){const r=vT(e,sT.BigInt),n=null!=t?t:this._hardfork,i=this.hardforkBlock(n);return"bigint"==typeof i&&i!==BigInt(0)&&i===r}nextHardforkBlockOrTimestamp(e){var t,r,n;const i=null!==(t=e)&&void 0!==t?t:this._hardfork,s=this.hardforks();let o=s.findIndex((e=>e.name===i));if(i===tT.Merge&&(o-=1),o<0)return null;let a=null!==(r=s[o].timestamp)&&void 0!==r?r:s[o].block;a=null!=a?Number(a):null;const c=s.slice(o+1).find((e=>{var t;let r=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return r=null!=r?Number(r):null,e.name!==tT.Merge&&null!=r&&r!==a}));if(void 0===c)return null;const u=null!==(n=c.timestamp)&&void 0!==n?n:c.block;return null==u?null:BigInt(u)}nextHardforkBlock(e){var t;const r=null!==(t=e)&&void 0!==t?t:this._hardfork;let n=this.hardforkBlock(r);if(null===n&&r===tT.Merge){const e=this.hardforks(),t=e.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(t<0)throw Error("Merge hardfork should have been found");n=this.hardforkBlock(e[t-1].name)}return null===n?null:this.hardforks().reduce(((e,t)=>{const r=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return r>n&&null===e?r:e}),null)}isNextHardforkBlock(e,t){const r=vT(e,sT.BigInt),n=null!=t?t:this._hardfork,i=this.nextHardforkBlock(n);return null!==i&&i===r}_calcForkHash(e,t){let r=new Uint8Array,n=0;for(const t of this.hardforks()){const{block:i,timestamp:s,name:o}=t;let a=null!=s?s:i;if(a=null!==a?Number(a):null,"number"==typeof a&&0!==a&&a!==n&&o!==tT.Merge&&(r=tS(r,cS(a.toString(16).padStart(16,"0"))),n=a),t.name===e)break}const i=tS(t,r),s=aS(function(e){const t=aT(e);return cS(`0x${cT(t.slice(2))}`)}(ST(i)>>>0));return s}forkHash(e,t){const r=null!=e?e:this._hardfork,n=this._getHardfork(r);if(null===n||null===(null==n?void 0:n.block)&&void 0===(null==n?void 0:n.timestamp)&&void 0===(null==n?void 0:n.ttd))throw new Error("No fork hash calculation possible for future hardfork");if(null!==(null==n?void 0:n.forkHash)&&void 0!==(null==n?void 0:n.forkHash))return n.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const n=null!==(t=r.timestamp)&&void 0!==t?t:r.block;null!==r.forkHash&&void 0!==r.forkHash||null==n&&void 0===r.ttd||(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return null!=t?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return null!=t?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const e of this.HARDFORK_CHANGES)if("consensus"in e[1]&&(r=e[1].consensus[e[1].consensus.algorithm]),e[0]===t)break;return null!==(e=null!=r?r:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[e,r]of Object.entries(eT))t[r]=e.toLowerCase();const r={mainnet:AT,goerli:ET,sepolia:IT};if(e)for(const n of e){const{name:e}=n;t[n.chainId.toString()]=e,r[e]=n}return r.names=t,r}}var OT;!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(OT||(OT={}));class kT{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new kT(lT(20))}equals(e){return rS(this.buf,e.buf)}isZero(){return this.equals(kT.zero())}toString(){return aS(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let r=e;if(dT(r),t&&64!==r.length&&(r=Qk.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),64!==r.length)throw new Error("Expected pubKey to be of length 64");return MA(r).slice(-20)}}const TT=e=>{let t,r;if(function(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}(e)){r=null!=e?e:[];const n=[];for(let e=0;e<r.length;e+=1){const t=r[e],i=aS(t[0]),s=[];for(let e=0;e<t[1].length;e+=1)s.push(aS(t[1][e]));const o={address:i,storageKeys:s};n.push(o)}t=n}else{t=e;const n=[];for(let t=0;t<e.length;t+=1){const r=e[t],i=uT(r.address),s=[];for(let e=0;e<r.storageKeys.length;e+=1)s.push(uT(r.storageKeys[e]));n.push([i,s])}r=n}return{AccessListJSON:t,accessList:r}},CT=e=>{for(let t=0;t<e.length;t+=1){const r=e[t],n=r[0],i=r[1];if(void 0!==r[2])throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e+=1)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},BT=e=>{const t=[];for(let r=0;r<e.length;r+=1){const n=e[r],i={address:aS(fT(n[0],20)),storageKeys:[]},s=n&&n[1];for(let e=0;e<s.length;e+=1){const t=s[e];i.storageKeys.push(aS(fT(t,32)))}t.push(i)}return t},RT=(e,t)=>{const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let i=0;for(let t=0;t<e.length;t+=1)i+=e[t][1].length;return e.length*Number(n)+i*Number(r)};class NT{constructor(e,t){var r,n;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=eT.Mainnet,this.DEFAULT_HARDFORK=tT.Merge;const{nonce:i,gasLimit:s,to:o,value:a,data:c,v:u,r:h,s:l,type:d}=e;this._type=Number(hT(uT(d))),this.txOptions=t;const f=uT(""===o?"0x":o),p=uT(""===u?"0x":u),g=uT(""===h?"0x":h),m=uT(""===l?"0x":l);this.nonce=hT(uT(""===i?"0x":i)),this.gasLimit=hT(uT(""===s?"0x":s)),this.to=f.length>0?new kT(f):void 0,this.value=hT(uT(""===a?"0x":a)),this.data=uT(""===c?"0x":c),this.v=p.length>0?hT(p):void 0,this.r=g.length>0?hT(g):void 0,this.s=m.length>0?hT(m):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=void 0===this.to||null===this.to,v=null!==(r=t.allowUnlimitedInitCodeSize)&&void 0!==r&&r,b=null!==(n=t.common)&&void 0!==n?n:this._getCommon();y&&b.isActivatedEIP(3860)&&!v&&((e,t)=>{const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)})(b,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>Yk){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let n=0;n<this.data.length;n+=1)0===this.data[n]?r+=e:r+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return void 0!==e&&void 0!==t&&void 0!==r}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==pT(e).length}catch(e){return!1}}getSenderAddress(){return new kT(kT.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(OT.EIP155ReplayProtection)&&(this.activeCapabilities.push(OT.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:n,r:i,s}=this._ecsign(r,e),o=this._processSignature(n,i,s);if(t){const e=this.activeCapabilities.indexOf(OT.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return o}_getCommon(e,t){var r,n,i,s;if(void 0!==t){const r=hT(uT(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return PT.isSupportedChainId(r)?new PT({chain:r,hardfork:this.DEFAULT_HARDFORK}):PT.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if((null==e?void 0:e.copy)&&"function"==typeof(null==e?void 0:e.copy))return e.copy();if(e){const t="function"==typeof e.hardfork?e.hardfork():e.hardfork;return PT.custom({name:"custom-chain",networkId:e.networkId?e.networkId():null!==(n=BigInt(null===(r=e.customChain)||void 0===r?void 0:r.networkId))&&void 0!==n?n:void 0,chainId:e.chainId?e.chainId():null!==(s=BigInt(null===(i=e.customChain)||void 0===i?void 0:i.chainId))&&void 0!==s?s:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:t||this.DEFAULT_HARDFORK})}return new PT({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,i]of Object.entries(e))switch(t){case 64:if(r){if(void 0!==i&&i>=Zk){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>Zk){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(void 0!==i&&i>=Jk){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>Jk){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?aS(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}_ecsign(e,t,r){const n=Qk.sign(e,t),i=n.toCompactRawBytes();return{r:i.subarray(0,32),s:i.subarray(32,64),v:void 0===r?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2)}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const MT=cS(2..toString(16).padStart(2,"0"));class LT extends NT{static fromTxData(e,t={}){return new LT(e,t)}static fromSerializedTx(e,t={}){if(!rS(e.subarray(0,1),MT))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${aS(e.subarray(0,1))}`);const r=bT.Tj.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return LT.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,i,s,o,a,c,u,h,l,d,f]=e;return this._validateNotArray({chainId:r,v:l}),m_({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,value:c,v:l,r:d,s:f}),new LT({chainId:hT(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,to:a,value:c,data:u,accessList:null!=h?h:[],v:void 0!==l?hT(l):void 0,r:d,s:f},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";const{chainId:n,accessList:i,maxFeePerGas:s,maxPriorityFeePerGas:o}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const a=TT(null!=i?i:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,CT(this.accessList),this.maxFeePerGas=hT(uT(""===s?"0x":s)),this.maxPriorityFeePerGas=hT(uT(""===o?"0x":o)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),NT._validateNotArray(e),this.gasLimit*this.maxFeePerGas>Jk){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(RT(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,n=(t<r?t:r)+e;return this.gasLimit*n+this.value}raw(){return[mT(this.chainId),mT(this.nonce),mT(this.maxPriorityFeePerGas),mT(this.maxFeePerGas),mT(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),mT(this.value),this.data,this.accessList,void 0!==this.v?mT(this.v):Uint8Array.from([]),void 0!==this.r?mT(this.r):Uint8Array.from([]),void 0!==this.s?mT(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return tS(MT,bT.Tj.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),r=tS(MT,bT.Tj.encode(t));return e?MA(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=MA(this.serialize())),this.cache.hash):MA(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return yT(e,t+BigInt(27),mT(r),mT(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return LT.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:hT(t),s:hT(r)},n)}toJSON(){const e=BT(this.accessList);return{chainId:gT(this.chainId),nonce:gT(this.nonce),maxPriorityFeePerGas:gT(this.maxPriorityFeePerGas),maxFeePerGas:gT(this.maxFeePerGas),gasLimit:gT(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:gT(this.value),data:aS(this.data),accessList:e,v:void 0!==this.v?gT(this.v):void 0,r:void 0!==this.r?gT(this.r):void 0,s:void 0!==this.s?gT(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const jT=cS(1..toString(16).padStart(2,"0"));class DT extends NT{static fromTxData(e,t={}){return new DT(e,t)}static fromSerializedTx(e,t={}){if(!rS(e.subarray(0,1),jT))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${aS(e.subarray(0,1))}`);const r=bT.Tj.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return DT.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,i,s,o,a,c,u,h,l,d]=e;return this._validateNotArray({chainId:r,v:h}),m_({nonce:n,gasPrice:i,gasLimit:s,value:a,v:h,r:l,s:d}),new DT({chainId:hT(r),nonce:n,gasPrice:i,gasLimit:s,to:o,value:a,data:c,accessList:null!=u?u:[],v:void 0!==h?hT(h):void 0,r:l,s:d},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:n,accessList:i,gasPrice:s}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const o=TT(null!=i?i:[]);if(this.accessList=o.accessList,this.AccessListJSON=o.AccessListJSON,CT(this.accessList),this.gasPrice=hT(uT(""===s?"0x":s)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),NT._validateNotArray(e),this.gasPrice*this.gasLimit>Jk){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(RT(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[mT(this.chainId),mT(this.nonce),mT(this.gasPrice),mT(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),mT(this.value),this.data,this.accessList,void 0!==this.v?mT(this.v):Uint8Array.from([]),void 0!==this.r?mT(this.r):Uint8Array.from([]),void 0!==this.s?mT(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return tS(jT,bT.Tj.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),r=tS(jT,bT.Tj.encode(t));return e?MA(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=MA(this.serialize())),this.cache.hash):MA(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return yT(e,t+BigInt(27),mT(r),mT(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return DT.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:hT(t),s:hT(r)},n)}toJSON(){const e=BT(this.accessList);return{chainId:gT(this.chainId),nonce:gT(this.nonce),gasPrice:gT(this.gasPrice),gasLimit:gT(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:gT(this.value),data:aS(this.data),accessList:e,v:void 0!==this.v?gT(this.v):void 0,r:void 0!==this.r?gT(this.r):void 0,s:void 0!==this.s?gT(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}function UT(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class FT extends NT{static fromTxData(e,t={}){return new FT(e,t)}static fromSerializedTx(e,t={}){const r=bT.Tj.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,i,s,o,a,c,u,h]=e;return m_({nonce:r,gasPrice:n,gasLimit:i,value:o,v:c,r:u,s:h}),new FT({nonce:r,gasPrice:n,gasLimit:i,to:s,value:o,data:a,v:c,r:u,s:h},t)}constructor(e,t={}){var r;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=hT(uT(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>Jk){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),NT._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?UT(this.v,this.common.chainId())&&this.activeCapabilities.push(OT.EIP155ReplayProtection):this.activeCapabilities.push(OT.EIP155ReplayProtection)),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}raw(){return[mT(this.nonce),mT(this.gasPrice),mT(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),mT(this.value),this.data,void 0!==this.v?mT(this.v):Uint8Array.from([]),void 0!==this.r?mT(this.r):Uint8Array.from([]),void 0!==this.s?mT(this.s):Uint8Array.from([])]}serialize(){return bT.Tj.encode(this.raw())}_getMessageToSign(){const e=[mT(this.nonce),mT(this.gasPrice),mT(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),mT(this.value),this.data];return this.supports(OT.EIP155ReplayProtection)&&(e.push(uT(this.common.chainId())),e.push(pT(uT(0))),e.push(pT(uT(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?MA(bT.Tj.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=MA(bT.Tj.encode(this.raw()))),this.cache.hash):MA(bT.Tj.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return MA(bT.Tj.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return yT(e,t,mT(r),mT(n),this.supports(OT.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){let n=e;this.supports(OT.EIP155ReplayProtection)&&(n+=this.common.chainId()*BigInt(2)+BigInt(8));const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return FT.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:n,r:hT(t),s:hT(r)},i)}toJSON(){return{nonce:gT(this.nonce),gasPrice:gT(this.gasPrice),gasLimit:gT(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:gT(this.value),data:aS(this.data),v:void 0!==this.v?gT(this.v):void 0,r:void 0!==this.r?gT(this.r):void 0,s:void 0!==this.s?gT(this.s):void 0}}_validateTxV(e,t){let r;const n=void 0!==e?Number(e):void 0;if(void 0!==n&&n<37&&27!==n&&28!==n)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${n}`);if(void 0!==n&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!UT(BigInt(n),t.chainId()))throw new Error(`Incompatible EIP155-based V ${n} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(n-35)%2==0?35:36,r=BigInt(n-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const qT=new Map;class HT{constructor(){}static typeToInt(e){return Number(hT(uT(e)))}static registerTransactionType(e,t){const r=HT.typeToInt(e);qT.set(r,t)}static fromTxData(e,t={}){if(!("type"in e)||void 0===e.type)return FT.fromTxData(e,t);const r=HT.typeToInt(e.type);if(0===r)return FT.fromTxData(e,t);if(1===r)return DT.fromTxData(e,t);if(2===r)return LT.fromTxData(e,t);const n=qT.get(r);if(null==n?void 0:n.fromTxData)return n.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return FT.fromSerializedTx(e,t);switch(e[0]){case 1:return DT.fromSerializedTx(e,t);case 2:return LT.fromSerializedTx(e,t);default:{const r=qT.get(Number(e[0]));if(null==r?void 0:r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}}static fromBlockBodyData(e,t={}){if(eS(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return FT.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var zT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const $T=(e,t)=>{let r;if(!t&&"string"==typeof e&&d_(e)&&66!==e.length)throw new Qb;try{r=eS(e)?e:sS(e)}catch(e){throw new Zb}if(!t&&32!==r.byteLength)throw new Qb;return r},GT=(e,t=!1)=>{const r=d_(e)?e:pS(e),n=cS(r),i=cS(gS(`Ethereum Signed Message:\n${n.byteLength}`)),s=t?n:tS(i,n);return dP(s)},VT=(e,t)=>{const r=GT(e),{messageHash:n,v:i,r:s,s:o,signature:a}=((e,t)=>{const r=$T(t),n=Qk.sign(e.substring(2),r),i=n.toCompactRawBytes(),s=n.r.toString(16).padStart(64,"0"),o=n.s.toString(16).padStart(64,"0"),a=n.recovery+27;return{messageHash:e,v:lS(a),r:`0x${s}`,s:`0x${o}`,signature:`${aS(i)}${a.toString(16)}`}})(r,t);return{message:e,messageHash:n,v:i,r:s,s:o,signature:a}},KT=e=>{if(V_(e))throw new Bw;const t=HT.fromSerializedData(cS(e));return TS(t.getSenderAddress().toString())},WT=(e,t,r,n,i)=>{if("object"==typeof e){const t=`${e.r}${e.s.slice(2)}${e.v.slice(2)}`;return WT(e.messageHash,t,r)}if("string"==typeof t&&"string"==typeof r&&!V_(n)){const s=`${r}${n.slice(2)}${t.slice(2)}`;return WT(e,s,i)}if(V_(t))throw new Jb("signature string undefined");const s=r?e:GT(e);let o=parseInt(t.substring(130),16);o>26&&(o-=27);const a=Qk.Signature.fromCompact(t.slice(2,130)).addRecoveryBit(o).recoverPublicKey(s.replace("0x","")).toRawBytes(!1),c=dP(a.subarray(1));return TS(`0x${c.slice(-40)}`)},QT=e=>{const t=$T(e),r=Qk.getPublicKey(t,!1),n=dP(r.slice(1)).slice(-40);return TS(`0x${n}`)},ZT=(e,t)=>{const r=$T(e);return`0x${aS(Qk.getPublicKey(r,t)).slice(4)}`},JT=(e,t,r)=>zT(void 0,void 0,void 0,(function*(){var n,i,s,o,a,c,u;const h=$T(e);let l;if(l=(null==r?void 0:r.salt)?"string"==typeof r.salt?cS(r.salt):r.salt:EP(32),!l_(t)&&!eS(t))throw new tw;const d="string"==typeof t?cS(pS(t)):t;let f;if(null==r?void 0:r.iv){if(f="string"==typeof r.iv?cS(r.iv):r.iv,16!==f.length)throw new rw}else f=EP(16);const p=null!==(n=null==r?void 0:r.kdf)&&void 0!==n?n:"scrypt";let g,m;if("pbkdf2"===p){if(m={dklen:null!==(i=null==r?void 0:r.dklen)&&void 0!==i?i:32,salt:aS(l).replace("0x",""),c:null!==(s=null==r?void 0:r.c)&&void 0!==s?s:262144,prf:"hmac-sha256"},m.c<1e3)throw new nw;g=zO(d,l,m.c,m.dklen,"sha256")}else{if("scrypt"!==p)throw new Yb;m={n:null!==(o=null==r?void 0:r.n)&&void 0!==o?o:8192,r:null!==(a=null==r?void 0:r.r)&&void 0!==a?a:8,p:null!==(c=null==r?void 0:r.p)&&void 0!==c?c:1,dklen:null!==(u=null==r?void 0:r.dklen)&&void 0!==u?u:32,salt:aS(l).replace("0x","")},g=VO(d,l,m.n,m.p,m.r,m.dklen)}const y=yield SO(h,g.slice(0,16),f,"aes-128-ctr"),v=aS(y).slice(2),b=dP(tS(g.slice(16,32),y)).replace("0x","");return{version:3,id:TP(),address:QT(h).toLowerCase().replace("0x",""),crypto:{ciphertext:v,cipherparams:{iv:aS(f).replace("0x","")},cipher:"aes-128-ctr",kdf:p,kdfparams:m,mac:b}}})),YT=(e,t)=>{const r=$T(e,t);return{address:QT(r),privateKey:aS(r),signTransaction:e=>{throw new uE("Do not have network access to sign the transaction")},sign:e=>VT("string"==typeof e?e:JSON.stringify(e),r),encrypt:(e,t)=>zT(void 0,void 0,void 0,(function*(){return JT(r,e,t)}))}};var XT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class eC{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map((e=>e.payload))}add(e){const t=qP(e),r=new VP;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){return XT(this,void 0,void 0,(function*(){var t;if(0===this.requests.length)return Promise.resolve([]);const r=new VP({timeout:null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:1e3,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch((e=>r.reject(e))),r.catch((e=>{e instanceof bw&&this._abortAllRequests("Batch request timeout"),r.reject(e)})),r}))}_processBatchRequest(e){return XT(this,void 0,void 0,(function*(){var t,r;const n=yield this._requestManager.sendBatch([...this._requests.values()].map((e=>e.payload)));if(n.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new SE(n,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${n.length}`);const i=this.requests.map((e=>e.id)).map(Number).sort(((e,t)=>e-t)),s=n.map((e=>e.id)).map(Number).sort(((e,t)=>e-t));if(JSON.stringify(i)!==JSON.stringify(s))throw this._abortAllRequests("Invalid batch response"),new SE(n,`Batch request mismatch the results. Requests: [${i.join()}], Responses: [${s.join()}]`);for(const e of n)BP(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):RP(e)&&(null===(r=this._requests.get(e.id))||void 0===r||r.promise.reject(e.error));e.resolve(n)}))}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new ww(e))}}class tC extends tO{constructor(e){var t;if(super(),this.providers=mO.providers,KS(e)||"string"==typeof e&&""!==e.trim()||dO(e))return this._requestManager=new mO(e),void(this._subscriptionManager=new vO(this._requestManager,{}));const{config:r,provider:n,requestManager:i,subscriptionManager:s,registeredSubscriptions:o,accountProvider:a,wallet:c,requestManagerMiddleware:u}=e;this.setConfig(null!=r?r:{}),this._requestManager=null!=i?i:new mO(n,null===(t=null==r?void 0:r.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout,u),this._subscriptionManager=s||new vO(this.requestManager,null!=o?o:{}),a&&(this._accountProvider=a),c&&(this._wallet=c)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const r=new e(...[...t,this.getContextObject()]);return this.on(eO.CONFIG_CHANGE,(e=>{r.setConfig({[e.name]:e.newValue})})),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(eO.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new Aw(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return tC.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return eC.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach((t=>{const r=(...e)=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.requestManager.send({method:t.call,params:e})}));e.property?this[e.property][t.name]=r:this[t.name]=r})),this}}tC.providers=mO.providers;class rC{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const e=this._iban.slice(4),t=rC._parseInt(e,36),r=XS(t,40);return TS(r)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!rC.isIndirect(e)&&!rC.isDirect(e))throw new Error("Invalid IBAN was provided");this._iban=e}static isDirect(e){return 34===e.length||35===e.length}isDirect(){return rC.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return rC.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===rC._mod9710(rC._iso13616Prepare(e))}isValid(){return rC.isValid(this._iban)}static fromBban(e){const t=`0${(98-this._mod9710(this._iso13616Prepare(`XE00${e}`))).toString()}`.slice(-2);return new rC(`XE${t}${e}`)}static createIndirect(e){return rC.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!L_(e))throw new pE(e);const t=BigInt(uS(e)).toString(36),r=XS(t,15);return rC.fromBban(r.toUpperCase())}static toIban(e){return rC.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}rC._iso13616Prepare=e=>{const t="A".charCodeAt(0),r="Z".charCodeAt(0),n=e.toUpperCase();return`${n.slice(4)}${n.slice(0,4)}`.split("").map((e=>{const n=e.charCodeAt(0);return n>=t&&n<=r?n-t+10:e})).join("")},rC._parseInt=(e,t)=>[...e].reduce(((e,r)=>BigInt(parseInt(r,t))+BigInt(t)*e),BigInt(0)),rC._mod9710=e=>{let t,r=e;for(;r.length>2;)t=r.slice(0,9),r=`${(parseInt(t,10)%97).toString()}${r.slice(t.length)}`;return parseInt(r,10)%97},rC.toAddress=e=>new rC(e).toAddress();var nC,iC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class sC extends XP{constructor(e){super(),this[nC]="Promise",this._promise=new Promise(e)}then(e,t){return iC(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return iC(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return iC(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}nC=Symbol.toStringTag,i(2791);var oC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function aC(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_syncing",params:[]})}))}function cC(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})}))}function uC(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag","bool"],[t,r]),e.send({method:"eth_getBlockByNumber",params:[t,r]})}))}var hC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},lC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const dC={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},fC={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},pC={type:"object",properties:{gasPrice:{type:"null"}}},gC=(e,t,r)=>{try{X_.validateJSONSchema(e,t)}catch(e){if(e instanceof c_)throw new lE(e.errors,r);throw e}},mC=e=>{var t,r;const n=e;if(!V_(n.type)){let e;switch(n.type){case"0x0":e=dC;break;case"0x1":e=fC;break;case"0x2":e=pC;break;default:return cP({format:"uint"},n.type,wb)}return gC(e,n,n.type),cP({format:"uint"},n.type,wb)}if(!V_(n.maxFeePerGas)||!V_(n.maxPriorityFeePerGas))return gC(pC,n,"0x2"),"0x2";if(!V_(n.accessList))return gC(fC,n,"0x1"),"0x1";const i=null!==(t=n.hardfork)&&void 0!==t?t:null===(r=n.common)||void 0===r?void 0:r.hardfork;if(!V_(i)){const e=Object.keys(Ab).indexOf(i);if(e>=Object.keys(Ab).indexOf("london"))return V_(n.gasPrice)?"0x2":"0x0";if(e===Object.keys(Ab).indexOf("berlin"))return"0x0"}return V_(n.gasPrice)?void 0:(gC(dC,n,"0x0"),"0x0")},yC=(e,t)=>{var r;return(null!==(r=null==t?void 0:t.transactionTypeParser)&&void 0!==r?r:mC)(e)},vC={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},bC={type:"object",properties:{accessList:Object.assign({},vC),gasUsed:{type:"string"}}},wC={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},EC={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},AC={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},vC),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},wC),hardfork:Object.assign({},EC),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},wC),hardfork:Object.assign({},EC)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},IC={type:"object",properties:Object.assign(Object.assign({},AC.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},vC),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},xC={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},_C={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},IC)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},xC)},withdrawalsRoot:{format:"bytes32"}}},SC={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},xC)},withdrawalsRoot:{format:"bytes32"}}},PC={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},OC={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},kC={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},PC)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},TC={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},CC={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},BC={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function RC(e,t=bb,r={transactionSchema:IC,fillInputAndData:!1}){var n,i;let s=QS({},e);if(V_(null==e?void 0:e.common)||(s.common=Object.assign({},e.common),V_(null===(n=e.common)||void 0===n?void 0:n.customChain)||(s.common.customChain=Object.assign({},e.common.customChain))),s=cP(null!==(i=r.transactionSchema)&&void 0!==i?i:IC,s,t),!V_(s.data)&&!V_(s.input)&&_S(s.data)!==_S(s.input))throw new rE({data:aS(s.data),input:aS(s.input)});return r.fillInputAndData&&(V_(s.data)?V_(s.input)||(s.data=s.input):s.input=s.data),V_(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}var NC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function MC(e,t){return NC(this,void 0,void 0,(function*(){const r=yield function(e){return hC(this,void 0,void 0,(function*(){return e.send({method:"net_version",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,t)}))}const LC=e=>NC(void 0,void 0,void 0,(function*(){return function(e){return hC(this,void 0,void 0,(function*(){return e.send({method:"net_listening",params:[]})}))}(e.requestManager)}));var jC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class DC extends tC{getId(e=this.defaultReturnFormat){return jC(this,void 0,void 0,(function*(){return MC(this,e)}))}getPeerCount(e=this.defaultReturnFormat){return jC(this,void 0,void 0,(function*(){return function(e,t){return NC(this,void 0,void 0,(function*(){const r=yield function(e){return hC(this,void 0,void 0,(function*(){return e.send({method:"net_peerCount",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,t)}))}(this,e)}))}isListening(){return jC(this,void 0,void 0,(function*(){return LC(this)}))}}const UC="ALLEVENTS",FC={name:UC,signature:"",type:"event",inputs:[]},qC={bytes:vb.HEX,number:yb.NUMBER};var HC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function zC(e,t,r){return HC(this,void 0,void 0,(function*(){const n=VC(e,t);if(!V_(n)){if(n.startsWith("-"))throw new tE(n);if(Number(n)<0||Number(n)>127)throw new tE(n);if(V_(e.gasPrice)&&("0x0"===n||"0x1"===n))return{gasPrice:yield gR(t,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===n)return Object.assign({gasPrice:void 0},yield function(e,t,r){return HC(this,void 0,void 0,(function*(){var n,i,s,o;const a=yield yR(t,t.defaultBlock,!1,wb);if(V_(a.baseFeePerGas))throw new eE;let c;if(V_(e.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(c=yield gR(t,r)),!V_(e.gasPrice)||!V_(c)){const t=cP({format:"uint"},null!==(n=e.gasPrice)&&void 0!==n?n:c,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:cP({format:"uint"},null!==(i=e.maxPriorityFeePerGas)&&void 0!==i?i:t.defaultMaxPriorityFeePerGas,r),maxFeePerGas:cP({format:"uint"},null!==(s=e.maxFeePerGas)&&void 0!==s?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt(null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:t.defaultMaxPriorityFeePerGas),r)}}))}(e,t,r))}}))}var $C=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const GC=(e,t,r,n)=>{if(void 0!==r&&e in r&&void 0!==r[e]){if("string"==typeof r[e]&&L_(r[e]))return r[e];if(!d_(r[e])&&F_(r[e])){if(t.wallet){const n=t.wallet.get(cP({format:"uint"},r[e],qC));if(!V_(n))return n.address;throw new hE}throw new hE}throw"from"===e?new Nw(r.from):new Mw(r.to)}if("from"===e){if(!V_(n))return QT(n);if(!V_(t.defaultAccount))return t.defaultAccount}},VC=(e,t)=>{const r=yC(e,t);return V_(r)?V_(t.defaultTransactionType)?void 0:cP({format:"uint"},t.defaultTransactionType,wb):r};function KC(e){return $C(this,void 0,void 0,(function*(){var t,r;let n=cP(AC,e.transaction,e.web3Context.defaultReturnFormat);if(V_(n.from)&&(n.from=GC("from",e.web3Context,void 0,e.privateKey)),V_(n.nonce)&&(n.nonce=yield((e,t,...r)=>$C(void 0,[e,t,...r],void 0,(function*(e,t,r=e.defaultReturnFormat){if(V_(t))throw new Xw;return bR(e,t,e.defaultBlock,r)})))(e.web3Context,n.from,wb)),V_(n.value)&&(n.value="0x0"),V_(n.data))V_(n.input)?n.input="0x":n.input.startsWith("0x")||(n.input=`0x${n.input}`);else{if(!V_(n.input)&&n.data!==n.input)throw new rE({data:aS(n.data),input:aS(n.input)});n.data.startsWith("0x")||(n.data=`0x${n.data}`)}if(V_(n.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,r=t.customChain.chainId,i=t.customChain.networkId,s=t.customChain.name;n.common=Object.assign(Object.assign({},t),{customChain:{chainId:r,networkId:i,name:s}})}V_(n.chain)&&(n.chain=e.web3Context.defaultChain),V_(n.hardfork)&&(n.hardfork=e.web3Context.defaultHardfork)}if(V_(n.chainId)&&V_(null===(t=n.common)||void 0===t?void 0:t.customChain.chainId)&&(n.chainId=yield xR(e.web3Context,wb)),V_(n.networkId)&&(n.networkId=null!==(r=e.web3Context.defaultNetworkId)&&void 0!==r?r:yield MC(e.web3Context,wb)),V_(n.gasLimit)&&!V_(n.gas)&&(n.gasLimit=n.gas),n.type=VC(n,e.web3Context),!V_(n.accessList)||"0x1"!==n.type&&"0x2"!==n.type||(n.accessList=[]),e.fillGasPrice&&(n=Object.assign(Object.assign({},n),yield zC(n,e.web3Context,wb))),V_(n.gas)&&V_(n.gasLimit)&&e.fillGasLimit){const t=yield AR(e.web3Context,n,"latest",wb);n=Object.assign(Object.assign({},n),{gas:cP({format:"uint"},t,wb)})}return n}))}var WC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function QC(e,t,r){const n=e.transactionPollingInterval,[i,s]=kP((()=>WC(this,void 0,void 0,(function*(){let n;try{n=yield mR(e,qC)}catch(e){return void console.warn("An error happen while trying to get the block number",e)}const i=n-t;if(i>=e.transactionBlockTimeout)return new oE({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r})}))),n);return[s,{clean:()=>{clearInterval(i)}}]}function ZC(e,t){return WC(this,void 0,void 0,(function*(){var r,n;const{provider:i}=e.requestManager;let s;const o=yield mR(e,qC);return s=(null===(n=(r=i).supportsSubscriptions)||void 0===n?void 0:n.call(r))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,r){return WC(this,void 0,void 0,(function*(){var n;let i,s,o=!0;function a(n,i){i&&console.warn("error happened at subscription. So revert to polling...",i),s.clean(),o=!1;const[a,c]=QC(e,t,r);s.clean=c.clean,a.catch((e=>n(e)))}try{i=yield null===(n=e.subscriptionManager)||void 0===n?void 0:n.subscribe("newHeads"),s={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(n){return QC(e,t,r)}return[new Promise(((n,s)=>{try{i.on("data",(n=>{if(o=!1,!(null==n?void 0:n.number))return;const i=Number(BigInt(n.number)-BigInt(t));i>=e.transactionBlockTimeout&&s(new oE({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r}))})),i.on("error",(e=>{a(s,e)}))}catch(e){a(s,e)}setTimeout((()=>{o&&a(s)}),1e3*e.blockHeaderTimeout)})),s]}))}(e,o,t):QC(e,o,t),s}))}function JC(e,t,r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const[n,i]=OP(e.transactionSendTimeout,new nE({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:r})),[s,o]=yield ZC(e,r);try{return yield Promise.race([t(),i,s])}finally{clearTimeout(n),o.clean()}}))}var YC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function XC(e,t,r,n){return YC(this,void 0,void 0,(function*(){var i;const s=null!==(i=e.transactionReceiptPollingInterval)&&void 0!==i?i:e.transactionPollingInterval,[o,a]=SP((()=>YC(this,void 0,void 0,(function*(){try{return(null!=n?n:vR)(e,t,r)}catch(e){return void console.warn("An error happen while trying to get the transaction receipt",e)}}))),s),[c,u]=OP(e.transactionPollingTimeout,new sE({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[h,l]=yield ZC(e,t);try{return yield Promise.race([o,u,h])}finally{c&&clearTimeout(c),a&&clearInterval(a),l.clean()}}))}const eB=({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})=>{var s;let o=1;const a=setInterval((()=>{!function(e,t,r,n){new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){if(o>=e.transactionConfirmationBlocks)return void clearInterval(a);const s=yield uC(e.requestManager,lS(BigInt(t.blockNumber)+BigInt(o)),!1);(null==s?void 0:s.hash)&&(o+=1,r.emit("confirmation",{confirmations:cP({format:"uint"},o,i),receipt:cP(null!=n?n:kC,t,i),latestBlockHash:cP({format:"bytes32"},s.hash,i)}))}))}),null!==(s=e.transactionReceiptPollingInterval)&&void 0!==s?s:e.transactionPollingInterval)};var tB=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const rB=e=>!KS(e)&&"object"==typeof e&&!KS(e.type)&&"error"===e.type,nB=e=>!KS(e)&&"object"==typeof e&&!KS(e.type)&&"event"===e.type,iB=e=>!KS(e)&&"object"==typeof e&&!KS(e.type)&&"function"===e.type,sB=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},oB=e=>{const t=[];for(const r of Object.keys(e)){const n=e[r];"object"==typeof n?t.push(Object.assign(Object.assign({},sB(r)),{components:oB(n)})):t.push({name:r,type:e[r]})}return t},aB=(e,t)=>{const r=[];return t.forEach((t=>{if("object"==typeof t.components){if(!t.type.startsWith("tuple"))throw new Ew(`Invalid value given "${t.type}". Error: components found but type is not tuple.`);const n=t.type.indexOf("["),i=n>=0?t.type.substring(n):"",s=aB(e,t.components);Array.isArray(s)&&e?r.push(`tuple(${s.join(",")})${i}`):e?r.push(`(${s.join()})`):r.push(`(${s.join(",")})${i}`)}else r.push(t.type)})),r},cB=e=>{var t,r,n,i;return rB(e)||nB(e)||iB(e)?(null===(t=e.name)||void 0===t?void 0:t.includes("("))?e.name:`${null!==(r=e.name)&&void 0!==r?r:""}(${aB(!1,null!==(n=e.inputs)&&void 0!==n?n:[]).join(",")})`:`(${aB(!1,null!==(i=e.inputs)&&void 0!==i?i:[]).join(",")})`},uB=e=>{if("string"!=typeof e&&!nB(e))throw new Ew("Invalid parameter value in encodeEventSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:cB(e),dP(t)};function hB(e,t){const r=e.exec(t);return r?.groups}var lB=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,dB=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,fB=/^\(.+?\).*?$/,pB=Object.defineProperty,gB=(e,t,r)=>(((e,t,r)=>{t in e?pB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),mB=class extends Error{constructor(e,t={}){const r=t.cause instanceof mB?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof mB&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@0.7.1"].join("\n")),gB(this,"details"),gB(this,"docsPath"),gB(this,"metaMessages"),gB(this,"shortMessage"),gB(this,"name","AbiTypeError"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}},yB=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function vB(e){return yB.test(e)}function bB(e){return hB(yB,e)}var wB=new Set(["memory","indexed","storage","calldata"]),EB=new Set(["calldata","memory","storage"]),AB=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),IB=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,xB=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,_B=/^u?int$/;function SB(e,t){const r=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(AB.has(r))return AB.get(r);const n=fB.test(e),i=hB(n?xB:IB,e);if(!i)throw new mB("Invalid ABI parameter.",{details:e});if(i.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||lB.test(e)||dB.test(e)||kB.test(e)}(i.name))throw new mB("Invalid ABI parameter.",{details:e,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o="indexed"===i.modifier?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(n){c="tuple";const e=PB(i.type),t=[],r=e.length;for(let n=0;n<r;n++)t.push(SB(e[n],{structs:a}));u={components:t}}else if(i.type in a)c="tuple",u={components:a[i.type]};else if(_B.test(i.type))c=`${i.type}256`;else if(c=i.type,"struct"!==t?.type&&!OB(c))throw new mB("Unknown type.",{metaMessages:[`Type "${c}" is not a valid ABI type.`]});if(i.modifier){if(!t?.modifiers?.has?.(i.modifier))throw new mB("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`]});if(EB.has(i.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(c,!!i.array))throw new mB("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const h={type:`${c}${i.array??""}`,...s,...o,...u};return AB.set(r,h),h}function PB(e,t=[],r="",n=0){if(""===e){if(""===r)return t;if(0!==n)throw new mB("Unbalanced parentheses.",{metaMessages:[`"${r.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`});return[...t,r.trim()]}const i=e.length;for(let s=0;s<i;s++){const i=e[s],o=e.slice(s+1);switch(i){case",":return 0===n?PB(o,[...t,r.trim()]):PB(o,t,`${r}${i}`,n);case"(":return PB(o,t,`${r}${i}`,n+1);case")":return PB(o,t,`${r}${i}`,n-1);default:return PB(o,t,`${r}${i}`,n)}}return[]}function OB(e){return"address"===e||"bool"===e||"function"===e||"string"===e||lB.test(e)||dB.test(e)}var kB=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;var TB=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function CB(e,t,r=new Set){const n=[],i=e.length;for(let s=0;s<i;s++){const i=e[s];if(fB.test(i.type))n.push(i);else{const e=hB(TB,i.type);if(!e?.type)throw new mB("Invalid ABI parameter.",{details:JSON.stringify(i,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:s,type:o}=e;if(o in t){if(r.has(o))throw new mB("Circular reference detected.",{metaMessages:[`Struct "${o}" is a circular reference.`]});n.push({...i,type:`tuple${s??""}`,components:CB(t[o]??[],t,new Set([...r,o]))})}else{if(!OB(o))throw new mB("Unknown type.",{metaMessages:[`Type "${o}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]});n.push(i)}}}return n}const BB=32;function RB(e=0){var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.alloc)){const t=globalThis.Buffer.alloc(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)}function NB(e){var t,r;return Object.assign(Object.assign({},e),{name:null!==(t=e.name)&&void 0!==t?t:"",components:null===(r=e.components)||void 0===r?void 0:r.map((e=>NB(e)))})}function MB(e){return e.map((e=>{var t,r,n;if(!KS(r=e)&&"object"==typeof r&&!KS(r.type)&&"string"==typeof r.type)return e;if("string"==typeof e)return NB(function(e){let t;if("string"==typeof e)t=SB(e,{modifiers:wB});else{const r=function(e){const t={},r=e.length;for(let n=0;n<r;n++){const r=e[n];if(!vB(r))continue;const i=bB(r);if(!i)throw new mB("Invalid struct signature.",{details:r});const s=i.properties.split(";"),o=[],a=s.length;for(let e=0;e<a;e++){const t=s[e].trim();if(!t)continue;const r=SB(t,{type:"struct"});o.push(r)}if(!o.length)throw new mB("Invalid struct signature.",{details:r,metaMessages:["No properties exist."]});t[i.name]=o}const n={},i=Object.entries(t),s=i.length;for(let e=0;e<s;e++){const[r,s]=i[e];n[r]=CB(s,t)}return n}(e),n=e.length;for(let i=0;i<n;i++){const n=e[i];if(!vB(n)){t=SB(n,{modifiers:wB,structs:r});break}}}if(!t)throw new mB("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return t}(e.replace(/tuple/,"")));if("object"==typeof(n=e)&&void 0===n.components&&void 0===n.name){const r=Object.keys(e)[0],n=sB(r);return n.name=null!==(t=n.name)&&void 0!==t?t:"",Object.assign(Object.assign({},n),{components:oB(e[r])})}throw new Ew("Invalid abi")}))}function LB(e){const t=e.type.lastIndexOf("["),r=e.type.substring(0,t),n=e.type.substring(t);let i=-1;if("[]"!==n&&(i=Number(n.slice(1,-1)),isNaN(i)))throw new Ew("Invalid fixed array size",{size:n});return{param:{type:r,name:"",components:e.components},size:i}}function jB(e){var t,r;return!("string"!==e.type&&"bytes"!==e.type&&!e.type.endsWith("[]"))||("tuple"===e.type?null!==(r=null===(t=e.components)||void 0===t?void 0:t.some(jB))&&void 0!==r&&r:!!e.type.endsWith("]")&&jB(LB(e).param))}const DB=new Map;let UB=BigInt(256);for(let e=8;e<=256;e+=8)DB.set(`uint${e}`,{min:BigInt(0),max:UB-BigInt(1)}),DB.set(`int${e}`,{min:-UB/BigInt(2),max:UB/BigInt(2)-BigInt(1)}),UB*=BigInt(256);DB.set("int",DB.get("int256")),DB.set("uint",DB.get("uint256"));const FB=BigInt(1)<<BigInt(256);function qB(e,t=32){let r;return r=e<0?(FB+e).toString(16):e.toString(16),r=ZS(r,2*t),C_(r)}function HB(e,t){let r;try{r=PS(t)}catch(r){throw new Ew("provided input is not number value",{type:e.type,value:t,name:e.name})}const n=DB.get(e.type);if(!n)throw new Ew("provided abi contains invalid number datatype",{type:e.type});if(r<n.min)throw new Ew("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:n.min.toString()});if(r>n.max)throw new Ew("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:n.max.toString()});return{dynamic:!1,encoded:qB(r)}}function zB(e,t){if(t.length<BB)throw new Ew("Not enough bytes left to decode",{param:e,bytesLeft:t.length});const r=t.subarray(0,BB),n=DB.get(e.type);if(!n)throw new Ew("provided abi contains invalid number datatype",{type:e.type});const i=function(e,t){const r=O_(e),n=BigInt(r);return n<=t?n:n-FB}(r,n.max);if(i<n.min)throw new Ew("decoded value is less then minimum for given type",{type:e.type,value:i,name:e.name,minimum:n.min.toString()});if(i>n.max)throw new Ew("decoded value is greater then maximum for given type",{type:e.type,value:i,name:e.name,maximum:n.max.toString()});return{result:i,encoded:t.subarray(BB),consumed:BB}}function $B(e,t){if("string"==typeof t&&t.length%2!=0&&(t+="0"),!N_(t))throw new Ew("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});const r=sS(t),[,n]=e.type.split("bytes");if(n){if(Number(n)>32||Number(n)<1)throw new Ew("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(n)<r.length)throw new Ew("provided input size is different than type size",{type:e.type,value:t,name:e.name});const i=RB(BB);return i.set(r),{dynamic:!1,encoded:i}}const i=Math.ceil(r.length/BB),s=RB(BB+i*BB);return s.set(HB({type:"uint32",name:""},r.length).encoded),s.set(r,BB),{dynamic:!0,encoded:s}}function GB(e,t){const[,r]=e.type.split("bytes");let n=Number(r),i=t,s=1,o=0;if(!n){const e=zB({type:"uint32",name:""},i);n=Number(e.result),o+=e.consumed,i=e.encoded,s=Math.ceil(n/BB)}if(n>t.length)throw new Ew("there is not enough data to decode",{type:e.type,encoded:t,size:n});return{result:aS(i.subarray(0,n)),encoded:i.subarray(s*BB),consumed:o+s*BB}}function VB(e){let t=0,r=0;const n=[],i=[];for(const r of e)r.dynamic?t+=BB:t+=r.encoded.length;for(const s of e)s.dynamic?(n.push(HB({type:"uint256",name:""},t+r)),i.push(s),r+=s.encoded.length):n.push(s);return tS(...n.map((e=>e.encoded)),...i.map((e=>e.encoded)))}function KB(e,t){if("string"===e.type)return function(e,t){if("string"!=typeof t)throw new Ew("invalid input, should be string",{input:t});return $B({type:"bytes",name:""},bS(t))}(0,t);if("bool"===e.type)return function(e,t){let r;try{r=CS(t)}catch(r){if(r instanceof wE)throw new Ew("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return HB({type:"uint8",name:""},Number(r))}(e,t);if("address"===e.type)return function(e,t){if("string"!=typeof t)throw new Ew("address type expects string as input type",{value:t,name:e.name,type:e.type});let r=t.toLowerCase();if(r.startsWith("0x")||(r=`0x${r}`),!L_(r))throw new Ew("provided input is not valid address",{value:t,name:e.name,type:e.type});const n=C_(r),i=RB(BB);return i.set(n,12),{dynamic:!1,encoded:i}}(e,t);if("tuple"===e.type)return QB(e,t);if(e.type.endsWith("]"))return function(e,t){if(!Array.isArray(t))throw new Ew("Expected value to be array",{abi:e,values:t});const{size:r,param:n}=LB(e),i=t.map((e=>KB(n,e))),s=-1===r,o=i.length>0&&i[0].dynamic;if(!s&&t.length!==r)throw new Ew("Given arguments count doesn't match array length",{arrayLength:r,argumentsLength:t.length});if(s||o){const e=VB(i);if(s){const t=HB({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?tS(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:tS(...i.map((e=>e.encoded)))}}(e,t);if(e.type.startsWith("bytes"))return $B(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return HB(e,t);throw new Ew("Unsupported",{param:e,value:t})}function WB(e,t){if("string"===e.type)return function(e,t){const r=GB({type:"bytes",name:""},t);return{result:yS(r.result),encoded:r.encoded,consumed:r.consumed}}(0,t);if("bool"===e.type)return function(e,t){const r=zB({type:"uint8",name:""},t);if(r.result>1||r.result<0)throw new Ew("Invalid boolean value encoded",{boolBytes:t.subarray(0,BB),numberResult:r});return{result:r.result===BigInt(1),encoded:r.encoded,consumed:BB}}(0,t);if("address"===e.type)return function(e,t){const r=t.subarray(12,BB);if(20!==r.length)throw new Ew("Invalid decoding input, not enough bytes to decode address",{bytes:t});const n=O_(r);return{result:TS(n),encoded:t.subarray(BB),consumed:BB}}(0,t);if("tuple"===e.type)return ZB(e,t);if(e.type.endsWith("]"))return function(e,t){let{size:r,param:n}=LB(e),i=0;const s=[];let o=t;if(-1===r){const e=zB({type:"uint32",name:""},t);r=Number(e.result),i=e.consumed,o=e.encoded}if(jB(n)){for(let e=0;e<r;e+=1){const t=zB({type:"uint32",name:""},o.subarray(e*BB));i+=t.consumed;const r=WB(n,o.subarray(Number(t.result)));i+=r.consumed,s.push(r.result)}return{result:s,encoded:o.subarray(i),consumed:i}}for(let e=0;e<r;e+=1){const e=WB(n,t.subarray(i));i+=e.consumed,s.push(e.result)}return{result:s,encoded:t.subarray(i),consumed:i}}(e,t);if(e.type.startsWith("bytes"))return GB(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return zB(e,t);throw new Ew("Unsupported",{param:e,bytes:t})}function QB(e,t){var r,n,i;let s=!1;if(!Array.isArray(t)&&"object"!=typeof t)throw new Ew("param must be either Array or Object",{param:e,input:t});const o=t,a=[];for(let c=0;c<(null!==(n=null===(r=e.components)||void 0===r?void 0:r.length)&&void 0!==n?n:0);c+=1){const r=e.components[c];let n;if(Array.isArray(o)){if(c>=o.length)throw new Ew("input param length missmatch",{param:e,input:t});n=KB(r,o[c])}else{const s=o[null!==(i=r.name)&&void 0!==i?i:""];if(null==s)throw new Ew("missing input defined in abi",{param:e,input:t,paramName:r.name});n=KB(r,s)}n.dynamic&&(s=!0),a.push(n)}return s?{dynamic:!0,encoded:VB(a)}:{dynamic:!1,encoded:tS(...a.map((e=>e.encoded)))}}function ZB(e,t){const r={__length__:0};let n=0;if(!e.components)return{result:r,encoded:t,consumed:n};let i=0;for(const[s,o]of e.components.entries()){let e;if(jB(o)){const r=zB({type:"uint32",name:""},t.subarray(n));e=WB(o,t.subarray(Number(r.result))),n+=r.consumed,i+=e.consumed}else e=WB(o,t.subarray(n)),n+=e.consumed;r.__length__+=1,r[s]=e.result,o.name&&""!==o.name&&(r[o.name]=e.result)}return{encoded:t.subarray(n+i),result:r,consumed:n+i}}function JB(e){const t=[];return e.forEach((e=>{if(Array.isArray(e)){const r=JB(e);t.push({type:"tuple",components:r,name:""})}else t.push({type:_S(e,!0)})})),t}function YB(e,t){if((null==e?void 0:e.length)!==t.length)throw new Ew("Invalid number of values received for given ABI",{expected:null==e?void 0:e.length,received:t.length});return O_(QB({type:"tuple",name:"",components:MB(e)},t).encoded)}const XB=(e,t)=>YB([e],[t]),eR=(e,t,r)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new Ew("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return function(e,t){return ZB({type:"tuple",name:"",components:MB(e)},C_(t)).result}(e,`0x${t.replace(/0x/i,"")}`)}catch(e){throw new Ew(`Parameter decoding error: ${e.message}`,{internalErr:e})}},tR=(e,t)=>eR(e,t),rR=(e,t)=>tR([e],t)[0],nR=e=>{if("string"!=typeof e&&!iB(e))throw new Ew("Invalid parameter value in encodeFunctionSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:cB(e),dP(t).slice(0,10)},iR=(e,t,r=!0)=>{const n=r&&t&&t.length>=10&&t.startsWith("0x")?t.slice(10):t;if(!e.inputs)throw new uw("No inputs found in the ABI");const i=tR([...e.inputs],n);return Object.assign(Object.assign({},i),{__method__:cB(e)})},sR=["bool","string","int","uint","address","fixed","ufixed"],oR=(e,t,r)=>{const n=Array.isArray(r)?r:[r],i={},s={};for(const[t,r]of e.entries())r.indexed?i[t]=r:s[t]=r;const o=t?eR(Object.values(s),t):{__length__:0},a=n.length-Object.keys(i).length,c=Object.values(i).map(((e,t)=>{return sR.some((t=>e.type.startsWith(t)))?(r=e.type,i=n[t+a],"string"===r?i:rR(r,i)):n[t+a];var r,i})),u={__length__:0};let h=0,l=0;for(const[t,r]of e.entries())u[t]="string"===r.type?"":void 0,i[t]&&(u[t]=c[h],h+=1),s[t]&&(u[t]=o[String(l)],l+=1),r.name&&(u[r.name]=u[t]),u.__length__+=1;return u},aR=(e,t)=>{if(null==t?void 0:t.data){let r,n,i;try{const s=t.data.slice(0,10),o=e.find((e=>(e=>{if("string"!=typeof e&&!rB(e))throw new Ew("Invalid parameter value in encodeErrorSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:cB(e),dP(t)})(e).startsWith(s)));(null==o?void 0:o.inputs)?(r=o.name,n=cB(o),i=tR([...o.inputs],t.data.substring(10))):t.data.startsWith("0x08c379a0")?(r="Error",n="Error(string)",i=tR([{name:"message",type:"string"}],t.data.substring(10))):t.data.startsWith("0x4e487b71")?(r="Panic",n="Panic(uint256)",i=tR([{name:"code",type:"uint256"}],t.data.substring(10))):console.error("No matching error abi found for error data",t.data)}catch(e){console.error(e)}r&&t.setDecodedProperties(r,n,i)}};const cR=(e,t)=>{var r,n,i,s,o;if(e instanceof dw&&e.cause instanceof lw){if(void 0!==t){const i=t.filter((e=>rB(e)));return aR(i,e.cause),{reason:e.cause.message,signature:null===(r=e.cause.data)||void 0===r?void 0:r.slice(0,10),data:null===(n=e.cause.data)||void 0===n?void 0:n.substring(10),customErrorName:e.cause.errorName,customErrorDecodedSignature:e.cause.errorSignature,customErrorArguments:e.cause.errorArgs}}return{reason:e.cause.message,signature:null===(i=e.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(s=e.cause.data)||void 0===s?void 0:s.substring(10)}}if(e instanceof PE&&!Array.isArray(null===(o=e.cause)||void 0===o?void 0:o.errors)&&void 0!==e.cause)return e.cause.message;throw e};function uR(e,t,r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t,r,n=e.defaultReturnFormat){try{return void(yield ER(e,t,e.defaultBlock,n))}catch(e){return cR(e,r)}}))}function hR(e,t,r,n,i,s){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let o,a=s;if(void 0===a&&(void 0!==n?a=cR(n):e.handleRevert&&void 0!==t&&(a=yield uR(e,t,i))),void 0===a)o=new Cw(r);else if("string"==typeof a)o=new kw(a,void 0,r);else if(void 0!==a.customErrorName&&void 0!==a.customErrorDecodedSignature&&void 0!==a.customErrorArguments){const e=a;o=new Tw(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,r,e.data)}else o=new kw(a.reason,a.signature,r,a.data);return o}))}const lR=(e,t,r,n=bb)=>{var i,s,o,a,c,u;let h=Object.assign({},e);const l=cP(PC,t,n);if([UC,"allEvents"].includes(h.name)){const e=r.find((e=>e.signature===t.topics[0]));h=e||{anonymous:!0}}if(h.inputs=null!==(s=null!==(i=h.inputs)&&void 0!==i?i:e.inputs)&&void 0!==s?s:[],!h.anonymous){let e=0;(null!==(o=h.inputs)&&void 0!==o?o:[]).forEach((t=>{t.indexed&&(e+=1)})),e>0&&(null==t?void 0:t.topics)&&(null==t?void 0:t.topics.length)!==e+1&&(h=Object.assign(Object.assign({},h),{anonymous:!0,inputs:[]}))}const d=h.anonymous?t.topics:(null!==(a=t.topics)&&void 0!==a?a:[]).slice(1);return Object.assign(Object.assign({},l),{returnValues:oR([...null!==(c=h.inputs)&&void 0!==c?c:[]],t.data,d),event:h.name,signature:!h.anonymous&&(null===(u=t.topics)||void 0===u?void 0:u.length)>0&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})};var dR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class fR{constructor({options:e,web3Context:t,promiEvent:r,returnFormat:n}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=r,this.returnFormat=n}getReceiptWithEvents(e){var t,r;const n=Object.assign({},null!=e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&n.logs&&n.logs.length>0){n.events={};for(const e of n.logs){const t=lR(FC,e,null===(r=this.options)||void 0===r?void 0:r.contractAbi,this.returnFormat);t.event&&(n.events[t.event]=t)}}return n}checkRevertBeforeSending(e){return dR(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){let t=e;V_(e.data)&&V_(e.input)&&V_(e.gas)&&(t=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield uR(this.web3Context,t,this.options.contractAbi);if(void 0!==r)throw yield hR(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}}))}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return dR(this,arguments,void 0,(function*({transactionFormatted:e,transaction:t}){var r;let n=e;return this.web3Context.config.ignoreGasPricing||(null===(r=this.options)||void 0===r?void 0:r.ignoreGasPricing)||!V_(e.gasPrice)||!V_(t.maxPriorityFeePerGas)&&!V_(t.maxFeePerGas)||(n=Object.assign(Object.assign({},e),yield zC(e,this.web3Context,wb))),n}))}signAndSend(e){return dR(this,arguments,void 0,(function*({wallet:e,tx:t}){if(e){const r=yield e.signTransaction(t);return JC(this.web3Context,(()=>dR(this,void 0,void 0,(function*(){return cC(this.web3Context.requestManager,r.rawTransaction)}))),r.transactionHash)}return JC(this.web3Context,(()=>dR(this,void 0,void 0,(function*(){return function(e,t){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_sendTransaction",params:[t]})}))}(this.web3Context.requestManager,t)}))))}))}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return dR(this,arguments,void 0,(function*({error:e,tx:t}){var r;let n=e;return n instanceof dw&&this.web3Context.handleRevert&&(n=yield hR(this.web3Context,t,void 0,void 0,null===(r=this.options)||void 0===r?void 0:r.contractAbi)),(n instanceof PE||n instanceof dw||n instanceof Tw||n instanceof Cw||n instanceof kw||n instanceof sE)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}))}emitConfirmation({receipt:e,transactionHash:t,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&function(e,t,r,n,i,s){if(V_(r)||V_(r.blockHash))throw new aE({receipt:r,blockHash:cP({format:"bytes32"},null==r?void 0:r.blockHash,i),transactionHash:cP({format:"bytes32"},n,i)});if(!r.blockNumber)throw new cE({receipt:r});t.emit("confirmation",{confirmations:cP({format:"uint"},1,i),receipt:cP(null!=s?s:kC,r,i),latestBlockHash:cP({format:"bytes32"},r.blockHash,i)});const o=e.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?(({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})=>{let s,o=!0;setImmediate((()=>{var a;null===(a=e.subscriptionManager)||void 0===a||a.subscribe("newHeads").then((a=>{a.on("data",(c=>tB(void 0,void 0,void 0,(function*(){var u;if(o=!1,!(null==c?void 0:c.number)||s===(null==c?void 0:c.parentHash))return;s=null==c?void 0:c.parentHash;const h=BigInt(c.number)-BigInt(t.blockNumber)+BigInt(1);r.emit("confirmation",{confirmations:cP({format:"uint"},h,i),receipt:cP(null!=n?n:kC,t,i),latestBlockHash:cP({format:"bytes32"},c.parentHash,i)}),h>=e.transactionConfirmationBlocks&&(yield null===(u=e.subscriptionManager)||void 0===u?void 0:u.removeSubscription(a))})))),a.on("error",(()=>tB(void 0,void 0,void 0,(function*(){var s;yield null===(s=e.subscriptionManager)||void 0===s?void 0:s.removeSubscription(a),o=!1,eB({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})}))))})).catch((()=>{o=!1,eB({web3Context:e,transactionReceipt:t,customTransactionReceiptSchema:n,transactionPromiEvent:r,returnFormat:i})}))})),setTimeout((()=>{o&&eB({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:i})}),1e3*e.blockHeaderTimeout)})({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,customTransactionReceiptSchema:s,returnFormat:i}):eB({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,customTransactionReceiptSchema:s,returnFormat:i})}(this.web3Context,this.promiEvent,e,t,this.returnFormat,r)}handleResolve(e){return dR(this,arguments,void 0,(function*({receipt:e,tx:t}){var r,n,i;if(null===(r=this.options)||void 0===r?void 0:r.transactionResolver)return null===(n=this.options)||void 0===n?void 0:n.transactionResolver(e);if(e.status===BigInt(0)){const r=yield hR(this.web3Context,t,e,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}return e}))}}var pR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function gR(e,t){return pR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_gasPrice",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function mR(e,t){return pR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_blockNumber",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function yR(e){return pR(this,arguments,void 0,(function*(e,t=e.defaultBlock,r=!1,n){var i;let s;if(N_(t)){const n=cP({format:"bytes32"},t,wb);s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32","bool"],[t,r]),e.send({method:"eth_getBlockByHash",params:[t,r]})}))}(e.requestManager,n,r)}else{const n=H_(t)?t:cP({format:"uint"},t,wb);s=yield uC(e.requestManager,n,r)}const o=cP(_C,s,null!=n?n:e.defaultReturnFormat);return V_(o)?o:Object.assign(Object.assign({},o),{transactions:null!==(i=o.transactions)&&void 0!==i?i:[]})}))}function vR(e,t,r){return pR(this,void 0,void 0,(function*(){const n=cP({format:"bytes32"},t,bb);let i;try{i=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})}))}(e.requestManager,n)}catch(e){if("object"!=typeof e||V_(e)||!("message"in e)||"transaction indexing is in progress"!==e.message)throw e;console.warn("Transaction indexing is in progress.")}return V_(i)?i:cP(kC,i,null!=r?r:e.defaultReturnFormat)}))}function bR(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=H_(r)?r:cP({format:"uint"},r,wb),s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getTransactionCount",params:[t,r]})}))}(e.requestManager,t,i);return cP({format:"uint"},s,null!=n?n:e.defaultReturnFormat)}))}function wR(e,t,r,n={checkRevertBeforeSending:!0},i){const s=new sC(((o,a)=>{setImmediate((()=>{(()=>{pR(this,void 0,void 0,(function*(){const c=new fR({web3Context:e,promiEvent:s,options:n,returnFormat:r});let u=Object.assign({},t);V_(i)||(u=yield i.processTransaction(u));let h=RC(Object.assign(Object.assign({},u),{from:GC("from",e,u),to:GC("to",e,u)}),wb,{transactionSchema:e.config.customTransactionSchema});try{let t;h=yield c.populateGasPrice({transaction:u,transactionFormatted:h}),yield c.checkRevertBeforeSending(h),c.emitSending(h),e.wallet&&!V_(h.from)&&(t=e.wallet.get(h.from));const n=yield c.signAndSend({wallet:t,tx:h}),i=cP({format:"bytes32"},n,null!=r?r:e.defaultReturnFormat);c.emitSent(h),c.emitTransactionHash(i);const s=yield XC(e,n,null!=r?r:e.defaultReturnFormat),a=c.getReceiptWithEvents(cP(kC,s,null!=r?r:e.defaultReturnFormat));c.emitReceipt(a),o(yield c.handleResolve({receipt:a,tx:h})),c.emitConfirmation({receipt:a,transactionHash:n})}catch(e){a(yield c.handleError({error:e,tx:h}))}}))})()}))}));return s}function ER(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n=e.defaultReturnFormat){const i=H_(r)?r:cP({format:"uint"},r,wb),s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_call",params:[t,r]})}))}(e.requestManager,RC(t,wb,{transactionSchema:e.config.customTransactionSchema}),i);return cP({format:"bytes"},s,n)}))}function AR(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=RC(t,wb,{transactionSchema:e.config.customTransactionSchema}),s=H_(r)?r:cP({format:"uint"},r,wb),o=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_estimateGas",params:[t,r]})}))}(e.requestManager,i,s);return cP({format:"uint"},o,null!=n?n:e.defaultReturnFormat)}))}function IR(e,t,r){return pR(this,void 0,void 0,(function*(){let{toBlock:n,fromBlock:i}=t;V_(n)||"number"!=typeof n&&"bigint"!=typeof n||(n=lS(n)),V_(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=lS(i));const s=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:n}),o=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})}))}(e.requestManager,s);return o.map((t=>"string"==typeof t?t:cP(PC,t,null!=r?r:e.defaultReturnFormat)))}))}function xR(e,t){return pR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_chainId",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function _R(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=H_(r)?r:cP({format:"uint"},r,wb),s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_createAccessList",params:[t,r]})}))}(e.requestManager,RC(t,wb,{transactionSchema:e.config.customTransactionSchema}),i);return cP(bC,s,null!=n?n:e.defaultReturnFormat)}))}var SR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class PR extends wO{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return cP(PC,e,super.returnFormat)}}class OR extends wO{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return cP({format:"string"},e,super.returnFormat)}}class kR extends wO{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return cP(SC,e,super.returnFormat)}}class TR extends wO{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"==typeof e)this.emit("changed",e);else{const t=Object.fromEntries(Object.entries((null==e?void 0:e.status)||e).map((([e,t])=>[e.charAt(0).toLowerCase()+e.substring(1),t])));this.emit("changed",e.syncing),this.emit("data",cP(OC,t,super.returnFormat))}}}var CR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const BR={logs:PR,newPendingTransactions:OR,newHeads:kR,syncing:TR,pendingTransactions:OR,newBlockHeaders:kR};class RR extends tC{constructor(e){"string"==typeof e||dO(e)?super({provider:e,registeredSubscriptions:BR}):e.registeredSubscriptions?super(e):(super(Object.assign(Object.assign({},e),{registeredSubscriptions:BR})),this.getFeeData=this.calculateFeeData)}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_protocolVersion",params:[]})}))}(this.requestManager)}))}isSyncing(){return CR(this,void 0,void 0,(function*(){return aC(this.requestManager)}))}getCoinbase(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_coinbase",params:[]})}))}(this.requestManager)}))}isMining(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_mining",params:[]})}))}(this.requestManager)}))}getHashrate(e){return CR(this,void 0,void 0,(function*(){var t;return void 0===e&&(e=null!==(t=this.defaultReturnFormat)&&void 0!==t?t:bb),this.getHashRate(e)}))}getHashRate(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return pR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_hashrate",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}getGasPrice(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return gR(this,e)}))}getMaxPriorityFeePerGas(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return pR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_maxPriorityFeePerGas",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}calculateFeeData(){return CR(this,arguments,void 0,(function*(e=BigInt(2),t=nS.Gwei){var r;const n=yield this.getBlock(void 0,!1),i=null!==(r=null==n?void 0:n.baseFeePerGas)&&void 0!==r?r:void 0;let s,o,a;try{s=yield this.getGasPrice()}catch(e){}try{o=yield this.getMaxPriorityFeePerGas()}catch(e){}if(i){let r;o=null!=o?o:t,r="number"==typeof e?BigInt(Math.floor(1e3*e))/BigInt(1e3):e,a=i*r+o}return{gasPrice:s,maxFeePerGas:a,maxPriorityFeePerGas:o,baseFeePerGas:i}}))}getAccounts(){return CR(this,void 0,void 0,(function*(){var e;return(null!==(e=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_accounts",params:[]})}))}(this.requestManager))&&void 0!==e?e:[]).map((e=>TS(e)))}))}getBlockNumber(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return mR(this,e)}))}getBalance(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return function(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=H_(r)?r:cP({format:"uint"},r,wb),s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getBalance",params:[t,r]})}))}(e.requestManager,t,i);return cP({format:"uint"},s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getStorageAt(e,t){return CR(this,arguments,void 0,(function*(e,t,r=this.defaultBlock,n=this.defaultReturnFormat){return function(e,t,r){return pR(this,arguments,void 0,(function*(e,t,r,n=e.defaultBlock,i){const s=cP({format:"uint"},r,wb),o=H_(n)?n:cP({format:"uint"},n,wb),a=yield function(e,t,r,n){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","hex","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getStorageAt",params:[t,r,n]})}))}(e.requestManager,t,s,o);return cP({format:"bytes"},a,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}getCode(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return function(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=H_(r)?r:cP({format:"uint"},r,wb),s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getCode",params:[t,r]})}))}(e.requestManager,t,i);return cP({format:"bytes"},s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getBlock(){return CR(this,arguments,void 0,(function*(e=this.defaultBlock,t=!1,r=this.defaultReturnFormat){return yR(this,e,t,r)}))}getBlockTransactionCount(){return CR(this,arguments,void 0,(function*(e=this.defaultBlock,t=this.defaultReturnFormat){return function(e){return pR(this,arguments,void 0,(function*(e,t=e.defaultBlock,r){let n;if(N_(t)){const r=cP({format:"bytes32"},t,wb);n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})}))}(e.requestManager,r)}else{const r=H_(t)?t:cP({format:"uint"},t,wb);n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})}))}(e.requestManager,r)}return cP({format:"uint"},n,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}getBlockUncleCount(){return CR(this,arguments,void 0,(function*(e=this.defaultBlock,t=this.defaultReturnFormat){return function(e){return pR(this,arguments,void 0,(function*(e,t=e.defaultBlock,r){let n;if(N_(t)){const r=cP({format:"bytes32"},t,wb);n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})}))}(e.requestManager,r)}else{const r=H_(t)?t:cP({format:"uint"},t,wb);n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})}))}(e.requestManager,r)}return cP({format:"uint"},n,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}getUncle(){return CR(this,arguments,void 0,(function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return function(e){return pR(this,arguments,void 0,(function*(e,t=e.defaultBlock,r,n){const i=cP({format:"uint"},r,wb);let s;if(N_(t)){const r=cP({format:"bytes32"},t,wb);s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=H_(t)?t:cP({format:"uint"},t,wb);s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return cP(_C,s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getTransaction(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){const r=yield function(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultReturnFormat){const n=cP({format:"bytes32"},t,bb),i=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})}))}(e.requestManager,n);return V_(i)?i:RC(i,r,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}))}(this,e,t);if(!r)throw new Rw;return r}))}getPendingTransactions(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return pR(this,void 0,void 0,(function*(){return(yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_pendingTransactions",params:[]})}))}(e.requestManager)).map((r=>RC(r,null!=t?t:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})))}))}(this,e)}))}getTransactionFromBlock(){return CR(this,arguments,void 0,(function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return function(e){return pR(this,arguments,void 0,(function*(e,t=e.defaultBlock,r,n){const i=cP({format:"uint"},r,wb);let s;if(N_(t)){const r=cP({format:"bytes32"},t,wb);s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=H_(t)?t:cP({format:"uint"},t,wb);s=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return V_(s)?s:RC(s,null!=n?n:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}))}(this,e,t,r)}))}getTransactionReceipt(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){const r=yield vR(this,e,t);if(!r)throw new Rw;return r}))}getTransactionCount(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return bR(this,e,t,r)}))}sendTransaction(e,t=this.defaultReturnFormat,r){return wR(this,e,t,r,this.transactionMiddleware)}sendSignedTransaction(e,t=this.defaultReturnFormat,r){return function(e,t,r,n={checkRevertBeforeSending:!0}){const i=new sC(((s,o)=>{setImmediate((()=>{(()=>{pR(this,void 0,void 0,(function*(){const a=new fR({web3Context:e,promiEvent:i,options:n,returnFormat:r}),c=cP({format:"bytes"},t,wb),u=HT.fromSerializedData(sS(cS(c))),h=Object.assign(Object.assign({},u.toJSON()),{from:u.getSenderAddress().toString()});try{const{v:t,r:n,s:i}=h,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(h,["v","r","s"]);yield a.checkRevertBeforeSending(o),a.emitSending(c);const u=yield JC(e,(()=>pR(this,void 0,void 0,(function*(){return cC(e.requestManager,c)}))));a.emitSent(c);const l=cP({format:"bytes32"},u,null!=r?r:e.defaultReturnFormat);a.emitTransactionHash(l);const d=yield XC(e,u,null!=r?r:e.defaultReturnFormat),f=a.getReceiptWithEvents(cP(kC,d,null!=r?r:e.defaultReturnFormat));a.emitReceipt(f),s(yield a.handleResolve({receipt:f,tx:h})),a.emitConfirmation({receipt:f,transactionHash:u})}catch(e){o(yield a.handleError({error:e,tx:h}))}}))})()}))}));return i}(this,e,t,r)}sign(e,t){return CR(this,arguments,void 0,(function*(e,t,r=this.defaultReturnFormat){return function(e,t,r){return pR(this,arguments,void 0,(function*(e,t,r,n=e.defaultReturnFormat){var i;const s=cP({format:"bytes"},t,bb);if(null===(i=e.wallet)||void 0===i?void 0:i.get(r)){const t=e.wallet.get(r).sign(s);return cP(TC,t,n)}if("number"==typeof r)throw new Pw(t,'RPC method "eth_sign" does not support index signatures');const o=yield function(e,t,r){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","hex"],[t,r]),e.send({method:"eth_sign",params:[t,r]})}))}(e.requestManager,r,s);return cP({format:"bytes"},o,n)}))}(this,e,t,r)}))}signTransaction(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultReturnFormat){const n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_signTransaction",params:[t]})}))}(e.requestManager,RC(t,wb,{transactionSchema:e.config.customTransactionSchema}));return l_(n)?function(e,t,r={fillInputAndData:!1}){return{raw:cP({format:"bytes"},e,t),tx:RC(Object.assign(Object.assign({},HT.fromSerializedData(cS(e)).toJSON()),{hash:aS(hP(cS(e))),type:(n=cS(e),n[0]>127?"0x0":_S(n[0]))}),t,{fillInputAndData:r.fillInputAndData,transactionSchema:r.transactionSchema})};var n}(n,r,{fillInputAndData:!0}):{raw:cP({format:"bytes"},n.raw,r),tx:RC(n.tx,r,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}}))}(this,e,t)}))}call(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return ER(this,e,t,r)}))}estimateGas(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return AR(this,e,t,r)}))}getPastLogs(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return IR(this,e,t)}))}getWork(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_getWork",params:[]})}))}(this.requestManager)}))}submitWork(e,t,r){return CR(this,void 0,void 0,(function*(){return function(e,t,r,n){return oC(this,void 0,void 0,(function*(){return X_.validate(["bytes8","bytes32","bytes32"],[t,r,n]),e.send({method:"eth_submitWork",params:[t,r,n]})}))}(this.requestManager,e,t,r)}))}requestAccounts(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_requestAccounts",params:[]})}))}(this.requestManager)}))}getChainId(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return xR(this,e)}))}getNodeInfo(){return CR(this,void 0,void 0,(function*(){return function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"web3_clientVersion",params:[]})}))}(this.requestManager)}))}getProof(e,t){return CR(this,arguments,void 0,(function*(e,t,r=this.defaultBlock,n=this.defaultReturnFormat){return function(e,t,r){return pR(this,arguments,void 0,(function*(e,t,r,n=e.defaultBlock,i){const s=r.map((e=>cP({format:"bytes"},e,wb))),o=H_(n)?n:cP({format:"uint"},n,wb),a=yield function(e,t,r,n){return oC(this,void 0,void 0,(function*(){return X_.validate(["address","bytes32[]","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getProof",params:[t,r,n]})}))}(e.requestManager,t,s,o);return cP(BC,a,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}getFeeHistory(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r,n=this.defaultReturnFormat){return function(e,t){return pR(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n,i){const s=cP({format:"uint"},t,wb),o=H_(r)?r:cP({format:"uint"},r,wb),a=cP({type:"array",items:{format:"uint"}},n,qC),c=yield function(e,t,r,n){return oC(this,void 0,void 0,(function*(){X_.validate(["hex","blockNumberOrTag"],[t,r]);for(const e of n)X_.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,r,n]})}))}(e.requestManager,s,o,a);return cP(CC,c,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}createAccessList(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return _R(this,e,t,r)}))}signTypedData(e,t,r,n){return CR(this,void 0,void 0,(function*(){var i;return void 0===r&&(r=!1),void 0===n&&(n=null!==(i=this.defaultReturnFormat)&&void 0!==i?i:bb),function(e,t,r,n,i){return pR(this,void 0,void 0,(function*(){const s=yield function(e,t,r,n=!1){return oC(this,void 0,void 0,(function*(){return X_.validate(["address"],[t]),e.send({method:"eth_signTypedData"+(n?"":"_v4"),params:[t,r]})}))}(e.requestManager,t,r,n);return cP({format:"bytes"},s,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}subscribe(e,t,r){return CR(this,void 0,void 0,(function*(){var n,i;void 0===r&&(r=null!==(n=this.defaultReturnFormat)&&void 0!==n?n:bb);const s=yield null===(i=this.subscriptionManager)||void 0===i?void 0:i.subscribe(e,t,r);return s instanceof PR&&"logs"===e&&"object"==typeof t&&!KS(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate((()=>{this.getPastLogs(t).then((e=>{for(const t of e)s._processSubscriptionResult(t)})).catch((e=>{s._processSubscriptionError(e)}))})),s}))}static shouldClearSubscription({sub:e}){return!(e instanceof TR)}clearSubscriptions(e=!1){var t;return null===(t=this.subscriptionManager)||void 0===t?void 0:t.unsubscribe(e?RR.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return SR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_newPendingTransactionFilter",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}createNewFilter(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return SR(this,void 0,void 0,(function*(){let{toBlock:n,fromBlock:i}=t;V_(n)||"number"!=typeof n&&"bigint"!=typeof n||(n=lS(n)),V_(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=lS(i));const s=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:n}),o=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["filter"],[t]),e.send({method:"eth_newFilter",params:[t]})}))}(e.requestManager,s);return cP({format:"uint"},o,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}createNewBlockFilter(){return CR(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return SR(this,void 0,void 0,(function*(){const r=yield function(e){return oC(this,void 0,void 0,(function*(){return e.send({method:"eth_newBlockFilter",params:[]})}))}(e.requestManager);return cP({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}uninstallFilter(e){return CR(this,void 0,void 0,(function*(){return function(e,t){return SR(this,void 0,void 0,(function*(){const r=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["hex"],[t]),e.send({method:"eth_uninstallFilter",params:[t]})}))}(e.requestManager,lS(t));return r}))}(this,e)}))}getFilterChanges(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return SR(this,void 0,void 0,(function*(){const n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["hex"],[t]),e.send({method:"eth_getFilterChanges",params:[t]})}))}(e.requestManager,lS(t));return n.map((t=>"string"==typeof t?t:cP(PC,t,null!=r?r:e.defaultReturnFormat)))}))}(this,e,t)}))}getFilterLogs(e){return CR(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return SR(this,void 0,void 0,(function*(){const n=yield function(e,t){return oC(this,void 0,void 0,(function*(){return X_.validate(["hex"],[t]),e.send({method:"eth_getFilterLogs",params:[t]})}))}(e.requestManager,lS(t));return n.map((t=>"string"==typeof t?t:cP(PC,t,null!=r?r:e.defaultReturnFormat)))}))}(this,e,t)}))}}const NR=e=>{if(V_(e.gas)||!D_(e.gas)||V_(e.gasPrice)||!D_(e.gasPrice))throw new Kw({gas:e.gas,gasPrice:e.gasPrice});if(!V_(e.maxFeePerGas)||!V_(e.maxPriorityFeePerGas))throw new Zw({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},MR=e=>{if(!V_(e.gasPrice)&&"0x2"===e.type)throw new Qw(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new Zw({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if(V_(e.maxFeePerGas)||!D_(e.maxFeePerGas)||V_(e.maxPriorityFeePerGas)||!D_(e.maxPriorityFeePerGas))throw new Ww({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})};const LR=(e,t,r,...n)=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,[e,t,r,...n],void 0,(function*(e,t,r,n=!1,i=!0){const s=yield(o={transaction:e,web3Context:t,privateKey:r,fillGasPrice:n,fillGasLimit:i},$C(void 0,void 0,void 0,(function*(){var e;return(null!==(e=o.web3Context.transactionBuilder)&&void 0!==e?e:KC)(Object.assign(Object.assign({},o),{transaction:o.transaction}))})));var o;const a=RC(s,wb,{transactionSchema:t.config.customTransactionSchema});return((e,t,r={transactionSchema:void 0})=>{if(!V_(t))return void t(e);if("object"!=typeof e||V_(e))throw new Jw(e);(e=>{if(!V_(e.common)){if(V_(e.common.customChain))throw new Lw;if(V_(e.common.customChain.chainId))throw new jw;if(!V_(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new Dw({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}})(e),(e=>{if(!V_(e.common)&&!V_(e.chain)&&!V_(e.hardfork))throw new qw;if(!V_(e.chain)&&V_(e.hardfork)||!V_(e.hardfork)&&V_(e.chain))throw new Hw({chain:e.chain,hardfork:e.hardfork})})(e),(e=>{if(!V_(e.common)&&!V_(e.common.baseChain)&&!V_(e.chain)&&e.chain!==e.common.baseChain)throw new Uw({txChain:e.chain,baseChain:e.common.baseChain})})(e),(e=>{if(!V_(e.common)&&!V_(e.common.hardfork)&&!V_(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new Fw({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})})(e);const n=RC(e,wb,{transactionSchema:r.transactionSchema});if((e=>{const t=!V_(e.gas)||!V_(e.gasLimit),r=t&&!V_(e.gasPrice),n=t&&!V_(e.maxPriorityFeePerGas)&&!V_(e.maxFeePerGas);if(!r&&!n)throw new $w({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(r&&n)throw new Vw({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(r?NR:MR)(e),(!V_(e.type)&&e.type>"0x1"?MR:NR)(e)})(n),V_(n.nonce)||V_(n.chainId)||n.nonce.startsWith("-")||n.chainId.startsWith("-"))throw new Yw({nonce:e.nonce,chainId:e.chainId})})(a,void 0,{transactionSchema:t.config.customTransactionSchema}),HT.fromTxData((e=>{var t,r;return Object.assign(Object.assign({},e),{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(r=e.data)&&void 0!==r?r:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})})(a),((e,t)=>{var r,n,i,s,o,a,c,u,h,l,d,f,p,g,m,y,v,b;let w;if((V_(e.chain)||V_(e.hardfork))&&V_(e.common))t.defaultCommon?(w=Object.assign({},t.defaultCommon),V_(w.hardfork)&&(w.hardfork=null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork),V_(w.baseChain)&&(w.baseChain=t.defaultChain)):w=PT.custom({name:"custom-network",chainId:SS(e.chainId),networkId:V_(e.networkId)?void 0:SS(e.networkId),defaultHardfork:null!==(n=e.hardfork)&&void 0!==n?n:t.defaultHardfork},{baseChain:t.defaultChain});else{const r=null!==(a=null!==(o=null===(s=null===(i=null==e?void 0:e.common)||void 0===i?void 0:i.customChain)||void 0===s?void 0:s.name)&&void 0!==o?o:e.chain)&&void 0!==a?a:"custom-network",n=SS(null!==(h=null===(u=null===(c=null==e?void 0:e.common)||void 0===c?void 0:c.customChain)||void 0===u?void 0:u.chainId)&&void 0!==h?h:null==e?void 0:e.chainId),E=SS(null!==(f=null===(d=null===(l=null==e?void 0:e.common)||void 0===l?void 0:l.customChain)||void 0===d?void 0:d.networkId)&&void 0!==f?f:null==e?void 0:e.networkId),A=null!==(m=null!==(g=null===(p=null==e?void 0:e.common)||void 0===p?void 0:p.hardfork)&&void 0!==g?g:null==e?void 0:e.hardfork)&&void 0!==m?m:t.defaultHardfork,I=null!==(b=null!==(v=null===(y=e.common)||void 0===y?void 0:y.baseChain)&&void 0!==v?v:e.chain)&&void 0!==b?b:t.defaultChain;n&&E&&r&&(w=PT.custom({name:r,chainId:n,networkId:E,defaultHardfork:A},{baseChain:I}))}return{common:w}})(a,t))})),jR=({address:e},t,r)=>{var n,i;const s=null==r?void 0:r.topics,o=null!==(n=null==r?void 0:r.filter)&&void 0!==n?n:{},a={};if(KS(null==r?void 0:r.fromBlock)||(a.fromBlock=cP(_C.properties.number,null==r?void 0:r.fromBlock,{number:yb.HEX,bytes:vb.HEX})),KS(null==r?void 0:r.toBlock)||(a.toBlock=cP(_C.properties.number,null==r?void 0:r.toBlock,{number:yb.HEX,bytes:vb.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],!t||t.anonymous||[UC,"allEvents"].includes(t.name)||a.topics.push(null!==(i=t.signature)&&void 0!==i?i:uB(cB(t))),![UC,"allEvents"].includes(t.name)&&t.inputs)for(const e of t.inputs){if(!e.indexed)continue;const t=o[e.name];t?Array.isArray(t)?a.topics.push(t.map((t=>XB(e.type,t)))):"string"===e.type?a.topics.push(hP(t)):a.topics.push(XB(e.type,t)):a.topics.push(null)}return a.topics.length||delete a.topics,e&&(a.address=e.toLowerCase()),a},DR=(e,t,r)=>{const n=Array.isArray(e.inputs)?e.inputs.length:0;if(e.inputs&&n!==t.length)throw new uw(`The number of arguments is not matching the methods required number. You need to pass ${n} arguments.`);let i;if(i=e.inputs?YB(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x",""):function(e){try{return O_(QB({type:"tuple",name:"",components:JB(e)},e).encoded)}catch(t){throw new Ew("Could not infer types from given params",{params:e})}}(t).replace("0x",""),!KS(s=e)&&"object"==typeof s&&!KS(s.type)&&"constructor"===s.type){if(!r)throw new uw("The contract has no contract data option set. This is necessary to append the constructor parameters.");return r.startsWith("0x")?`${r}${i}`:`0x${r}${i}`}var s;return`${nR(e)}${i}`};class UR extends wO{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return lR(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const FR=(e,t,r,n)=>{var i,s;const o={};return KS(e.data)&&"both"!==n||(o.data=DR(t,r,null!==(i=e.data)&&void 0!==i?i:e.input)),KS(e.input)&&"both"!==n||(o.input=DR(t,r,null!==(s=e.input)&&void 0!==s?s:e.data)),KS(o.input)&&KS(o.data)&&(o[n]=DR(t,r)),{data:o.data,input:o.input}},qR=({abi:e,params:t,options:r,contractOptions:n})=>{var i,s,o;if(!(null!==(o=null!==(s=null!==(i=null==r?void 0:r.input)&&void 0!==i?i:null==r?void 0:r.data)&&void 0!==s?s:n.input)&&void 0!==o?o:n.data)&&!(null==r?void 0:r.to)&&!n.address)throw new uw("Contract address not specified");if(!(null==r?void 0:r.from)&&!n.from)throw new uw('Contract "from" address not specified');let a=QS({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const c=FR(a,e,t,null==r?void 0:r.dataInputFill);return a=Object.assign(Object.assign({},a),{data:c.data,input:c.input}),a},HR=e=>"object"==typeof e&&!KS(e)&&0!==Object.keys(e).length&&!VS(e);class zR{_contractMethodDeploySend(e){const t={transactionResolver:e=>{if(e.status===BigInt(0))throw new uw("code couldn't be stored",e);const t=this.parent.clone();return t.options.address=e.contractAddress,t},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return V_(this.parent.getTransactionMiddleware())?wR(this.parent,e,this.parent.defaultReturnFormat,t):wR(this.parent,e,this.parent.defaultReturnFormat,t,this.parent.getTransactionMiddleware())}constructor(e,t){this.parent=e,this.deployOptions=t;const{args:r,abi:n,contractOptions:i,deployData:s}=this.calculateDeployParams();this.args=r,this.constructorAbi=n,this.contractOptions=i,this.deployData=s}send(e){const t=Object.assign({},e),r=this.populateTransaction(t);return this._contractMethodDeploySend(r)}populateTransaction(e){var t,r;const n=Object.assign(Object.assign({},this.contractOptions),{from:null!==(r=null!==(t=this.contractOptions.from)&&void 0!==t?t:this.parent.defaultAccount)&&void 0!==r?r:void 0}),i=qR({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:n});return i.dataInputFill&&delete i.dataInputFill,i}calculateDeployParams(){var e,t,r,n,i,s;let o=this.parent.options.jsonInterface.find((e=>"constructor"===e.type));o||(o={type:"constructor",stateMutability:""});const a=cP({format:"bytes"},null!==(t=null===(e=this.deployOptions)||void 0===e?void 0:e.input)&&void 0!==t?t:this.parent.options.input,bb),c=cP({format:"bytes"},null!==(n=null===(r=this.deployOptions)||void 0===r?void 0:r.data)&&void 0!==n?n:this.parent.options.data,bb);if(!(a&&"0x"!==a.trim()||c&&"0x"!==c.trim()))throw new uw("contract creation without any data provided.");return{args:null!==(s=null===(i=this.deployOptions)||void 0===i?void 0:i.arguments)&&void 0!==s?s:[],abi:o,contractOptions:Object.assign(Object.assign({},this.parent.options),{input:a,data:c}),deployData:null!=a?a:c}}estimateGas(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t=this.parent.defaultReturnFormat){const r=Object.assign({},e);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:t,options:r,contractOptions:this.contractOptions})}))}encodeABI(){return DR(this.constructorAbi,this.args,cP({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},iR(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}class $R extends vO{constructor(e,t){super(e.requestManager,e.registeredSubscriptions),this.parentContract=t}subscribe(e,t){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t,n=bb){return r.subscribe.call(this,e,null!=t?t:this.parentContract.options,n)}))}}var GR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const VR={logs:UR,newHeads:kR,newBlockHeaders:kR};class KR extends tC{get subscriptionManager(){return this._subscriptionManager}constructor(e,t,r,n,i){var s,o,a;const c=VS(t)?t:VS(r)?r:void 0;let u,h;if(u=HR(t)?t:HR(r)?r:n,h="object"==typeof t&&"provider"in t?t.provider:"object"==typeof r&&"provider"in r?r.provider:"object"==typeof n&&"provider"in n?n.provider:KR.givenProvider,super(Object.assign(Object.assign({},u),{provider:h,registeredSubscriptions:VR})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new $R(super.subscriptionManager,this),(null==u?void 0:u.wallet)&&(this._wallet=u.wallet),(null==u?void 0:u.accountProvider)&&(this._accountProvider=u.accountProvider),!V_(c)&&!V_(c.data)&&!V_(c.input)&&"both"!==this.config.contractDataInputFill)throw new fw({data:c.data,input:c.input});this._overloadedMethodAbis=new Map;const l=nP(n)?n:nP(r)?r:null!=i?i:this.defaultReturnFormat,d="string"==typeof t?t:void 0;this.config.contractDataInputFill=null!==(s=null==c?void 0:c.dataInputFill)&&void 0!==s?s:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,l),this.defaultReturnFormat!==l&&(this.defaultReturnFormat=l),V_(d)||this._parseAndSetAddress(d,l),this.options={address:d,jsonInterface:this._jsonInterface,gas:null!==(o=null==c?void 0:c.gas)&&void 0!==o?o:null==c?void 0:c.gasLimit,gasPrice:null==c?void 0:c.gasPrice,from:null==c?void 0:c.from,input:null==c?void 0:c.input,data:null==c?void 0:c.data},this.syncWithContext=null!==(a=null==c?void 0:c.syncWithContext)&&void 0!==a&&a,u instanceof tC&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,l),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,l),get:()=>this._jsonInterface}),u instanceof tC&&u.on(eO.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new KR([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):new KR([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new zR(this,e)}getPastEvents(e,t,r){return GR(this,void 0,void 0,(function*(){var n;const i="string"==typeof e?e:UC,s="string"==typeof e||nP(e)?nP(t)?{}:t:e,o=nP(e)?e:nP(t)?t:null!=r?r:this.defaultReturnFormat,a="allEvents"===i||i===UC?FC:this._jsonInterface.find((e=>"name"in e&&e.name===i));if(!a)throw new uw(`Event ${String(i)} not found.`);const{fromBlock:c,toBlock:u,topics:h,address:l}=jR(this.options,a,null!=s?s:{}),d=yield IR(this,{fromBlock:c,toBlock:u,topics:h,address:l},o),f=d?d.map((e=>"string"==typeof e?e:lR(a,e,this._jsonInterface,o))):[],p=null!==(n=null==s?void 0:s.filter)&&void 0!==n?n:{},g=Object.keys(p);return g.length>0?f.filter((e=>"string"==typeof e||g.every((t=>{var r;if(Array.isArray(p[t]))return p[t].some((r=>String(e.returnValues[t]).toUpperCase()===String(r).toUpperCase()));const n=null===(r=a.inputs)||void 0===r?void 0:r.filter((e=>e.name===t))[0];return!(!(null==n?void 0:n.indexed)||"string"!==n.type||hP(p[t])!==String(e.returnValues[t]))||String(e.returnValues[t]).toUpperCase()===String(p[t]).toUpperCase()})))):f}))}_parseAndSetAddress(e,t=this.defaultReturnFormat){this._address=e?TS(cP({format:"address"},e,t)):e}decodeMethodData(e){const t=e.slice(0,10),r=this._jsonInterface.filter((e=>"error"!==e.type)),n=r.find((e=>t===nR(cB(e))));if(!n)throw new uw(`The ABI for the provided method signature ${t} was not found.`);return iR(n,e)}_parseAndSetJsonInterface(e,t=this.defaultReturnFormat){var r,n;this._functions={},this._methods={},this._events={};let i=[];const s=e.filter((e=>"error"!==e.type)),o=e.filter((e=>rB(e)));for(const e of s){const s=Object.assign(Object.assign({},e),{signature:""});if(iB(s)){const e=cB(s),t=nR(e);s.methodNameWithInputs=e,s.signature=t,s.constant="view"===s.stateMutability||"pure"===s.stateMutability||s.constant,s.payable="payable"===s.stateMutability||s.payable,this._overloadedMethodAbis.set(s.name,[...null!==(r=this._overloadedMethodAbis.get(s.name))&&void 0!==r?r:[],s]);const i=null!==(n=this._overloadedMethodAbis.get(s.name))&&void 0!==n?n:[],a=this._createContractMethod(i,o),c=this._createContractMethod(i,o,!0);this._functions[e]={signature:t,method:c},this._methods[s.name]=a,this._methods[e]=c,this._methods[t]=c}else if(nB(s)){const e=cB(s),r=uB(e),n=this._createContractEvent(s,t);s.signature=r,e in this._events&&"bound"!==s.name||(this._events[e]=n),this._events[s.name]=n,this._events[r]=n}i=[...i,s]}this._events.allEvents=this._createContractEvent(FC,t),this._jsonInterface=[...i],this._errorsInterface=o}_getAbiParams(e,t){var r;try{return I_(null!==(r=e.inputs)&&void 0!==r?r:[],t)}catch(t){throw new uw(`Invalid parameters for method ${e.name}: ${t.message}`)}}_createContractMethod(e,t,r=!1){const n=e[e.length-1];return(...e)=>{var i,s,o;let a;const c=null!==(s=r?null===(i=this._overloadedMethodAbis.get(n.name))||void 0===i?void 0:i.filter((e=>e.signature===n.signature)):this._overloadedMethodAbis.get(n.name))&&void 0!==s?s:[];let u=c[0];const h=t,l=c.filter((t=>{var r;return(null!==(r=t.inputs)&&void 0!==r?r:[]).length===e.length}));if(1===c.length||0===l.length)a=this._getAbiParams(u,e),X_.validate(null!==(o=n.inputs)&&void 0!==o?o:[],a);else{const t=[],r=[];for(const n of l)try{a=this._getAbiParams(n,e),X_.validate(n.inputs,a),r.push(n)}catch(e){t.push(e)}if(1===r.length?[u]=r:r.length>1&&([u]=r,console.warn(`Multiple methods found that is compatible with the given inputs.\n\tFound ${r.length} compatible methods: ${JSON.stringify(r.map((e=>`${e.methodNameWithInputs} (signature: ${e.signature})`)))} \n\tThe first one will be used: ${u.methodNameWithInputs}`)),t.length===l.length)throw new c_(t)}const d={arguments:a,call:(e,t)=>GR(this,void 0,void 0,(function*(){return this._contractMethodCall(u,a,h,e,t)})),send:e=>this._contractMethodSend(u,a,h,e),populateTransaction:(t,r)=>{var i,s;let o=null!=r?r:this.options;o=Object.assign(Object.assign({},o),{input:void 0,from:null!==(s=null!==(i=null==o?void 0:o.from)&&void 0!==i?i:this.defaultAccount)&&void 0!==s?s:void 0});const a=qR({abi:n,params:e,options:Object.assign(Object.assign({},t),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o});return a.dataInputFill&&delete a.dataInputFill,a},estimateGas:(e,...t)=>GR(this,[e,...t],void 0,(function*(e,t=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:u,params:a,returnFormat:t,options:e})})),encodeABI:()=>DR(u,a),decodeData:e=>iR(u,e),createAccessList:(e,t)=>GR(this,void 0,void 0,(function*(){return this._contractMethodCreateAccessList(u,a,h,e,t)}))};return u.stateMutability,d}}_contractMethodCall(e,t,r,n,i){return GR(this,void 0,void 0,(function*(){var s;const o=(({abi:e,params:t,options:r,contractOptions:n})=>{if(!(null==r?void 0:r.to)&&!n.address)throw new uw("Contract address not specified");let i=QS({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const s=FR(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{const t=yield ER(this,o,i,this.defaultReturnFormat);return((e,t)=>{if("constructor"===e.type)return t;if(!t)return null;const r=t.length>=2?t.slice(2):t;if(!e.outputs)return null;const n=tR([...e.outputs],r);return 1===n.__length__?n[0]:n})(e,t)}catch(e){throw e instanceof dw&&aR(r,e.cause),e}}))}_contractMethodCreateAccessList(e,t,r,n,i){return GR(this,void 0,void 0,(function*(){var s;const o=(({abi:e,params:t,options:r,contractOptions:n})=>{if(!(null==r?void 0:r.to)&&!n.address)throw new uw("Contract address not specified");if(!(null==r?void 0:r.from)&&!n.from)throw new uw('Contract "from" address not specified');let i=QS({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const s=FR(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{return _R(this,o,i,this.defaultReturnFormat)}catch(e){throw e instanceof dw&&aR(r,e.cause),e}}))}_contractMethodSend(e,t,r,n,i){var s,o;let a=null!=i?i:this.options;a=Object.assign(Object.assign({},a),{input:void 0,from:null!==(o=null!==(s=a.from)&&void 0!==s?s:this.defaultAccount)&&void 0!==o?o:void 0});const c=qR({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:a}),u=V_(this.transactionMiddleware)?wR(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):wR(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return u.on("error",(e=>{e instanceof dw&&aR(r,e.cause)})),u}contractMethodEstimateGas(e){return GR(this,arguments,void 0,(function*({abi:e,params:t,returnFormat:r,options:n,contractOptions:i}){const s=(({abi:e,params:t,options:r,contractOptions:n})=>{let i=QS({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,data:n.data},r);const s=FR(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!=i?i:this.options});return AR(this,s,Eb.LATEST,null!=r?r:this.defaultReturnFormat)}))}_createContractEvent(e,t=this.defaultReturnFormat){return(...r)=>{var n;const{topics:i,fromBlock:s}=jR(this.options,e,r[0]),o=new UR({address:this.options.address,topics:i,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return V_(s)||this.getPastEvents(e.name,{fromBlock:s,topics:i},t).then((e=>{e&&e.forEach((e=>o.emit("data",e)))})).catch((e=>{o.emit("error",new _w("Failed to get past events.",e))})),null===(n=this.subscriptionManager)||void 0===n||n.addSubscription(o).catch((e=>{o.emit("error",new _w("Failed to subscribe.",e))})),o}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(eO.CONFIG_CHANGE,(e=>{t.setConfig({[e.name]:e.newValue})}))}}const WR=KR,QR={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},ZR={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},JR={"0x1":"main","0x5":"goerli"},YR=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],XR=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}],eN=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function tN(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let o=r(),a=t;t+=o;let c=0,u=0;function h(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const l=2**31,d=l>>>1,f=d>>1,p=l-1;let g=0;for(let e=0;e<31;e++)g=g<<1|h();let m=[],y=0,v=l;for(;;){let e=Math.floor(((g-y+1)*i-1)/v),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;m.push(t);let o=y+Math.floor(v*s[t]/i),a=y+Math.floor(v*s[t+1]/i)-1;for(;!((o^a)&d);)g=g<<1&p|h(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)g=g&d|g<<1&p>>>1|h(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,v=1+a-o}let b=n-4;return m.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,o=0,a=0;i<r;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}(e)))}function rN(e){return 1&e?~e>>1:e>>1}function nN(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=rN(t());return r}function iN(e,t=0){let r=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)r.push(t+e);t+=i+1}return r}function sN(e){return aN((()=>{let t=iN(e);if(t.length)return t}))}function oN(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(uN(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(hN(r,e))}return t.flat()}function aN(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function cN(e,t,r){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++)nN(e,r).forEach(((e,t)=>n[t].push(e)));return n}function uN(e,t){let r=1+t(),n=t(),i=aN(t);return cN(i.length,1+e,t).flatMap(((e,t)=>{let[s,...o]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[s+t*r,o.map((e=>e+i))]}))}))}function hN(e,t){return cN(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function lN(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function dN(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function fN(e,t){let r=e.length,n=r-t.length;for(let i=0;0==n&&i<r;i++)n=e[i]-t[i];return n}const pN=44032,gN=4352,mN=4449,yN=4519;function vN(e){return e>>24&255}function bN(e){return 16777215&e}let wN,EN,AN,IN;function xN(e){return e>=pN&&e<55204}function _N(e,t){if(e>=gN&&e<4371&&t>=mN&&t<4470)return pN+588*(e-gN)+28*(t-mN);if(xN(e)&&t>yN&&t<4547&&(e-pN)%28==0)return e+(t-yN);{let r=IN.get(e);return r&&(r=r.get(t),r)?r:-1}}function SN(e){wN||function(){let e=tN("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");wN=new Map(sN(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),EN=new Set(iN(e)),AN=new Map,IN=new Map;for(let[t,r]of oN(e)){if(!EN.has(t)&&2==r.length){let[e,n]=r,i=IN.get(e);i||(i=new Map,IN.set(e,i)),i.set(n,t)}AN.set(t,r.reverse())}}();let t=[],r=[],n=!1;function i(e){let r=wN.get(e);r&&(n=!0,e|=r),t.push(e)}for(let n of e)for(;;){if(n<128)t.push(n);else if(xN(n)){let e=n-pN,t=e%588/28|0,r=e%28;i(gN+(e/588|0)),i(mN+t),r>0&&i(yN+r)}else{let e=AN.get(n);e?r.push(...e):i(n)}if(!r.length)break;n=r.pop()}if(n&&t.length>1){let e=vN(t[0]);for(let r=1;r<t.length;r++){let n=vN(t[r]);if(0==n||e<=n){e=n;continue}let i=r-1;for(;;){let r=t[i+1];if(t[i+1]=t[i],t[i]=r,!i)break;if(e=vN(t[--i]),e<=n)break}e=vN(t[r])}}return t}function PN(e){return SN(e).map(bN)}function ON(e){return function(e){let t=[],r=[],n=-1,i=0;for(let s of e){let e=vN(s),o=bN(s);if(-1==n)0==e?n=o:t.push(o);else if(i>0&&i>=e)0==e?(t.push(n,...r),r.length=0,n=o):r.push(o),i=e;else{let s=_N(n,o);s>=0?n=s:0==i&&0==e?(t.push(n),n=o):(r.push(o),i=e)}}return n>=0&&t.push(n,...r),t}(SN(e))}const kN=e=>Array.from(e);function TN(e,t){return e.P.has(t)||e.Q.has(t)}class CN extends Array{get is_emoji(){return!0}}let BN,RN,NN,MN,LN,jN,DN,UN,FN,qN,HN,zN;function $N(){if(BN)return;let e=tN("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>iN(e),r=()=>new Set(t()),n=(e,t)=>t.forEach((t=>e.add(t)));BN=new Map(oN(e)),RN=r(),NN=t(),MN=new Set(t().map((e=>NN[e]))),NN=new Set(NN),LN=r(),jN=r();let i=sN(e),s=e();const o=()=>{let e=new Set;return t().forEach((t=>n(e,i[t]))),n(e,t()),e};DN=aN((t=>{let r=aN(e).map((e=>e+96));if(r.length){let n=t>=s;return r[0]-=32,r=dN(r),n&&(r=`Restricted[${r}]`),{N:r,P:o(),Q:o(),M:!e(),R:n}}})),UN=r(),FN=new Map;let a=t().concat(kN(UN)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let n=e(),i=a[r]=n?a[r-n]:{V:[],M:new Map};i.V.push(t),UN.has(t)||FN.set(t,i)}));for(let{V:e,M:t}of new Set(FN.values())){let r=[];for(let t of e){let e=DN.filter((e=>TN(e,t))),i=r.find((({G:t})=>e.some((e=>t.has(e)))));i||(i={G:new Set,V:[]},r.push(i)),i.V.push(t),n(i.G,e)}let i=r.flatMap((e=>kN(e.G)));for(let{G:e,V:n}of r){let r=new Set(i.filter((t=>!e.has(t))));for(let e of n)t.set(e,r)}}qN=new Set;let c=new Set;const u=e=>qN.has(e)?c.add(e):qN.add(e);for(let e of DN){for(let t of e.P)u(t);for(let t of e.Q)u(t)}for(let e of qN)FN.has(e)||c.has(e)||FN.set(e,1);n(qN,PN(qN)),HN=function(e){let t=[],r=iN(e);return function e({S:r,B:n},i,s){if(!(4&r&&s===i[i.length-1])){2&r&&(s=i[i.length-1]),1&r&&t.push(i);for(let t of n)for(let r of t.Q)e(t,[...i,r],s)}}(function t(n){let i=e(),s=aN((()=>{let n=iN(e).map((e=>r[e]));if(n.length)return t(n)}));return{S:i,B:s,Q:n}}([]),[]),t}(e).map((e=>CN.from(e))).sort(fN),zN=new Map;for(let e of HN){let t=[zN];for(let r of e){let e=t.map((e=>{let t=e.get(r);return t||(t=new Map,e.set(r,t)),t}));65039===r?t.push(...e):t=e}for(let r of t)r.V=e}}function GN(e){return(WN(e)?"":`${VN(KN([e]))} `)+lN(e)}function VN(e){return`"${e}"`}function KN(e,t=1/0,r=lN){let n=[];var i;i=e[0],$N(),NN.has(i)&&n.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let s=0,o=e.length;for(let t=0;t<o;t++){let i=e[t];WN(i)&&(n.push(dN(e.slice(s,t))),n.push(r(i)),s=t+1)}return n.push(dN(e.slice(s,o))),n.join("")}function WN(e){return $N(),LN.has(e)}function QN(e,t,r){if(!e)return[];$N();let n=0;return e.split(".").map((e=>{let i=function(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}(e),s={input:i,offset:n};n+=i.length+1;try{let e,n=s.tokens=function(e,t,r){let n=[],i=[];for(e=e.slice().reverse();e.length;){let s=eM(e);if(s)i.length&&(n.push(t(i)),i=[]),n.push(r(s));else{let t=e.pop();if(qN.has(t))i.push(t);else{let e=BN.get(t);if(e)i.push(...e);else if(!RN.has(t))throw ZN(t)}}}return i.length&&n.push(t(i)),n}(i,t,r),o=n.length;if(!o)throw new Error("empty label");let a=s.output=n.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(s.emoji=o>1||n[0].is_emoji)&&a.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${dN(e.slice(0,4))}"`)}(a),e="ASCII";else{let t=n.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(NN.has(a[0]))throw YN("leading combining mark");for(let e=1;e<o;e++){let t=n[e];if(!t.is_emoji&&NN.has(t[0]))throw YN(`emoji + combining mark: "${dN(n[e-1])} + ${KN([t[0]])}"`)}!function(e){let t=e[0],r=eN.get(t);if(r)throw YN(`leading ${r}`);let n=e.length,i=-1;for(let s=1;s<n;s++){t=e[s];let n=eN.get(t);if(n){if(i==s)throw YN(`${r} + ${n}`);i=s+1,r=n}}if(i==n)throw YN(`trailing ${r}`)}(a);let r=kN(new Set(t)),[i]=function(e){let t=DN;for(let r of e){let e=t.filter((e=>TN(e,r)));if(!e.length)throw DN.some((e=>TN(e,r)))?JN(t[0],r):ZN(r);if(t=e,1==e.length)break}return t}(r);!function(e,t){for(let r of t)if(!TN(e,r))throw JN(e,r);if(e.M){let e=PN(t);for(let t=1,r=e.length;t<r;t++)if(MN.has(e[t])){let n=t+1;for(let i;n<r&&MN.has(i=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==i)throw new Error(`duplicate non-spacing marks: ${GN(i)}`);if(n-t>4)throw new Error(`excessive non-spacing marks: ${VN(KN(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}}(i,t),function(e,t){let r,n=[];for(let e of t){let t=FN.get(e);if(1===t)return;if(t){let n=t.M.get(e);if(r=r?r.filter((e=>n.has(e))):kN(n),!r.length)return}else n.push(e)}if(r)for(let t of r)if(n.every((e=>TN(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,r),e=i.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s}))}function ZN(e){return new Error(`disallowed character: ${GN(e)}`)}function JN(e,t){let r=GN(t),n=DN.find((e=>e.P.has(t)));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${e.N} + ${r}`)}function YN(e){return new Error(`illegal placement: ${e}`)}function XN(e){return e.filter((e=>65039!=e))}function eM(e,t){let r,n=zN,i=e.length;for(;i&&(n=n.get(e[--i]),n);){let{V:s}=n;s&&(r=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return r}const tM=e=>function(e){return function(e){return e.map((({input:t,error:r,output:n})=>{if(r){let n=r.message;throw new Error(1==e.length?n:`Invalid label ${VN(KN(t,63))}: ${n}`)}return dN(n)})).join(".")}(QN(e,ON,XN))}(e),rM=e=>{let t="";for(let e=0;e<32;e+=1)t+="00";if(e){const r=tM(e).split(".");for(let e=r.length-1;e>=0;e-=1){const n=dP(r[e]).slice(2);t=dP(`0x${t}${n}`).slice(2)}}return`0x${t}`};var nM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class iM{constructor(e,t){this.contract=new KR(YR,null!=t?t:ZR.main,e),this.context=e}getOwner(e){return nM(this,void 0,void 0,(function*(){try{return this.contract.methods.owner(rM(e)).call()}catch(e){throw new Error}}))}getTTL(e){return nM(this,void 0,void 0,(function*(){try{return this.contract.methods.ttl(rM(e)).call()}catch(e){throw new Error}}))}recordExists(e){return nM(this,void 0,void 0,(function*(){try{return this.contract.methods.recordExists(rM(e)).call()}catch(e){throw new Error}}))}getResolver(e){return nM(this,void 0,void 0,(function*(){try{return this.contract.methods.resolver(rM(e)).call().then((e=>{if("string"==typeof e)return new KR(XR,e,this.context);throw new Error}))}catch(e){throw new Error}}))}get events(){return this.contract.events}}var sM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class oM{constructor(e){this.registry=e}getResolverContractAdapter(e){return sM(this,void 0,void 0,(function*(){return this.registry.getResolver(e)}))}checkInterfaceSupport(e,t){var r,n;return sM(this,void 0,void 0,(function*(){if(KS(QR[t]))throw new hw(null!==(r=e.options.address)&&void 0!==r?r:"",t);if(!(yield e.methods.supportsInterface(QR[t]).call()))throw new hw(null!==(n=e.options.address)&&void 0!==n?n:"",t)}))}supportsInterface(e,t){var r;return sM(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);let i=t;if(!d_(i)){if(i=null!==(r=lP(t))&&void 0!==r?r:"",""===t)throw new Error("Invalid interface Id");i=i.slice(0,10)}return n.methods.supportsInterface(i).call()}))}getAddress(e,t=60){return sM(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,"addr"),r.methods.addr(rM(e),t).call()}))}getPubkey(e){return sM(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"pubkey"),t.methods.pubkey(rM(e)).call()}))}getContenthash(e){return sM(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"contenthash"),t.methods.contenthash(rM(e)).call()}))}setAddress(e,t,r){return sM(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,"addr"),n.methods.setAddr(rM(e),t).send(r)}))}getText(e,t){return sM(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,"text"),r.methods.text(rM(e),t).call()}))}getName(e,t=!0){return sM(this,void 0,void 0,(function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,n=yield this.getResolverContractAdapter(r);return t&&(yield this.checkInterfaceSupport(n,"name")),n.methods.name(rM(r)).call()}))}}var aM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class cM extends tC{constructor(e,t){super(null!=t?t:""),this.registryAddress=null!=e?e:ZR.main,this._registry=new iM(this.getContextObject(),e),this._resolver=new oM(this._registry)}getResolver(e){return aM(this,void 0,void 0,(function*(){return this._registry.getResolver(e)}))}recordExists(e){return aM(this,void 0,void 0,(function*(){return this._registry.recordExists(e)}))}getTTL(e){return aM(this,void 0,void 0,(function*(){return this._registry.getTTL(e)}))}getOwner(e){return aM(this,void 0,void 0,(function*(){return this._registry.getOwner(e)}))}getAddress(e,t=60){return aM(this,void 0,void 0,(function*(){return this._resolver.getAddress(e,t)}))}getText(e,t){return aM(this,void 0,void 0,(function*(){return L_(e)?this._resolver.getText(yield this._resolver.getName(e,!1),t):this._resolver.getText(e,t)}))}getName(e,t=!0){return aM(this,void 0,void 0,(function*(){return this._resolver.getName(e,t)}))}getPubkey(e){return aM(this,void 0,void 0,(function*(){return this._resolver.getPubkey(e)}))}getContenthash(e){return aM(this,void 0,void 0,(function*(){return this._resolver.getContenthash(e)}))}checkNetwork(){return aM(this,void 0,void 0,(function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const r=yield(t=this,pR(void 0,void 0,void 0,(function*(){return aC(t.requestManager)})));if("boolean"!=typeof r||r)throw new gw;this._lastSyncCheck=e}var t;if(this._detectedAddress)return this._detectedAddress;const r=yield MC(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:yb.HEX})),n=ZR[JR[r]];if(void 0===n)throw new pw(r);return this._detectedAddress=n,this._detectedAddress}))}supportsInterface(e,t){return aM(this,void 0,void 0,(function*(){return this._resolver.supportsInterface(e,t)}))}get events(){return this._registry.events}setAddress(e,t,r){return aM(this,void 0,void 0,(function*(){return this._resolver.setAddress(e,t,r)}))}}var uM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};var hM,lM,dM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class fM extends tC{getAccounts(){return dM(this,void 0,void 0,(function*(){return e=this.requestManager,uM(void 0,void 0,void 0,(function*(){const t=yield(e=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_listAccounts",params:[]})})))(e);return t.map(TS)}));var e}))}newAccount(e){return dM(this,void 0,void 0,(function*(){return((e,t)=>uM(void 0,void 0,void 0,(function*(){X_.validate(["string"],[t]);const r=yield((e,t)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_newAccount",params:[t]})})))(e,t);return TS(r)})))(this.requestManager,e)}))}unlockAccount(e,t,r){return dM(this,void 0,void 0,(function*(){return((e,t,r,n)=>uM(void 0,void 0,void 0,(function*(){return X_.validate(["address","string","uint"],[t,r,n]),((e,t,r,n)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_unlockAccount",params:[t,r,n]})})))(e,t,r,n)})))(this.requestManager,e,t,r)}))}lockAccount(e){return dM(this,void 0,void 0,(function*(){return((e,t)=>uM(void 0,void 0,void 0,(function*(){return X_.validate(["address"],[t]),((e,t)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_lockAccount",params:[t]})})))(e,t)})))(this.requestManager,e)}))}importRawKey(e,t){return dM(this,void 0,void 0,(function*(){return((e,t,r)=>uM(void 0,void 0,void 0,(function*(){return X_.validate(["string","string"],[t,r]),((e,t,r)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_importRawKey",params:[t,r]})})))(e,t,r)})))(this.requestManager,e,t)}))}sendTransaction(e,t){return dM(this,void 0,void 0,(function*(){return((e,t,r,n)=>uM(void 0,void 0,void 0,(function*(){const i=RC(t,wb,{transactionSchema:null==n?void 0:n.customTransactionSchema});return((e,t,r)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sendTransaction",params:[t,r]})})))(e,i,r)})))(this.requestManager,e,t,this.config)}))}signTransaction(e,t){return dM(this,void 0,void 0,(function*(){return((e,t,r,n)=>uM(void 0,void 0,void 0,(function*(){const i=RC(t,wb,{transactionSchema:null==n?void 0:n.customTransactionSchema});return((e,t,r)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_signTransaction",params:[t,r]})})))(e,i,r)})))(this.requestManager,e,t,this.config)}))}sign(e,t,r){return dM(this,void 0,void 0,(function*(){return((e,t,r,n)=>uM(void 0,void 0,void 0,(function*(){X_.validate(["string","address","string"],[t,r,n]);const i=d_(t)?t:pS(t);return((e,t,r,n)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sign",params:[t,r,n]})})))(e,i,r,n)})))(this.requestManager,e,t,r)}))}ecRecover(e,t){return dM(this,void 0,void 0,(function*(){return((e,t,r)=>uM(void 0,void 0,void 0,(function*(){X_.validate(["string","string"],[t,r]);const n=d_(t)?t:pS(t);return((e,t,r)=>lC(void 0,void 0,void 0,(function*(){return e.send({method:"personal_ecRecover",params:[t,r]})})))(e,n,r)})))(this.requestManager,e,t)}))}}!function(e){e.HTTPS="https",e.WebSocket="wss"}(hM||(hM={})),function(e){e.ETH_MAINNET="eth_mainnet",e.ETH_SEPOLIA="eth_sepolia",e.ETH_HOLESKY="eth_holesky",e.POLYGON_MAINNET="polygon_mainnet",e.POLYGON_AMOY="polygon_amoy",e.AVALANCHE_C_MAINNET="avalanche_c_mainnet",e.AVALANCHE_P_MAINNET="avalanche_p_mainnet",e.AVALANCHE_X_MAINNET="avalanche_x_mainnet",e.ARBITRUM_MAINNET="arbitrum_mainnet",e.ARBITRUM_SEPOLIA="arbitrum_sepolia",e.BASE_MAINNET="base_mainnet",e.BASE_SEPOLIA="base_sepolia",e.OPTIMISM_MAINNET="optimism_mainnet",e.OPTIMISM_SEPOLIA="optimism_sepolia",e.FANTOM_MAINNET="fantom_mainnet",e.FANTOM_TESTNET="fantom_testnet",e.DYMENSION_MAINNET="dymension_mainnet",e.DYMENSION_TESTNET="dymension_testnet",e.BNB_MAINNET="bnb_mainnet",e.BNB_TESTNET="bnb_testnet",e.BSC_MAINNET="bsc_mainnet",e.BSC_TESTNET="bsc_testnet",e.ARBITRUM_ONE="arbitrum_one",e.ARBITRUM_NOVA="arbitrum_nova",e.AVALANCHE_FUJI_C="avalanche_fuji_c",e.AVALANCHE_FUJI_P="avalanche_fuji_p",e.AVALANCHE_FUJI_X="avalanche_fuji_x",e.BLAST_MAINNET="blast_mainnet",e.OPBNB_MAINNET="opbnb_mainnet",e.OPBNB_TESTNET="opbnb_testnet",e.GNOSIS_MAINNET="gnosis_mainnet",e.GNOSIS_CHIADO="gnosis_chiado",e.PULSECHAIN_MAINNET="pulsechain_mainnet",e.PULSECHAIN_TESTNET="pulsechain_testnet",e.KAVA_MAINNET="kava_mainnet",e.CRONOS_MAINNET="cronos_mainnet",e.MANTLE_MAINNET="mantle_mainnet",e.CHILIZ_MAINNET="chiliz_mainnet",e.CHILIZ_SPICY="chiliz_spicy",e.MOONBEAM_MAINNET="moonbeam_mainnet",e.TAIKO_MAINNET="taiko_mainnet",e.TAIKO_HEKLA="taiko_hekla",e.LINEA_MAINNET="linea_mainnet",e.LINEA_SEPOLIA="linea_sepolia",e.BAHAMUT_MAINNET="bahamut_mainnet",e.SCROLL_MAINNET="scroll_mainnet",e.SCROLL_SEPOLIA="scroll_sepolia",e.TRON_MAINNET="tron_mainnet",e.SYSCOIN_MAINNET="syscoin_mainnet",e.SYSCOIN_TANENBAUM="syscoin_tanenbaum",e.MOONRIVER_MAINNET="moonriver_mainnet",e.HAQQ_MAINNET="haqq_mainnet",e.EVMOS_MAINNET="evmos_mainnet",e.EVMOS_TESTNET="evmos_testnet",e.BERACHAIN_TESTNET="berachain_testnet"}(lM||(lM={}));class pM extends Vb{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=1300}}class gM extends Vb{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=1301}}class mM extends QP{constructor(e,t,r,n,i){if(super(),void 0!==i&&t===hM.HTTPS&&!("providerOptions"in i))throw new gM("HTTP Provider");if(void 0!==i&&t===hM.WebSocket&&!("socketOptions"in i)&&!("reconnectOptions"in i))throw new gM("Websocket Provider");this.transport=t,t===hM.HTTPS?this.provider=new nO(this.getRPCURL(e,t,r,n),i):t===hM.WebSocket&&(this.provider=new oO(this.getRPCURL(e,t,r,n),null==i?void 0:i.socketOptions,null==i?void 0:i.reconnectOptions))}request(e,t){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.transport===hM.HTTPS?yield this.provider.request(e,t):this.provider.request(e)}))}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,t){var r;(null===(r=this.provider)||void 0===r?void 0:r.once)&&this.provider.once(e,t)}removeAllListeners(e){var t;(null===(t=this.provider)||void 0===t?void 0:t.removeAllListeners)&&this.provider.removeAllListeners(e)}connect(){var e;(null===(e=this.provider)||void 0===e?void 0:e.connect)&&this.provider.connect()}disconnect(e,t){var r;(null===(r=this.provider)||void 0===r?void 0:r.disconnect)&&this.provider.disconnect(e,t)}reset(){var e;(null===(e=this.provider)||void 0===e?void 0:e.reset)&&this.provider.reset()}on(e,t){this.provider&&this.provider.on(e,t)}removeListener(e,t){this.provider&&this.provider.removeListener(e,t)}}const yM=e=>void 0!==e&&e.trim().length>0,vM=[lM.DYMENSION_MAINNET,lM.DYMENSION_TESTNET,lM.KAVA_MAINNET,lM.CRONOS_MAINNET,lM.POLYGON_MAINNET];class bM extends mM{constructor(e=lM.ETH_MAINNET,t=hM.HTTPS,r="",n){super(e,t,"",r,n)}getRPCURL(e,t,r,n){if(!bM.networkHostMap[e])throw new Error("Network info not avalible.");const i=`${bM.networkHostMap[e]}.publicnode.com`,s=void 0!==(o=n)&&o.trim().length>0?n:i;var o;return vM.includes(e)&&t===hM.WebSocket?`${t}://${s}/websocket`:`${t}://${s}`}}bM.networkHostMap={[lM.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[lM.DYMENSION_MAINNET]:"dymension-evm-rpc",[lM.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[lM.BLAST_MAINNET]:"blast-rpc",[lM.GNOSIS_MAINNET]:"gnosis-rpc",[lM.PULSECHAIN_MAINNET]:"pulsechain-rpc",[lM.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[lM.KAVA_MAINNET]:"kava-evm-rpc",[lM.CRONOS_MAINNET]:"cronos-evm-rpc",[lM.MANTLE_MAINNET]:"mantle-rpc",[lM.TAIKO_MAINNET]:"taiko-rpc",[lM.TAIKO_HEKLA]:"taiko-hekla-rpc",[lM.LINEA_MAINNET]:"linea-rpc",[lM.LINEA_SEPOLIA]:"linea-sepolia-rpc",[lM.SCROLL_MAINNET]:"scroll-rpc",[lM.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[lM.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[lM.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[lM.HAQQ_MAINNET]:"haqq-evm-rpc",[lM.EVMOS_MAINNET]:"evmos-evm-rpc",[lM.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[lM.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[lM.ETH_MAINNET]:"ethereum-rpc",[lM.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[lM.ETH_HOLESKY]:"ethereum-holesky-rpc",[lM.BSC_MAINNET]:"bsc-rpc",[lM.BSC_TESTNET]:"bsc-testnet-rpc",[lM.POLYGON_MAINNET]:"polygon-bor-rpc",[lM.BASE_MAINNET]:"base-rpc",[lM.BASE_SEPOLIA]:"base-sepolia-rpc",[lM.ARBITRUM_ONE]:"arbitrum-one-rpc",[lM.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[lM.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[lM.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[lM.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[lM.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[lM.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[lM.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[lM.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[lM.OPTIMISM_MAINNET]:"optimism-rpc",[lM.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[lM.FANTOM_MAINNET]:"fantom-rpc",[lM.FANTOM_TESTNET]:"fantom-testnet-rpc",[lM.OPBNB_MAINNET]:"opbnb-rpc",[lM.OPBNB_TESTNET]:"opbnb-testnet-rpc",[lM.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[lM.CHILIZ_MAINNET]:"chiliz-rpc",[lM.CHILIZ_SPICY]:"chiliz-spicy-rpc",[lM.MOONBEAM_MAINNET]:"moonbeam-rpc",[lM.BAHAMUT_MAINNET]:"bahamut-rpc",[lM.TRON_MAINNET]:"tron-evm-rpc",[lM.MOONRIVER_MAINNET]:"moonriver-rpc"};const wM=new class extends mM{constructor(e=lM.ETH_MAINNET,t=hM.HTTPS,r="",n="",i){super(e,t,r,n,i)}request(e,t){const r=Object.create(null,{request:{get:()=>super.request}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){try{return yield r.request.call(this,e,t)}catch(e){if(e instanceof SE&&429===e.statusCode)throw new pM(e);throw e}}))}getRPCURL(e,t,r,n){let i="",s="";switch(e){case lM.ETH_MAINNET:i=yM(n)?n:"powerful-holy-bush.quiknode.pro",s=yM(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case lM.ETH_SEPOLIA:i=yM(n)?n:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",s=yM(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case lM.ETH_HOLESKY:i=yM(n)?n:"yolo-morning-card.ethereum-holesky.quiknode.pro",s=yM(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case lM.ARBITRUM_MAINNET:i=yM(n)?n:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",s=yM(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case lM.ARBITRUM_SEPOLIA:i=yM(n)?n:"few-patient-pond.arbitrum-sepolia.quiknode.pro",s=yM(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case lM.BNB_MAINNET:i=yM(n)?n:"purple-empty-reel.bsc.quiknode.pro",s=yM(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case lM.BNB_TESTNET:i=yM(n)?n:"floral-rough-scion.bsc-testnet.quiknode.pro",s=yM(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case lM.POLYGON_MAINNET:i=yM(n)?n:"small-chaotic-moon.matic.quiknode.pro",s=yM(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case lM.POLYGON_AMOY:i=yM(n)?n:"prettiest-side-shape.matic-amoy.quiknode.pro",s=yM(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${t}://${i}/${s}`}},EM={encodeEventSignature:uB,encodeFunctionCall:(e,t)=>{var r;if(!iB(e))throw new Ew("Invalid parameter value in encodeFunctionCall");return`${nR(e)}${YB(null!==(r=e.inputs)&&void 0!==r?r:[],null!=t?t:[]).replace("0x","")}`},encodeFunctionSignature:nR,encodeParameter:XB,encodeParameters:YB,decodeParameter:rR,decodeParameters:tR,decodeLog:oR};var AM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const IM=e=>{const t=(t,r)=>AM(void 0,void 0,void 0,(function*(){return((e,t)=>zT(void 0,void 0,void 0,(function*(){const r=e.sign(cS(t));if(V_(r.v)||V_(r.r)||V_(r.s))throw new uE("Signer Error");const n=r.validate(!0);if(n.length>0){let e="Signer Error ";for(const t of n)e+=`${e} ${t}.`;throw new uE(e)}const i=aS(r.serialize()),s=dP(i);return{messageHash:aS(r.getMessageToSign(!0)),v:`0x${r.v.toString(16)}`,r:`0x${r.r.toString(16).padStart(64,"0")}`,s:`0x${r.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:aS(s)}})))(yield LR(t,e),cP({format:"bytes"},r,wb))})),r=e=>{const r=YT(e);return Object.assign(Object.assign({},r),{signTransaction:e=>AM(void 0,void 0,void 0,(function*(){return t(e,r.privateKey)}))})},n=(e,r,n)=>AM(void 0,void 0,void 0,(function*(){var i;const s=yield((e,t,r)=>zT(void 0,void 0,void 0,(function*(){const n="object"==typeof e?e:JSON.parse(r?e.toLowerCase():e);if(X_.validateJSONSchema(Xk,n),3!==n.version)throw new ew;const i="string"==typeof t?cS(pS(t)):t;let s;if(X_.validate(["bytes"],[i]),"scrypt"===n.crypto.kdf){const e=n.crypto.kdfparams;s=VO(i,"string"==typeof e.salt?cS(e.salt):e.salt,e.n,e.p,e.r,e.dklen)}else{if("pbkdf2"!==n.crypto.kdf)throw new Yb;{const e=n.crypto.kdfparams;s=zO(i,"string"==typeof e.salt?cS(e.salt):e.salt,e.c,e.dklen,"sha256")}}const o=cS(n.crypto.ciphertext);if(dP(tS(s.slice(16,32),o)).replace("0x","")!==n.crypto.mac)throw new Xb;const a=yield async function(e,t,r,n="aes-128-ctr",i=!0){if(xO(t,r,n),IO.web){const[s,o]=await _O(n,t,r);if(!i&&"aes-cbc"===o.name){const i=await async function(e,t,r,n){const i=e.slice(-16);for(let e=0;e<16;e++)i[e]^=16^r[e];return(await SO(i,t,r,n)).slice(0,16)}(e,t,r,n);e=aA(e,i)}const a=await IO.web.subtle.decrypt(o,s,e),c=new Uint8Array(a);if("aes-cbc"===o.name&&!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(await SO(c,t,r,n),e))throw new Error("AES: wrong padding");return c}if(IO.node){const s=IO.node.createDecipheriv(n,t,r);return s.setAutoPadding(i),aA(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}(cS(n.crypto.ciphertext),s.slice(0,16),cS(n.crypto.cipherparams.iv));return YT(a)})))(e,r,null===(i=null==n?void 0:n.nonStrict)||void 0===i||i);return Object.assign(Object.assign({},s),{signTransaction:e=>AM(void 0,void 0,void 0,(function*(){return t(e,s.privateKey)}))})})),i=()=>{const e=(()=>{const e=Qk.utils.randomPrivateKey();return YT(`${aS(e)}`)})();return Object.assign(Object.assign({},e),{signTransaction:r=>AM(void 0,void 0,void 0,(function*(){return t(r,e.privateKey)}))})},s=new AO({create:i,privateKeyToAccount:r,decrypt:n});return{signTransaction:t,create:i,privateKeyToAccount:r,decrypt:n,recoverTransaction:KT,hashMessage:GT,sign:VT,recover:WT,encrypt:JT,wallet:s,privateKeyToAddress:QT,parseAndValidatePrivateKey:$T,privateKeyToPublicKey:ZT}};var xM;!function(e){e.eip6963announceProvider="eip6963:announceProvider",e.eip6963requestProvider="eip6963:requestProvider"}(xM||(xM={}));const _M=new Map,SM="web3:providersMapUpdated";class PM extends tC{constructor(e=wM){var t;(KS(e)||"string"==typeof e&&""===e.trim()||"string"!=typeof e&&!dO(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};"string"==typeof e||dO(e)?r.provider=e:r=e||{},r.registeredSubscriptions=Object.assign(Object.assign({},BR),null!==(t=r.registeredSubscriptions)&&void 0!==t?t:{}),super(r);const n=IM(this);this._wallet=n.wallet,this._accountProvider=n,this.utils=y;const i=this,s=i.use(RR);this.eth=Object.assign(s,{ens:i.use(cM,ZR.main),Iban:rC,net:i.use(DC),personal:i.use(fM),Contract:class extends WR{constructor(e,t,r,n,o){if(VS(t)&&VS(r))throw new mw("Should not provide options at both 2nd and 3rd parameters");let a,c,u,h={};if(!KS(t)&&"object"!=typeof t&&"string"!=typeof t)throw new mw;if("string"==typeof t&&(a=t),h=VS(t)?t:VS(r)?r:{},c=t instanceof tC?t:r instanceof tC?r:n instanceof tC?n:i.getContextObject(),o?u=o:nP(r)?u=r:nP(n)&&(u=n),super(e,a,h,c,u),super.subscribeToContextEvents(i),!KS(s)){const e=s.getTransactionMiddleware();KS(e)||super.setTransactionMiddleware(e)}}},abi:EM,accounts:n})}}PM.version="4.16.0",PM.utils=y,PM.requestEIP6963Providers=()=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){return new Promise(((e,t)=>{"undefined"==typeof window&&t(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(xM.eip6963announceProvider,(t=>{_M.set(t.detail.info.uuid,t.detail);const r=new CustomEvent(SM,{detail:_M});window.dispatchEvent(r),e(_M)})),window.dispatchEvent(new Event(xM.eip6963requestProvider))}))})),PM.onNewProviderDiscovered=e=>{if("undefined"==typeof window)throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(SM,e)},PM.modules={Web3Eth:RR,Iban:rC,Net:DC,ENS:cM,Personal:fM};const OM=PM;function kM(e){return kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kM(e)}function TM(){TM=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new T(n||[]);return i(o,"_invoke",{value:S(e,r,a)}),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,o,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(C([])));A&&A!==r&&n.call(A,o)&&(w=A);var I=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,s,o,a){var c=l(e[i],e,s);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==kM(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,r,n){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=l(t,r,n);if("normal"===u.type){if(i=n.done?g:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=l(i,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(kM(t)+" is not iterable")}return v.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},x(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,i,s){void 0===s&&(s=Promise);var o=new _(h(e,r,n,i),s);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(I),u(I,c,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function CM(e,t,r,n,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function BM(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(e){CM(s,n,i,o,a,"next",e)}function a(e){CM(s,n,i,o,a,"throw",e)}o(void 0)}))}}var RM=11155111,NM="https://sepolia.infura.io/v3/32193d86ae664f1188540cfca7b790cf";document.addEventListener("DOMContentLoaded",BM(TM().mark((function e(){var t,r,n,i,s,o,a,c;return TM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=BM(TM().mark((function e(){var t,r,n,i,o,a,c,u,h,l,d,f,p,g,m,y,v,b,w,E;return TM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=document.getElementById("amount").value,r=document.getElementById("referrerAddress").value.trim(),console.log("this is referal---\x3e ",r),t&&!(parseFloat(t)<0)){e.next=8;break}return alert("Invalid amount"),location.reload(),e.abrupt("return");case 8:return e.next=10,s();case 10:return n=e.sent,i=n.web3,o=n.account,a=n.usdtContract,n.usdtBalance,c=n.usdtBalanceInEth,u=i.utils.toWei(t,"ether"),console.log("balance in usdt eth is is",t,"======>",u),console.log("balance in eth is",c),e.next=21,i.eth.getBalance(o);case 21:if(h=e.sent,l=i.utils.fromWei(h,"ether"),console.log("native balance is",h),console.log("native balance is native eth is",l),d=i.utils.toChecksumAddress(r),!(parseFloat(l)<parseFloat(t))){e.next=29;break}return alert("Insufficient USDT balance. You need at least ".concat(l/Math.pow(10,18)," USDT in your wallet to proceed.")),e.abrupt("return");case 29:return f=a.methods.buyTokens(d,u).encodeABI(),e.next=32,i.eth.getTransactionCount(o,"latest");case 32:return p=e.sent,e.next=35,i.eth.getGasPrice();case 35:return g=e.sent,console.log("txData, nonce, gasPrice",f,p,g),console.log("usdtContract.options.address,",a.options.address),m=i.utils.toWei(t,"ether"),e.next=41,i.eth.estimateGas({from:o,to:a.options.address,value:m,data:f});case 41:return y=e.sent,console.log("gasLimit",y),console.log("gas limit is",y),v=i.utils.fromWei((y*g).toString(),"ether"),e.next=47,i.eth.getBalance(o);case 47:if(b=e.sent,w=i.utils.fromWei(b,"ether"),console.log("balance in ether is",w),!(parseFloat(w)<parseFloat(v))){e.next=53;break}return alert("Insufficient BNB balance to cover gas fees. You need at least ".concat(v," BNB.")),e.abrupt("return");case 53:console.log("amount to be sent with trsanaction is",m),console.log("came for sending transaction","account is ".concat(o),"to address is ".concat(a.options.address," and value is ").concat(m)),E={from:o,to:a.options.address,data:f,gas:y,gasPrice:g,nonce:p,chainId:RM,value:m},i.eth.sendTransaction(E).on("transactionHash",(function(e){Swal.fire({title:"Transaction Sent!",html:'\n    <p><strong>Transaction Hash:</strong></p>\n    <code style="font-size: 0.9rem; word-wrap: break-word;">'.concat(e,'</code>\n    <br/><br/>\n    <a href="https://sepolia.etherscan.io/tx/').concat(e,'" target="_blank" style="color: #3085d6; text-decoration: underline;">View on Etherscan</a>\n  '),icon:"success",confirmButtonText:"OK"})})).on("error",console.error),e.next=62;break;case 59:e.prev=59,e.t0=e.catch(0),console.error("Error in payment process:",e.t0);case 62:case"end":return e.stop()}}),e,null,[[0,59]])})))).apply(this,arguments)},a=function(){return c.apply(this,arguments)},o=function(){return(o=BM(TM().mark((function e(){var i,s,o,a,c,u,h,l,d,f;return TM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.enable();case 3:return i=new OM(t),e.next=6,i.eth.getAccounts();case 6:return s=e.sent,o=s[0],a=new OM(NM),e.next=11,fetch("./contractABI.json");case 11:return c=e.sent,e.next=14,c.json();case 14:if(u=e.sent){e.next=18;break}throw new Error("Failed to retrieve USDT contract ABI");case 18:return h=u,l=new a.eth.Contract(h,"0xe3eafae0A321D6d40fcA7103876A7eBA4C5855E9"),e.next=22,l.methods.balanceOf(o).call();case 22:return d=e.sent,f=a.utils.fromWei(d,"ether"),console.log("Connected account:",o),localStorage.setItem("walletAddress",o),r&&(r.innerHTML="Connected",r.disabled=!0,r.style.color="green",r.classList.add("disabled")),n&&(n.innerHTML="".concat(o.slice(0,5)+"...."+o.slice(-5)),window.location.href="/userDashboard"),e.abrupt("return",{web3:i,account:o,usdtContract:l,usdtBalance:d,usdtBalanceInEth:f});case 31:e.prev=31,e.t0=e.catch(0),console.error("Error connecting wallet:",e.t0);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})))).apply(this,arguments)},s=function(){return o.apply(this,arguments)},e.next=6,mb.init({projectId:"f8fa01f8bf28e049d1bea3fde0e5a412",showQrModal:!0,optionalChains:[RM],rpcMap:{11155111:NM}});case 6:t=e.sent,r=document.getElementById("connectWalletBtn"),n=document.getElementById("WalletAddressUser"),i=document.getElementById("BuyTCC"),r&&r.addEventListener("click",s),i&&i.addEventListener("click",a);case 13:case"end":return e.stop()}}),e)}))))})()})();